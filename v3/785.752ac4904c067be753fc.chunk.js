!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="04fffe09-4d3f-471f-9710-a48071a20dba",e._sentryDebugIdIdentifier="sentry-dbid-04fffe09-4d3f-471f-9710-a48071a20dba")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[785],{52919:(e,t,a)=>{a.d(t,{D7:()=>r,Jp:()=>d,NT:()=>m,N_:()=>h,iS:()=>c,vE:()=>i,v_:()=>o,xI:()=>s,z6:()=>u});var n=a(8711),l=a(65336);const o=n.default.img.withConfig({displayName:"styled__Illustration",componentId:"sc-1yhntgl-0"})(["margin:0 auto;"]),r=(0,n.default)(l.Text).withConfig({displayName:"styled__StyledText",componentId:"sc-1yhntgl-1"})(["display:block;"]),d=n.default.div.withConfig({displayName:"styled__TextHeader",componentId:"sc-1yhntgl-2"})(["margin-bottom:",";font-weight:700;"],(0,l.getSizeBy)(2)),s=n.default.div.withConfig({displayName:"styled__StaticCheckmarks",componentId:"sc-1yhntgl-3"})(["margin-top:",";margin-bottom:",";"],(0,l.getSizeBy)(2),(0,l.getSizeBy)(5)),c=n.default.div.withConfig({displayName:"styled__CheckmarkLine",componentId:"sc-1yhntgl-4"})(["display:flex;align-items:center;"]),i=(0,n.default)(l.Icon).withConfig({displayName:"styled__StyledIcon",componentId:"sc-1yhntgl-5"})(["margin-right:4px;height:18px;> use{fill:",";}"],(0,l.getColor)("primary")),m=(0,n.default)(i).withConfig({displayName:"styled__HelpIcon",componentId:"sc-1yhntgl-6"})(["vertical-align:middle;"]),u=n.default.div.withConfig({displayName:"styled__LearnMoreSection",componentId:"sc-1yhntgl-7"})(["margin-top:",";"],(0,l.getSizeBy)(4)),h=n.default.a.withConfig({displayName:"styled__Link",componentId:"sc-1yhntgl-8"})(["text-decoration:underline;color:",";&:visited{color:",";}"],(0,l.getColor)("success"),(0,l.getColor)("success"))},40785:(e,t,a)=>{a.r(t),a.d(t,{DashboardContent:()=>Me,default:()=>Be});var n=a(96540),l=a(47767),o=a(43124);var r=a(56820),d=a(3914),s=a(69765),c=a(35304),i=a(21591),m=a(68980),u=a(54621),h=a(91517),b=a(28738);const g=()=>n.createElement(b.A,{title:"Loading charts...","data-testid":"dashboardLoading"});var f=a(67602),E=a(3705),p=a(86652),y=a(58388),v=a(11128),C=a(47762),A=a(58168),x=a(65336),I=a(49667);const w=e=>{let{compact:t,...a}=e;const[,l]=(0,f.A)("addChartModal"),o=(0,C.TG)().length>0;return n.createElement(x.Flex,(0,A.A)({column:!0,alignItems:"center",justifyContent:"center",overflow:{vertical:"auto"},flex:!0,basis:0,"data-testid":"dashboardBlankSlate"},a),!t&&n.createElement(x.Flex,{as:"img",src:I.$,height:"35%"}),n.createElement(x.H3,{margin:[6,0,2]},"Empty Dashboard"),o?n.createElement(n.Fragment,null,n.createElement(x.Text,{textAlign:"center"},"Let\u2019s fill your dashboard."),n.createElement(x.Text,{textAlign:"center"},"Go to a node view or node list and add one chart to this Dashboard or just use")):n.createElement(n.Fragment,null,n.createElement(x.Text,{textAlign:"center"},"You don't have any available node to retrieve charts from."),n.createElement(x.Text,{textAlign:"center"},"Please verify your nodes' state and/or connect a new node to Netdata")),!t&&n.createElement(x.Button,{margin:[8,0,0,0],onClick:l,disabled:!o,label:"Add chart","data-testid":"dashboardBlankSlate-addChart"}))};a(3064),a(41393),a(98992),a(72577),a(81454);var k=a(15327),D=a(74618),N=a(45765),_=a(67990),S=a(69388),T=a(23931),F=a(57605),z=a(67544),M=(a(9920),a(3949),a(45387)),B=a(13624),$=a(36196),L=a(80925),R=a(13752),j=a(92815),H=a(72582),K=a(64125),U=a(44644),G=a(18202),O=a(29217);const Y=()=>n.createElement(x.Flex,{column:!0,width:"300px",gap:1},n.createElement(x.TextSmall,{strong:!0},"Not finding a chart?"),n.createElement(x.TextSmall,null,"When selecting",n.createElement(x.TextSmall,{strong:!0,margin:[0,1]},"All Nodes"),"you search and add charts using their context. The outcome will be a composite chart over All Nodes, like on the Overview tab."),n.createElement(x.TextSmall,null,"When you select a",n.createElement(x.TextSmall,{strong:!0,margin:[0,1]},"specific Node"),"you search and add charts using their name. The result is a specific chart over the node selected, like on Single Node tab.")),J=()=>n.createElement(O.A,{isBasic:!0,plain:!0,content:Y,align:"bottom"},n.createElement(x.Icon,{name:"question",color:"textDescription",size:"small"})),W=e=>{let{spaceId:t,roomId:a,value:l,onChange:o,options:r,testid:d,selectedNodeIds:s}=e;const c=l?.value,i=(0,L.eg)(),m=(0,T.R7)(c&&a,c),u=(0,U.CS)({type:"chart",entity:c,path:"/"}),h=(0,B.K)({spaceId:t,roomId:a}),b=(0,n.useMemo)((()=>{i.getNodes({id:"newDashboardChart"}).forEach((e=>e.destroy()));const{info:e,valueRange:t,height:n,colors:l}=(0,M.Ay)(m),o=i.makeChart({attributes:{id:"newDashboardChart",contextScope:[c],host:h,roomId:a,info:e,valueRange:t,height:n+207,enabledNavigation:!1,selectedNodes:s,...l&&{colors:l},toolboxElements:[H.default,R.default,j.default,K.A],...(0,G.A)(u,!0)}});return i.getRoot().appendChild(o),o}),[i,c]);return(0,n.useLayoutEffect)((()=>{b&&u&&(b.updateAttributes((0,G.A)(u,!0)),b.trigger("fetch"))}),[b,a,c,u]),(0,n.useLayoutEffect)((()=>()=>b.destroy()),[]),n.createElement(x.Flex,{gap:6,column:!0},n.createElement(x.Flex,{gap:2,column:!0,"data-testid":d},n.createElement(x.Flex,{gap:2},n.createElement(x.H5,null,"Context in room overview"),n.createElement(J,null)),n.createElement(x.Select,{options:r,value:l,onChange:o,isClearable:!0,form:d})),l&&n.createElement(x.Flex,{height:{min:"320px"},column:!0},n.createElement($.A,{chart:b,margin:[2,0,0]})))};var P=a(69421);const X={label:"All Nodes",value:"all-nodes"},q={label:"All Nodes (no reachable nodes)",value:"all-nodes",isDisabled:!0},Q=e=>{let{id:t,isLive:a,nodeStatus:n,name:l}=e;return{label:a?l:`${l} (${n})`,value:t,isDisabled:!a}},V=e=>({value:e,label:e}),Z=e=>{let{id:t,onClose:a}=e;const l=(0,d.vt)(),o=(0,s.ID)(),r=(0,m.fz)(t,"name"),c=(0,s.XA)("name"),i=(0,_.CK)(),u=(0,C.BU)().length>0,h=(0,_.nj)(),b=(0,C.Gt)(i),g=(0,z.nM)(t),f=u?X:q,[E,p]=(0,n.useState)(f.value),[y,v]=(0,n.useState)(null),A=(0,n.useMemo)((()=>[f,...b.map(Q)]),[b]),I=(0,n.useMemo)((()=>A.find((e=>{let{value:t}=e;return t===E}))),[A,E]),w=(0,n.useCallback)((e=>{p(e?.value||f.value),v(null)}),[]),M=(0,n.useMemo)((()=>E===f.value?[]:[E]),[E]),B=(0,S.A)(o,M,{spaceId:l}),$=(0,T.R7)(o),R=(0,n.useMemo)((()=>Object.keys($).sort(((e,t)=>e.localeCompare(t,void 0,{sensitivity:"accent",ignorePunctuation:!0}))).map(V)),[$]);(0,n.useEffect)((()=>{R.length&&I&&v((e=>e||R[0].value))}),[y,R,I]);const j=(0,n.useMemo)((()=>y&&V(y)),[y]),H=(0,n.useCallback)((e=>v(e?.value)),[]),K=$[y],U=(0,L.eg)(),O=(0,n.useCallback)((()=>{const e=U.getNode({id:"newDashboardChart"}),t=(0,G.h)(e.getAttributes());g(t.contextScope,t,(()=>setTimeout(a)))}),[E,K]),Y=!y,J=(0,F.A)();return(0,n.useEffect)((()=>(J(!0),()=>J(!1)))),n.createElement(k.GO,{onClose:a},B?n.createElement(n.Fragment,null,n.createElement(D.z,{onClose:a,title:"Add Chart to Dashboard"}),n.createElement(k.Yv,{height:"100%",padding:[0,8]},n.createElement(P.A,{error:B}))):n.createElement(n.Fragment,null,n.createElement(D.z,{onClose:a,title:"Add Chart to Dashboard"},n.createElement(x.Button,{label:"Add chart",icon:"plus",onClick:O,disabled:Y,"data-testid":"addChartModal-addChart-button"})),n.createElement(N.U,null,"Add Charts to ",r),n.createElement(k.Yv,{overflow:"visible"},n.createElement(x.Flex,{gap:6,column:!0},n.createElement(x.Flex,{gap:2,column:!0,"data-testid":"addChartModal-selectNodes"},n.createElement(x.H5,null,"Nodes in ",c),n.createElement(x.Select,{options:A,value:I,onChange:w,isLoading:!h,isClearable:!0,form:"addChartModal-selectNodes"})),j&&n.createElement(W,{id:t,spaceId:l,roomId:o,value:j,onChange:H,options:R,testid:"addChartModal-selectChart",selectedNodeIds:M})))))};var ee=a(83084),te=a(76777),ae=a(27467),ne=a(7855),le=a(63314),oe=(a(14905),a(8872),a(79304)),re=a(44554);const de=function(e,t){let{containerIds:a,containers:n,layout:l}=e,{extraKey:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={},d=a.reduce(((e,a)=>{const d=(0,re.bj)(l[a],"vertical");return e[a]={...n[a],level:0,id:a,subMenuIds:d.reduce(((e,n)=>{let{id:l}=n;return"text"!==t(l).type&&e.push(`${a}|${l}`),e}),[]),subMenuChartIds:[],link:`${(0,oe.A)(`menu_${a}`)}`,forceVisibility:!0,arFlavour:"anomaly",extraKey:o},d.forEach((e=>{const n=`${a}|${e.id}`,l=t(e.id);"text"!==l.type&&(r[n]={name:l.title,level:1,id:n,menuId:a,chartIds:[],link:`${(0,oe.A)(`menu_${a}_submenu_${n}`)}`,arFlavour:"anomaly",showAR:!1,extraKey:o})})),e}),{});return{menuIds:a,menuById:d,subMenuById:r}};var se=a(75793);const ce=e=>{let{id:t}=e;const a=(0,m.fz)(t,"name");return n.createElement(se.A,{TextComponent:x.H0,text:a})};var ie=a(46741);const me=()=>{const[,e]=(0,f.A)("addChartModal"),t=(0,ie.JT)("dashboard:Update");return(0,C.TG)().length>0?n.createElement(x.Button,{neutral:!0,flavour:"hollow",label:"Add chart",icon:"chart_added",onClick:e,"data-testid":"dashboardHeaderActionBar-addChart-button","data-ga":"action-bar::click-add-chart::cust-dashboard",disabled:!t}):null},ue=e=>{let{id:t}=e;const a=(0,z.Kv)(t),l=(0,ie.JT)("dashboard:Update");return n.createElement(x.Button,{neutral:!0,flavour:"hollow",label:"Add text",icon:"text_add",onClick:a,"data-testid":"dashboardHeaderActionBar-addText-button","data-ga":"action-bar::click-add-text::cust-dashboard",disabled:!l})};var he=a(71835),be=a(2025),ge=a(64754);const fe=e=>{let{id:t}=e;const[,a]=(0,he.A)(),l=(0,be.DH)(t,{onFail:a}),o=(0,m.fz)(t,"processing"),r=(0,m.fz)(t,"isOwner"),d=(0,m.zN)(t);return n.createElement(ge.A,{permission:r?"dashboard:UpdateSelf":"dashboard:Update",flavour:"hollow",label:"Save",icon:"save",onClick:()=>l(),disabled:d,isLoading:o,"data-testid":"dashboardHeaderActionBar-save-button","data-ga":"action-bar::click-save::cust-dashboard"})},Ee=e=>{let{id:t}=e;return n.createElement(x.Flex,{gap:2},n.createElement(me,null),n.createElement(ue,{id:t}),n.createElement(fe,{id:t}))},pe=(0,n.memo)(Ee);var ye=a(58384),ve=a(87659),Ce=a(78969),Ae=a(92138),xe=a(8018),Ie=a(52919);const we=e=>{let{close:t}=e;const[a,o]=(0,n.useState)(!0),r=(0,m.zi)(),[d,c]=(0,m.TN)({id:r,key:"name"}),i=(0,m.oj)("slug"),h=(0,Ae.A)(i),[b,g]=(0,n.useState)(d),f=(0,be.DH)(r),E=(0,u.DF)(),p=(0,l.Zp)(),y=(0,s.r9)(),v=b.length>0,C=a&&v&&b!==d,A=(0,n.useCallback)((()=>{c(b),f().then((e=>{let{data:a}=e;const{slug:n}=a;if(h===n)return void t();const l=`${y}/dashboards/${n}`;E({id:r,slug:n,path:l}),p(l,{replace:!0}),t()}))}),[t,b,r,y,h]);return n.createElement(k.GO,{onClose:t,"data-testid":"renameDashboard-modal"},n.createElement(D.z,{onClose:t,title:"Rename Dashboard"},n.createElement(x.Button,{label:"Save Changes",onClick:A,disabled:!C})),n.createElement(N.U,{"data-testid":"renameDashboard-title"},"Rename dashboard ",d),n.createElement(k.Yv,null,n.createElement(xe.A,{value:b,label:"Name",onChange:e=>{g(e.target.value)},isValid:a,setIsValid:o,isDirty:v,instantFeedback:"all",onKeyDown:e=>e.keyCode===Ce.I7&&C&&A(),"data-testid":"renameDashboard-input"}),n.createElement(x.Flex,{column:!0,justifyContent:"between",height:"100%",margin:[8,0,16],"data-testid":"renameDashboard-learnMoreSection"},n.createElement(Ie.z6,null,n.createElement(Ie.NT,{name:"help"}),n.createElement(x.Text,null,"Learn more about Dashboards")," ",n.createElement(Ie.N_,{href:"https://learn.netdata.cloud/docs/dashboards-and-charts/",target:"_blank",rel:"noopener noreferrer"},"In our documentation")),n.createElement(Ie.v_,{src:I.$}))))},ke=()=>{const e=(0,l.Zp)(),t=(0,d.bq)(),a=(0,s.QW)(),o=(0,m.zi)(),{name:r}=(0,m.fz)(o),c=(0,s.XA)("name"),[i,,u,h]=(0,ve.A)(),[b,,g,f]=(0,ve.A)(),E=(0,n.useCallback)((()=>{e(`/spaces/${t}/rooms/${a}/dashboards`)}),[t,a]),p=(0,z.A_)(o,{onSuccess:E}),y=(0,ie.JT)("dashboard:Update"),v=(0,ie.JT)("dashboard:Delete");return n.createElement(n.Fragment,null,n.createElement(ye.A,{category:"dashboard",context:"title",testId:"dashboardDropdown"},(e=>{let{close:t}=e;return n.createElement(n.Fragment,null,n.createElement(ye.t,{icon:"pencilOutline",onClick:()=>{t(),g()},"data-testid":"renameDashboard-option","data-ga":"dropdown-item::click-rename-dashboard::cust-dashboard",disabled:!y},"Rename Dashboard"),n.createElement(ye.t,{icon:"trashcan",color:"errorText",onClick:()=>{t(),u()},"data-testid":"removeDashboard-option","data-ga":"dropdown-item::click-remove-dashboard::cust-dashboard",disabled:!v},"Delete Dashboard"))})),b&&n.createElement(we,{close:f}),i&&n.createElement(x.ConfirmationDialog,{confirmLabel:"Yes, delete","data-ga":"delete-dashboard-dialog","data-testid":"deleteDashboardDialog",handleConfirm:p,handleDecline:h,message:n.createElement(n.Fragment,null,"You are about to delete ",n.createElement("strong",null,r)," from ",n.createElement("strong",null,c),".",n.createElement("br",null),"Are you sure you want to continue?"),title:`Delete ${r}`}))},De=e=>{let{id:t}=e;return n.createElement(x.Flex,{justifyContent:"between",padding:[3],"data-testid":"dashboardHeader"},n.createElement(x.Flex,{alignItems:"center"},n.createElement(ke,null),n.createElement(ce,{id:t})),n.createElement(pe,{id:t}))},Ne=(0,n.memo)(De);var _e=a(86008);const Se=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{navigator:a}=(0,n.useContext)(l.jb),o=(0,l.zy)();(0,n.useEffect)((()=>{if(!t)return;const n=a.block((t=>{const a={...t,retry(){n(),t.retry()}};e(a)}));return n}),[a,e,t,o])}((0,n.useCallback)((t=>{"REPLACE"!==t.action?window.confirm(e)&&t.retry():t.retry()}),[e]),t)},Te=()=>((0,te.A)(),null),Fe=(0,n.memo)((e=>{let{id:t}=e;const[a,,,l]=(0,f.A)("addChartModal"),{fullyLoaded:o,cardIds:r,name:d}=(0,m.fz)(t);(e=>{const t=(0,m.zN)(e);Se("Are you sure you want to leave this dashboard?\nChanges will be lost.",!t)})(t);const[c,{width:i}]=(0,E.A)(),u=(0,s.ID)(),[h,b]=(0,ae.N9)("chartName",{key:u,extraKey:t,flavour:"val"}),g=(0,v.w7)({extraKey:"dashboard",merge:!1,scoped:!0}),A=((0,C.TG)(g),(0,p.Xc)(t)),x=(0,y.T6)(t);return n.createElement(le.Ay,{feature:"custom-dashboard"},n.createElement(ne.A,{getObject:x,ids:A,getMenu:de,extraKey:t},n.createElement(Te,null),n.createElement(ee.A,{ref:c,overflow:"hidden"},n.createElement(Ne,{id:t}),o&&r.length>0&&n.createElement(_e.A,{id:t,containerWidth:i,initialChartName:h,onChartNameChange:b}),o&&0===r.length&&n.createElement(w,null),a&&n.createElement(Z,{id:t,onClose:l}))))}));var ze=a(85686);const Me=e=>{let{id:t}=e;const a=(0,d.vt)(),l=(0,d.bq)(),o=(0,s.ID)(),r=(0,s.QW)(),c=(0,m.oj)("state");return(0,h.A)(t,{spaceId:a,spaceSlug:l,roomId:o,roomSlug:r})?n.createElement(g,null):n.createElement(le.Ay,{feature:"Dashboard",dashboardId:t},"notAvailable"==c?n.createElement(ze.A,{flavour:"dashboard"}):n.createElement(Fe,{id:t}))},Be=(0,n.memo)((e=>{let{customDashboardId:t}=e;(0,c.A)(),(e=>{const{dashboardSlug:t=e}=(0,l.g)(),a=(0,o.Xv)(),r=(0,o.Tf)();(0,n.useEffect)((()=>{r!==t&&a(t)}),[r,t]),(0,n.useEffect)((()=>()=>a(null)),[])})(t),(0,r.z1)(t);const a=(0,m.zi)(t),d=(0,m.oj)("slug");(0,u.ZB)({title:d,id:a,destination:d,type:"dashboards",droppable:!0,droppableProps:{dashboardId:a,dropArea:!0}});const s=(0,i.RQ)();return n.createElement(Me,{id:s?a:null})}))}}]);