!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b850d48c-f335-427a-9c54-2a7657c4d52c",e._sentryDebugIdIdentifier="sentry-dbid-b850d48c-f335-427a-9c54-2a7657c4d52c")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[9021],{62727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});n(17333),n(41393),n(98992),n(54520),n(81454);var r=n(96540),o=n(45467),l=n(11128),a=n(47762),i=n(45123),c=n(87659),s=n(47731),d=n(82230),u=n(24398),m=n(57605),f=n(11261),g=n(38413),p=n(8711),h=n(65336),v=n(49389),x=n(63950),E=n.n(x),b=n(78062),w=n(50876);const y=e=>{let{startAddingNodes:t=E(),close:n=E(),children:o}=e;const{sendLog:l}=(0,w.A)(),a=(0,r.useCallback)((()=>{n(),t(),l({feature:"NodesFilterAddNodes"})}),[n,t,l]);return r.createElement(h.Flex,{column:!0,gap:1,padding:[2,2,1],zIndex:1,border:{side:"top",color:"border"}},r.createElement(h.Flex,{gap:2,justifyContent:"end"},r.createElement(b.A,{icon:"nodes_hollow",flavour:"hollow",onClick:a,small:!0,label:"Add Nodes"})),o)};var A=n(74002),C=n(94177),k=n(90535),F=n(3914),I=n(73865),T=n(6586),N=n(12602);const S=e=>{let{onAnchorClick:t}=e;const n=(0,F.dg)(),{loaded:o,hasLimitations:l,maxNodes:a}=(0,I.A)();return o&&l?r.createElement(h.Flex,{gap:2,padding:[3]},r.createElement(h.Icon,{name:"warning_triangle",size:"small",color:"warning"}),n?r.createElement(h.Text,null,"Local dashboard is limited to ",a," nodes."," ",r.createElement(T.A,{onClick:t},r.createElement(h.Text,{color:"primary"},"Review your Space active Nodes"))):r.createElement(h.Text,null,"Your plan is limited to ",a," nodes."," ",r.createElement(N.A,{onClick:t},r.createElement(h.Text,{color:"primary"},"Upgrade for no limitations"))," ","or"," ",r.createElement(T.A,{onClick:t},r.createElement(h.Text,{color:"primary"},"review your Space active Nodes")),".")):null},L=e=>{let{onAnchorClick:t=E()}=e;return r.createElement(S,{onAnchorClick:t})},_=["filters"],B=(0,p.default)(h.Drop).attrs({backdrop:!0,align:{top:"bottom",right:"right"},animation:!0,background:"modalBackground",column:!0,margin:[2,0,0],padding:[2,0],round:4,width:200}).withConfig({displayName:"dropdown__Dropdown",componentId:"sc-1birv08-0"})([""]),D=(0,r.memo)((e=>{let{target:t,onClose:n,onAddNodes:o}=e;const a=(0,l.w7)(),i=(0,m.A)();return(0,r.useEffect)((()=>{i()}),[]),r.createElement(B,{target:t,onEsc:n,onClickOutside:n},r.createElement(h.Flex,{column:!0,height:{max:"60vh"}},r.createElement(h.Flex,{flex:"1",overflow:"hidden"},r.createElement(h.Flex,{column:!0,flex:!0},r.createElement(h.Flex,{alignItems:"center",padding:[3],border:{side:"bottom",color:"border"},height:12,flex:!1},r.createElement(h.Text,{strong:!0},"Visualizing data in space from ",a.length||"all"," ",(0,v.su)(a.length))),r.createElement(L,{onAnchorClick:n}),r.createElement(C.A,{testIdPrefix:"node-ids",param:"selectedNodeIds",groupProps:{collapsible:!1,background:"modalBackground",padding:[3],flex:"1",overflow:"hidden"},height:"auto",width:"100%"})),r.createElement(A.Ay,{basis:60,baseWidth:60,flex:!1,title:"Dynamic filters",help:"Filter your nodes for this page. Count next to each item refer to the number of nodes that will be selected and used across the page.",includedTabs:_,loaded:!0,onClose:n,groupProps:{background:"modalBackground"},background:"modalBackground"})),r.createElement(y,{startAddingNodes:o,close:n},r.createElement(k.A,null))))})),R=(0,r.memo)((()=>{const e=(0,s.J)(),[t,n,,p]=(0,c.A)(!1),h=(0,r.useRef)(),v=(0,l.w7)(),x=(0,a.BU)().length,E=(0,a.Ig)().length,b=(0,a.GE)().length,w=(0,a.no)().length,y=(0,a.BU)(v.length?v:void 0).length,A=(0,a.Ig)(v.length?v:void 0).length,C=(0,a.GE)(v.length?v:void 0).length,k=(0,a.no)(v.length?v:void 0).length,F=(0,r.useMemo)((()=>({live:{selected:y,total:x,statusText:"Live"},stale:{selected:A,total:E,statusText:"Stale"},offline:{selected:C,total:b,statusText:"Offline"},unseen:{selected:k,total:w,statusText:"Unseen"}})),[x,E,b,w,y,A,C]),I=(0,m.A)();(0,o.A)((()=>{I(t)}),[t]);const[T,,N,S]=(0,c.A)();return r.createElement(r.Fragment,null,r.createElement(i.A,{ref:h,testid:"globalFilter-nodes",icon:"nodes",onClick:n,round:1,padding:e?[1]:[2],width:"auto",cursor:"pointer",selected:t},r.createElement(f.A,{"data-testid":"nodesIndicator",alignItems:"center",justifyContent:"end",gap:2},Object.keys(F).filter((e=>F[e].total)).map((t=>r.createElement(d.A,{key:t,statusText:F[t].statusText,total:F[t].total,selected:F[t].selected,statusColor:u.P[t],isScreenSmall:e}))))),h.current&&t&&r.createElement(D,{target:h.current,onClose:p,onAddNodes:N}),T&&r.createElement(g.A,{onClose:S}))}))},78062:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(58168),o=n(96540),l=n(65336),a=n(28146),i=n(69765),c=n(3914),s=n(53285);var d;const u=(d=l.Button,e=>{const t=(0,i.XA)(),n=(0,c.dg)();return o.createElement(s.A,{permission:"node:Create"},(i=>{const c=o.createElement(d,(0,r.A)({disabled:!i},e));return i?c:o.createElement(a.A,{content:n?"You are viewing your local node, connect to cloud and connect multiple nodes to view at once":`Only admin users can add nodes to ${t.name}`,"data-testid":"addNodeTooltipContainer"},o.createElement(l.Box,null,c))}))})},90535:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});n(41393),n(81454);var r=n(96540),o=n(65336),l=n(47762),a=n(11128);const i=e=>{let{children:t}=e;return r.createElement(o.Flex,{"data-testid":"selected-nodes-container",gap:1,alignItems:"center",width:"100%"},r.createElement(o.Flex,{alignItems:"center"},r.createElement(o.TextSmall,{whiteSpace:"nowrap","data-testid":"selected-nodes-container-message",color:"primary"},"Selected filters:")),r.createElement(o.Flex,{height:{max:50},overflow:{vertical:"auto"},padding:[1],gap:1,alignItems:"center",flexWrap:!0},t))},c=(0,r.memo)(i);var s=n(4659);const d=e=>{let{onRemove:t}=e;return r.createElement(o.Box,{"data-testid":"remove-button",as:o.Icon,name:"close_circle",onClick:t,cursor:"pointer",width:3,height:3,color:"textLite"})},u=(0,r.forwardRef)(((e,t)=>{let{removeFilter:n,group:l,id:a,value:i,isAnchorDisabled:c,onClick:u}=e;const[m,f]=i.split("|"),g=f?`${m} > ${f}`:m;return r.createElement(o.Flex,{ref:t,"data-testid":`selected-node-item-${a}`},r.createElement(o.Pill,{flavour:"neutral",hollow:!0},r.createElement(o.Flex,{position:"relative",gap:2,alignItems:"center"},u?r.createElement(s.A,{Component:o.TextSmall,disabled:c,onClick:u,cursor:"pointer",color:"text",hoverColor:"primary",visitedColor:"accent",disabledColor:"textLite"},g):r.createElement(o.TextSmall,null,g),r.createElement(d,{onRemove:()=>n({param:l,removedValue:a}),id:a}))))})),m=(0,r.memo)(u),f={selectedNodeIds:"Node",nodeStatuses:"Status",nodeLabels:"Host label",nodeCapabilities:"Capability",nodeVersions:"Version"},g=e=>{let{group:t,subGroup:n,groupLabel:l,values:a,filtersByLabel:i={},hasUnion:c,union:s="AND",removeFilter:d,Component:u=m}=e;const p=l||f[t];if(!a?.length)return null;const h="nodeLabels"!=t||n?{}:i,v=Object.entries(h);return v.length?v.map(((e,n)=>{let[o,l]=e;return r.createElement(g,{key:n,group:t,subGroup:o,groupLabel:`${f[t]} ${o}`,values:l,hasUnion:n>0,removeFilter:d})})):r.createElement(r.Fragment,{key:"filter"},c&&r.createElement(o.TextSmall,{strong:!0},s),r.createElement(o.Pill,{flavour:"neutral",hollow:!0,gap:1,TextComponent:o.Flex,textProps:{alignItems:"center",gap:1},flexWrap:!0},r.createElement(o.TextNano,{strong:!0},p,":"),a.map(((e,l)=>r.createElement(r.Fragment,{key:e},l>0&&r.createElement(o.TextSmall,{strong:!0},"OR"),r.createElement(u,{removeFilter:d,id:n?`${n}|${e}`:e,value:e,group:t}))))))},p=(0,r.forwardRef)(((e,t)=>{let{removeFilter:n,value:o}=e;const a=(0,l.xY)(o,"name"),i=(0,l.xY)(o,"isOffline"),c=(0,l.d3)(o);return r.createElement(m,{ref:t,removeFilter:n,group:"selectedNodeIds",id:o,value:a,isAnchorDisabled:i,onClick:c})})),h=(0,r.memo)((e=>{let{flavour:t}=e;const[[n,l=[]],i]=(0,a._e)({extraKey:t,merge:!1});if(!n.length&&!l.length)return r.createElement("div",null);const s=(0,a.Pt)(n);return r.createElement(o.Flex,{width:"100%",overflow:"hidden",padding:[2,0]},r.createElement(c,null,n.map(((e,t)=>{let[n,o]=e;return r.createElement(g,{key:n,group:n,values:o,filtersByLabel:s,hasUnion:t>0,removeFilter:i})})),r.createElement(g,{group:"selectedNodeIds",values:l,hasUnion:!!n.length&&!!l.length,union:"OR",removeFilter:i,Component:p})))}))},55765:(e,t,n)=>{var r=n(38859),o=n(15325),l=n(29905),a=n(19219),i=n(44517),c=n(84247);e.exports=function(e,t,n){var s=-1,d=o,u=e.length,m=!0,f=[],g=f;if(n)m=!1,d=l;else if(u>=200){var p=t?null:i(e);if(p)return c(p);m=!1,d=a,g=new r}else g=t?[]:f;e:for(;++s<u;){var h=e[s],v=t?t(h):h;if(h=n||0!==h?h:0,m&&v===v){for(var x=g.length;x--;)if(g[x]===v)continue e;t&&g.push(v),f.push(h)}else d(g,v,n)||(g!==f&&g.push(v),f.push(h))}return f}},44517:(e,t,n)=>{var r=n(76545),o=n(63950),l=n(84247),a=r&&1/l(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},21283:(e,t,n)=>{var r=n(83120),o=n(69302),l=n(55765),a=n(83693),i=n(68090),c=o((function(e){var t=i(e);return t="function"==typeof t?t:void 0,l(r(e,1,a,!0),void 0,t)}));e.exports=c},17271:e=>{e.exports=function(e,t,n){"use strict";if(e===t)return 1;if(""===t)return 0;var r=0,o=e.toLowerCase(),l=e.length,a=t.toLowerCase(),i=t.length,c=0,s=1;n=n?1-n:0;for(var d=0;d<i;d+=1){var u=o.indexOf(a[d],c);if(-1===u){if(!n)return 0;s+=n}else{var m=0;c===u?m=.7:(m=.1," "===e[u-1]&&(m+=.8)),e[u]===t[d]&&(m+=.1),r+=m,c=u+1}}var f=.5*(r/l+r/i)/s;return a[0]===o[0]&&f<.85&&(f+=.15),f}},24074:(e,t,n)=>{"use strict";var r=n(69565),o=n(28551),l=n(2360),a=n(55966),i=n(56279),c=n(91181),s=n(97751),d=n(53982),u=n(62529),m=s("Promise"),f="AsyncFromSyncIterator",g=c.set,p=c.getterFor(f),h=function(e,t,n){var r=e.done;m.resolve(e.value).then((function(e){t(u(e,r))}),n)},v=function(e){e.type=f,g(this,e)};v.prototype=i(l(d),{next:function(){var e=p(this);return new m((function(t,n){var l=o(r(e.next,e.iterator));h(l,t,n)}))},return:function(){var e=p(this).iterator;return new m((function(t,n){var l=a(e,"return");if(void 0===l)return t(u(void 0,!0));var i=o(r(l,e));h(i,t,n)}))}}),e.exports=v},50133:(e,t,n)=>{"use strict";var r=n(69565),o=n(94901),l=n(28551),a=n(1767),i=n(50851),c=n(55966),s=n(78227),d=n(24074),u=s("asyncIterator");e.exports=function(e){var t,n=l(e),s=!0,m=c(n,u);return o(m)||(m=i(n),s=!1),void 0!==m?t=r(m,n):(t=n,s=!0),l(t),a(s?t:new d(a(t)))}},48646:(e,t,n)=>{"use strict";var r=n(69565),o=n(28551),l=n(1767),a=n(50851);e.exports=function(e,t){t&&"string"===typeof e||o(e);var n=a(e);return l(o(void 0!==n?r(n,e):e))}},32679:(e,t,n)=>{"use strict";var r=n(46518),o=n(69565),l=n(79306),a=n(28551),i=n(20034),c=n(1767),s=n(92059),d=n(62529),u=n(50133),m=n(20772),f=n(96395),g=s((function(e){var t=this,n=t.iterator,r=t.mapper;return new e((function(l,c){var s=function(e){t.done=!0,c(e)},f=function(e){m(n,s,e,s)},g=function(){try{e.resolve(a(o(t.next,n))).then((function(n){try{if(a(n).done)t.done=!0,l(d(void 0,!0));else{var o=n.value;try{var c=r(o,t.counter++),m=function(e){try{t.inner=u(e),p()}catch(n){f(n)}};i(c)?e.resolve(c).then(m,f):m(c)}catch(g){f(g)}}}catch(h){s(h)}}),s)}catch(c){s(c)}},p=function(){var n=t.inner;if(n)try{e.resolve(a(o(n.next,n.iterator))).then((function(e){try{a(e).done?(t.inner=null,g()):l(d(e.value,!1))}catch(n){f(n)}}),f)}catch(r){f(r)}else g()};p()}))}));r({target:"AsyncIterator",proto:!0,real:!0,forced:f},{flatMap:function(e){return a(this),l(e),new g(c(this),{mapper:e,inner:null})}})},30670:(e,t,n)=>{"use strict";var r=n(46518),o=n(69565),l=n(79306),a=n(28551),i=n(1767),c=n(48646),s=n(19462),d=n(9539),u=n(96395),m=s((function(){for(var e,t,n=this.iterator,r=this.mapper;;){if(t=this.inner)try{if(!(e=a(o(t.next,t.iterator))).done)return e.value;this.inner=null}catch(l){d(n,"throw",l)}if(e=a(o(this.next,n)),this.done=!!e.done)return;try{this.inner=c(r(e.value,this.counter++),!1)}catch(l){d(n,"throw",l)}}}));r({target:"Iterator",proto:!0,real:!0,forced:u},{flatMap:function(e){return a(this),l(e),new m(i(this),{mapper:e,inner:null})}})}}]);