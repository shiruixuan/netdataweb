!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f4b6cbac-a557-4936-9c01-c896a5d9ee9f",e._sentryDebugIdIdentifier="sentry-dbid-f4b6cbac-a557-4936-9c01-c896a5d9ee9f")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[1391],{41391:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(96540),l=a(47767),o=a(65336),n=a(83084),i=a(63314),s=(a(9920),a(41393),a(98992),a(3949),a(81454),a(8711)),d=a(60023),c=a(24266),m=a(54621),p=a(3914),u=a(69765),h=a(66118),g=a(44731),b=a(21290);h.t1.register(h.kc,h.PP,h.E8,h.FN,h.No,h.s$,h.m_,h.ZT,h.A6),h.m_.positioners.follow=function(e,t){return!e?.length||t.y>360?(this._resolveAnimations().update(this,{opacity:0}),!1):(0===this.opacity&&this._resolveAnimations().update(this,{opacity:1}),{x:t.x,y:t.y})};const y=e=>{let{data:t}=e;const a=(0,r.useContext)(s.ThemeContext),{localeDateString:l}=(0,b.$j)(),n=(0,r.useMemo)((()=>({labels:t.datasets[0].data.map((e=>e.timestamp)),datasets:t.datasets.map((e=>{const a={label:e.label,borderColor:e.color||"rgba(75, 192, 192, 1)",backgroundColor:e.color||"rgba(75, 192, 192, 0.2)"};return"pie"===t.chartType?{...a,data:e.data}:"bubble"===t.chartType?{...a,data:e.data.map((e=>({x:e.x,y:e.y,r:e.r})))}:{...a,data:e.data.map((e=>e.value)),fill:"area"===t.chartType,tension:.1}}))})),[t]),i=(0,r.useMemo)((()=>({interaction:{axis:"x"},plugins:{legend:{position:"bottom",align:"start",onClick:(e,t,a)=>{const r=a.legendItems.findIndex((e=>e.text===t.text));a.chart.isDatasetVisible(r)?a.chart.hide(r):a.chart.show(r)},labels:{generateLabels:e=>n.datasets.map(((t,a)=>({fontColor:t.color,text:t.label,fillStyle:t.backgroundColor,strokeStyle:t.borderColor,pointStyle:"Daily count"===t.label?"rect":"line",hidden:!e.isDatasetVisible(a),order:t.order}))).sort(((e,t)=>e.order-t.order)),usePointStyle:!0}},tooltip:{enabled:!0,mode:"nearest",intersect:!1,yAlign:"bottom",usePointStyle:!0,position:"follow",backgroundColor:(0,o.getColor)("tooltip")({theme:a}),color:(0,o.getColor)("tooltipText")({theme:a}),callbacks:{title:e=>{const[t]=e;return t?l(1e3*t.label,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}):""},labelPointStyle:e=>({pointStyle:"Total Nodes"===e.dataset.label?"rect":"line"}),label:e=>{let a=e.dataset.label||"";a&&(a+=": "),"bubble"===t.chartType?a+=`(${e.raw.x}, ${e.raw.y}, ${e.raw.r})`:a+=e.formattedValue;const r=t.datasets[e.datasetIndex];return r.unit&&(a+=` ${r.unit}`),a}}}},responsive:!0,maintainAspectRatio:!0,scales:"pie"===t.chartType?void 0:{x:{ticks:{callback:function(e){const t=this.getLabelForValue(e);return t?l(1e3*t,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}):""},color:(0,o.getColor)("textLite")({theme:a})}},y:{beginAtZero:!0,ticks:{color:(0,o.getColor)("textLite")({theme:a})}}}})),[a,n]);return r.createElement(r.Fragment,null,r.createElement(o.H4,null,t.title),r.createElement(g.t1,{type:"area"===t.chartType||"heatmap"===t.chartType?"line":t.chartType,data:n,options:i}))},f=e=>{let{data:t}=e;return r.createElement("div",null,r.createElement("h3",null,t.title),r.createElement("table",{className:"response-table"},r.createElement("thead",null,r.createElement("tr",null,t.columns.map(((e,t)=>r.createElement("th",{key:t},e))))),r.createElement("tbody",null,t.rows.map(((e,t)=>r.createElement("tr",{key:t},e.map(((e,t)=>r.createElement("td",{key:t},e)))))))))};var E=a(11396);const w=(0,s.default)(o.Box).withConfig({displayName:"report__Grid",componentId:"sc-n2yiz7-0"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:8px;width:100%;"]),x=(0,s.default)(o.Box).withConfig({displayName:"report__SkeletonBox",componentId:"sc-n2yiz7-1"})(["animation:"," 1.5s ease-in infinite;"],(0,s.css)(["",""],(e=>(0,s.keyframes)(["from{background:",";}to{background:",";}"],(0,o.getRgbColor)("borderSecondary",.5)(e),(0,o.getRgbColor)("borderSecondary",1)(e))))),v=()=>r.createElement(w,{height:"100%"},[1,3,2].map((e=>r.createElement(o.Flex,{key:e,column:!0,round:!0,border:!0,gap:3,padding:[2,4],height:100,overflow:"hidden",width:"100%"},r.createElement(o.H3,null,r.createElement(x,{round:!0,height:5,width:"250px"})),r.createElement(o.Flex,{column:!0,gap:1,overflow:"auto"},r.createElement(x,{round:!0,height:10*(e-(3-e)),width:"250px"}),r.createElement(x,{round:!0,height:10*e,width:"250px"}),r.createElement(x,{round:!0,height:10*(e-(4-e)),width:"250px"})))))),I=e=>{let{id:t}=e;const a=(0,p.vt)(),l=(0,u.ID)(),n=(0,E.ef)(a,l,t);(0,m.ZB)({title:`Report ${n.date||""}`,id:t,destination:t,type:"insights"});const i=[];let s=null;n.data.blocks.forEach((e=>{"HEADER"===e.type?(s&&i.push(s),s={header:e.data,items:[]}):(s||(s={header:"Error",items:[]}),s.items.push(e))})),s&&i.push(s);return r.createElement(w,{height:"100%"},i.map(((e,t)=>r.createElement(o.Flex,{key:t,column:!0,round:!0,border:!0,gap:3,padding:[2,4],height:{max:200},overflow:"hidden",width:"100%"},r.createElement(c.Ay,{fallback:c.H4},r.createElement(o.H3,null,e.header),r.createElement(o.Flex,{column:!0,gap:1,overflow:"auto"},e.items.map(((e,t)=>((e,t)=>{switch(e.type){case"TEXT":return r.createElement(o.Text,{key:t,dangerouslySetInnerHTML:{__html:(0,d.xI)(e.data)}});case"CHART":return r.createElement(y,{key:t,data:e.data});case"TABLE":return r.createElement(f,{key:t,data:e.data});default:return null}})(e,t)))))))))},k=()=>{const{reportId:e}=(0,l.g)();return r.createElement(i.Ay,{feature:"Inisghts"},r.createElement(n.A,{gap:4,padding:[4],overflow:"auto"},r.createElement(o.Flex,{gap:4},r.createElement(r.Suspense,{fallback:r.createElement(v,null)},r.createElement(I,{id:e})))))}},11396:(e,t,a)=>{a.d(t,{bg:()=>n,ef:()=>c,qz:()=>p,rY:()=>s});var r=a(47444),l=a(31629);const o=(0,r.K0)({key:"insightsTemplates",get:e=>{let{spaceId:t,roomId:a}=e;return()=>l.A.get(`/api/v1/spaces/${t}/rooms/${a}/insights/templates`,{}).then((e=>{let{data:t}=e;return t}))}}),n=(e,t)=>(0,r.vc)(o({spaceId:e,roomId:t})),i=(0,r.K0)({key:"insightsReports",get:e=>{let{spaceId:t,roomId:a}=e;return()=>l.A.get(`/api/v1/spaces/${t}/rooms/${a}/insights/reports`).then((e=>{let{data:t}=e;return t.reports.sort(((e,t)=>new Date(t.date)-new Date(e.date)))}))}}),s=(e,t)=>(0,r.vc)(i({spaceId:e,roomId:t})),d=(0,r.K0)({key:"insightsReport",get:e=>{let{spaceId:t,roomId:a,id:r}=e;return()=>new Promise((e=>{setTimeout((()=>{e()}),1e3)})).then((()=>l.A.get(`/api/v1/spaces/${t}/rooms/${a}/insights/reports/${r}`))).then((e=>{let{data:t}=e;return t}))}}),c=(e,t,a)=>(0,r.vc)(d({spaceId:e,roomId:t,id:a})),m=(0,r.K0)({key:"insightsVariableValues",get:e=>{let{spaceId:t,roomId:a,templateId:r,variableId:o,variables:n}=e;return()=>l.A.post(`/api/v1/spaces/${t}/rooms/${a}/insights/templates/${r}/variables/${o}/values`,{variables:n},{}).then((e=>{let{data:t}=e;return t.values}))}}),p=(e,t,a,l,o)=>(0,r.vc)(m({spaceId:e,roomId:t,templateId:a,variableId:l,variables:o}))}}]);