!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b6934b3f-4d71-4ac4-912e-cb41d9023f41",e._sentryDebugIdIdentifier="sentry-dbid-b6934b3f-4d71-4ac4-912e-cb41d9023f41")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[7471],{51821:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,e:()=>l});var a=n(96540),r=n(47444),o=n(21396);const s=(0,r.eU)({key:"agentDataTrackStatus",default:""}),i=window.localNetdataRegistry.mg,c=window.envSettings.agentApiUrl,l=()=>(0,r.vc)(s),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;const n=(0,r.lZ)(s);(0,a.useEffect)((()=>{if(!e)return;const a=o.enc.Hex.parse("fd90fa3e33a504c10a444f910444650772e77e81b00c7523643462f298fd14c0"),r=o.lib.WordArray.random(16),s=JSON.stringify({machine_guid:e,url:t}),i=o.AES.encrypt(s,a,{iv:r}).ciphertext,c=o.enc.Hex.stringify(r)+o.enc.Hex.stringify(i),l=o.HmacSHA256(o.enc.Hex.parse(c),a).toString();fetch(`https://frankfurt.netdata.rocks/privacy?data=${encodeURIComponent(c+l)}`).then((e=>e.json())).then((e=>n(e.status))).catch((e=>console.error("Error:",e)))}),[e])}},86147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var a=n(96540),r=n(39225),o=n(64251),s=n(22332),i=n(80925),c=n(24266),l=n(22292),d=n(20378),u=n(78459),g=n(15255),m=n(87337),f=n(28738),y=n(38819),w=n(71835);const I={ErrInvalidRedirectURI:"Invalid redirect URI",ErrUntrustedRedirectURI:"Untrusted redirect URI",ErrSpaceMemberAlreadyExists:"Space member already exists",ErrInvalidSpaceID:"Invalid space ID",ErrInvalidInvitationToken:"Invalid invitation token",ErrInvitationNotFound:"Invitation not found",ErrInvitationEmailMismatch:"Invitation email mismatch",ErrInvitationExpired:"Invitation expired",ErrUnauthenticated:"Unauthenticated",ErrInternalServerError:"Internal server error"},h=()=>{const[,e]=(0,w.A)();(0,a.useEffect)((()=>{const{error_msg_key:t,error_message:n}=(0,y.PP)();var a,r;n&&e({message:decodeURIComponent((a=t,r=n,I[a]||r||"An unexpected error occurred"))})}),[])};var p=n(29848);const v=(0,r.A)((()=>n.e(146).then(n.bind(n,20146))),"Referrals"),k=(0,r.A)((()=>Promise.all([n.e(9334),n.e(6071),n.e(3670),n.e(8203)]).then(n.bind(n,38203))),"Layout"),S=(0,s.withChartProvider)((()=>{const e=(0,l.uW)("isLoaded"),t=(0,l.uW)("email"),n=(0,l.NJ)(),r=(0,l.uW)("isAnonymous"),s=(0,p.c0)(),i=(0,u.OS)();return(0,a.useEffect)((()=>{r||i()}),[r]),(0,a.useEffect)((()=>{if(n&&t)try{o.gV({id:n,email:t})}catch(e){console.warn("Sentry: unable to set user")}}),[t,n]),(0,m.xN)(),(0,u.Ay)(),(0,d.Ay)(),(0,g.Ay)(),h(),a.createElement(a.Suspense,{fallback:a.createElement(f.A,null)},a.createElement(v,null),a.createElement(k,{key:s,isUserLoaded:e}))})),b=(0,c.Xc)((()=>{const e=(0,i.eg)().getRoot();return a.createElement(S,{chart:e})}))},3714:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var a=n(31629),r=n(80158);const o=e=>(window.localNetdataRegistry.mg=e.agent.mg,window.localNetdataRegistry.hostname=(0,r.Yv)(e.agent.nm||"agent"),{cloudStatus:e.cloud.status,canBeClaimed:e.can_be_claimed,keyFilename:e.key_filename,claimId:e.cloud.claim_id,mg:e.agent.mg,nd:e.agent.nd,success:e.success,message:e.message,cmd:e.cmd,help:e.help}),s=function(){let{key:e,token:t,rooms:n,url:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new URLSearchParams({key:e,rooms:n,token:t,url:r}).toString();return s=e&&n&&t&&r&&s?`?${s}`:"",a.A.get(`/api/v3/claim${s}`,{baseURL:window.envSettings.agentApiUrl,transform:o})}},15255:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,OS:()=>u,RJ:()=>g});var a=n(96540),r=n(47444),o=n(69765),s=n(22292),i=n(79731),c=n(3714);const l=(0,r.Iz)({key:"claimStatusAtom",default:{loaded:!1,loading:!1,cloudStatus:"disabled",canBeClaimed:!1,claimId:null,keyFilename:"",error:"",claiming:!1,claimingError:""}}),d=(0,r.Iz)({key:"checkClaimStatus",default:()=>1}),u=()=>{const e=window.localNetdataRegistry.mg,t=(0,r.lZ)(d(e));return(0,a.useCallback)((()=>t((e=>e+1))),[e])},g=()=>{const e=window.localNetdataRegistry.mg,[t,n]=(0,r.L4)(l({machineGuid:e}));return[t,(0,a.useCallback)((e=>n((t=>({...t,...e})),[])))]},m=()=>{const e=(0,o.GJ)(),t=window.localNetdataRegistry.mg,[n,l]=(0,r.L4)(d(t)),[u,m]=g(t),{loading:f}=u,y=(0,s.uW)("isAnonymous");return(0,a.useEffect)((()=>{!f&&t&&e&&(m({loading:!0,nodeId:null,spaceId:null,roomIds:[]}),(0,c.j)().then((e=>{let{data:t}=e;m({loading:!1,loaded:!0,...t,error:""})})).catch((e=>{const t=e?.response?.data;m({loading:!1,loaded:!0,error:(0,i.o)(t?.errorMsgKey)||t?.errorMessage||"Something went wrong",cloudStatus:"disabled",canBeClaimed:!1,keyFilename:""})})))}),[t,n,e,y]),{...u,checkAgain:l}}},78459:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,OS:()=>w,f7:()=>I});var a=n(96540),r=n(47444),o=n(92138),s=n(69765),i=n(22292),c=n(79731),l=n(15255),d=n(9224),u=n(51821),g=n(59552);const m=window.localNetdataRegistry.mg,f=(0,r.Iz)({key:"currentAgentBearerAtom",default:{loading:!1,token:localStorage.getItem(`agentJWT:${m}`)||"",expiration:localStorage.getItem(`agentJWTExp:${m}`)||null,bearerProtection:!0,error:""}}),y=(0,r.Iz)({key:"checkAgentBearer",default:()=>1}),w=()=>{const[{mg:e}]=(0,l.RJ)(),t=(0,r.lZ)(y(e));return(0,a.useCallback)((()=>{localStorage.removeItem(`agentJWT:${e}`),localStorage.removeItem(`agentJWTExp:${e}`),t((e=>e+1))}),[e])},I=()=>{const[{claimId:e,mg:t,nd:n}]=(0,l.RJ)();return(0,r.L4)(f({nodeId:n,machineGuid:t,claimId:e}))},h=()=>{const e=(0,s.GJ)(),[{claimId:t,mg:n,nd:m}]=(0,l.RJ)(),f=w(),[h,p]=(0,r.L4)(y(n)),[{loading:v,token:k,expiration:S,bearerProtection:b,error:A},E]=I(),N=(0,o.A)(h),R=(0,i.uW)("isAnonymous");return(0,a.useEffect)((()=>{"function"==typeof f&&(0,g.x)(f)}),[f]),(0,a.useEffect)((()=>{!v&&n&&e&&!R&&t&&m&&(localStorage.getItem(`agentJWT:${n}`)||h===N&&S&&1e3*S>(new Date).getTime()+3600||(E((e=>({...e,loading:!0}))),(0,d.q5)(m,n,t).then((e=>{let{data:t}=e;localStorage.setItem(`agentJWT:${n}`,t?.token),localStorage.setItem(`agentJWTExp:${n}`,t?.expiration),E({loading:!1,...t,error:""})})).catch((e=>{const t=e?.response?.data;localStorage.removeItem(`agentJWT:${n}`),localStorage.removeItem(`agentJWTExp:${n}`),E({loading:!1,token:"",expiration:null,bearerProtection:!0,error:(0,c.o)(t?.errorMsgKey)||t?.errorMessage||"Something went wrong"})}))))}),[n,m,S,h,e,R,N]),(0,u.A)(n),{token:k,bearerProtection:b,checkAgain:p,error:A}}},20378:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,OS:()=>u,Q8:()=>g});n(3064),n(98992),n(72577);var a=n(96540),r=n(47444),o=n(69765),s=n(22292),i=n(79731),c=n(9224);const l=(0,r.Iz)({key:"userAccessAtom",default:{loaded:!1,loading:!1,userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[],error:""}}),d=(0,r.Iz)({key:"checkUserAccess",default:()=>1}),u=()=>{const e=window.localNetdataRegistry.mg,t=(0,r.lZ)(d(e));return(0,a.useCallback)((()=>t((e=>e+1))),[e])},g=e=>{const t=e||window.localNetdataRegistry.mg;return(0,r.L4)(l({mg:t}))},m=()=>{const e=(0,o.GJ)(),t=window.localNetdataRegistry.mg,[n,l]=(0,r.L4)(d(t)),[u,m]=g(t),{loading:f}=u,y=(0,s.uW)("isAnonymous");return(0,a.useEffect)((()=>{!f&&t&&e&&!y&&(m((e=>({loading:!0,nodeId:null,spaceId:null,roomIds:[],...e}))),(0,c.az)(t,window.localNetdataRegistry.nd).then((e=>{let{data:t}=e;const n=t.rooms.find((e=>e.untouchable));window.localNetdataRegistry.spaceId=t.spaceId,window.localNetdataRegistry.roomId=n?n.id:t.roomIds[0],window.localNetdataRegistry.limitations={limit:99999999,windowsSupport:!0,...t?.limitations},m({loading:!1,loaded:!0,...t,error:""})})).catch((e=>{const t=e?.response?.data;m({loading:!1,loaded:!0,error:(0,i.o)(t?.errorMsgKey)||t?.errorMessage||"Something went wrong",userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[]})})))}),[t,n,e,y,f]),{...u,checkAgain:l}}},87337:(e,t,n)=>{"use strict";n.d(t,{xN:()=>y,vS:()=>g,YN:()=>w,KF:()=>f,iw:()=>u,rE:()=>m});n(17333),n(3064),n(41393),n(14905),n(98992),n(54520),n(72577),n(81454),n(8872),n(25509),n(65223),n(60321),n(41927),n(11632),n(64377),n(66771),n(12516),n(68931),n(52514),n(35694),n(52774),n(49536),n(21926),n(94483),n(16215);var a=n(96540),r=n(47444),o=n(47767),s=n(22292);const i=(0,r.Iz)({key:"visitedNodes",default:()=>[]});var c=n(47762),l=n(9224);const d=(0,r.K0)({key:"visitedNodeIdsValue",get:e=>t=>{let{get:n}=t;return n(i(e)).map((e=>{let{id:t}=e;return t}))}}),u=()=>{const e=(0,s.NJ)(),t=(0,r.vc)(i(e)),n=(0,r.Zs)((e=>{let{set:t}=e;return e=>{t(c.gl,{values:e.reduce(((e,t)=>({...e,[t.id]:{...t,loaded:!0}})),{}),merge:!0})}}),[]);return(0,a.useEffect)((()=>{n(t)}),[t]),(0,r.vc)(d(e))},g=e=>{const t=(0,s.NJ)(),n=(0,r.vc)(i(t)),o=(0,a.useMemo)((()=>e?n.filter((t=>t.name.toUpperCase().includes(e.toUpperCase()))):n),[n,e]);return(0,a.useMemo)((()=>o.map((e=>e.id))),[o])},m=()=>(0,r.Zs)((e=>{let{snapshot:t,set:n}=e;return async(e,a)=>{const r=await t.getPromise((0,s.Dm)("id")),{urls:o,name:d}=await t.getPromise((0,c.GN)({id:e})),u=o.filter((e=>e!==a));n((0,c.GN)({id:e,key:"urls"}),u),u.length||n(i(r),(t=>t.filter((t=>t.id!==e))));try{await(u.length?(0,l.Bz)(r,e,d,u):(0,l.sm)(r,[e])),(0,l.UL)(r,e).catch((()=>{}))}catch(g){n((0,c.GN)({id:e,key:"urls"}),o)}}}),[]),f=()=>{const{pathname:e}=(0,o.zy)(),t=(0,s.NJ)(),n=y({autoFetch:!1});return(0,r.Zs)((e=>{let{snapshot:t,set:a}=e;return async(e,r,o)=>{if(await t.getPromise((0,s.Dm)("isAnonymous")))return;const d=await t.getPromise((0,s.Dm)("id")),{urls:u,name:g}=await t.getPromise((0,c.GN)({id:e}));let m=r?[r,...u]:u;m=[...new Set([window.location.href,...m])];const f=m.length!==u.length;try{a((0,c.GN)({id:e,key:"urls"}),m),a(i(d),(t=>{const n=t.find((t=>t.id===e)),a=t.filter((t=>t.id!==e));return n?[{...n,accessCount:n.accessCount+1,lastAccessTime:(new Date).toISOString()},...a]:[{accessCount:1,id:e,lastAccessTime:(new Date).toISOString(),urls:m,name:o},...a]})),f&&await(0,l.Bz)(d,e,o||g,m),n(),await(0,l.UL)(d,e)}catch(y){a((0,c.GN)({id:e,key:"urls"}),u)}}}),[n,e,t])},y=function(){let{autoFetch:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,isAnonymous:n}=(0,s.uW)(),[,o]=(0,r.L4)(i(t)),[c,d]=(0,a.useState)(0),u=(0,a.useCallback)((()=>{d((e=>e+1))}),[d]);return(0,a.useEffect)((()=>{if(t&&(e||c))if(n){const e=(window.visitedNodes||[]).sort(((e,t)=>new Date(t.lastAccessTime)-new Date(e.lastAccessTime)));o(e)}else(0,l.uQ)(t).then((e=>{if(!e)return;const{data:{results:t}}=e,n=t.sort(((e,t)=>new Date(t.lastAccessTime)-new Date(e.lastAccessTime)));o(n)}))}),[e,c,t,n]),u},w=()=>{const e=(0,s.NJ)(),t=i(e);return(0,r.Zs)((e=>{let{snapshot:n,set:a}=e;return async e=>{const r=(await n.getPromise((0,c.th)(e))).map((e=>e.machineGUID)),o=await n.getPromise(t),s=o.filter((e=>!r.includes(e.id)));s.length!==o.length&&a(t,s)}}),[e])}},50477:()=>{}}]);