!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d916d152-b08a-48ff-a7fd-266f594e3514",e._sentryDebugIdIdentifier="sentry-dbid-d916d152-b08a-48ff-a7fd-266f594e3514")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[7332],{47332:(e,t,a)=>{a.r(t),a.d(t,{Dropdown:()=>j,default:()=>R});var d=a(96540),r=a(8711),o=a(65336),n=a(43375),s=a(61360);var i=a(74618),l=a(15327),c=a(35304),u=a(21591),p=a(68980),b=a(28738),m=a(38257);const g=e=>(0,r.keyframes)(["from{border-color:",";border-width:2px;}to{border-color:",";border-width:1px;}"],(0,o.getColor)("primary")(e),(0,o.getColor)("textLite")(e)),h=(0,r.default)(o.Flex).withConfig({displayName:"dropArea__AnimatedFlex",componentId:"sc-vs4sjk-0"})(["animation:",";"],(e=>{let{animate:t}=e;return t?(0,r.css)([""," 0.15s linear infinite"],g):""})),f={},w=(0,d.memo)((e=>{let{item:t=f,itemProps:a=f}=e;const{id:r,name:s,isNew:i}=t,{overDashboardId:l}=a,{setNodeRef:c,isOver:u,over:b}=(0,n.zM)({id:r,data:{droppable:!0,dropArea:!0,dashboardId:r,onlyPointerWithin:!0}}),{processing:m,loading:g}=(0,p.fz)(r),w=m||g;return d.createElement(o.Flex,{padding:[2],flex:!0,background:l===r&&"successSemi"},d.createElement(h,{alignItems:"center",justifyContent:"center",padding:[2],border:{side:"all",type:"dashed",color:u?"primary":"textLite"},round:!0,ref:c,width:"100%",height:15,animate:b?.id===r&&l!==r},w?d.createElement(o.Text,{color:"textLite"},"Loading..."):d.createElement(o.TextBig,{color:l===r?"successText":"text"},i?"":d.createElement(d.Fragment,null,"Add in "),d.createElement(o.TextBig,{strong:!0,color:i?"primary":l===r?"successText":"text"},s))))})),x=((0,r.default)(o.Drop).attrs({align:{top:"bottom",left:"left"},animation:!0,backdrop:!0,column:!0,padding:[2,0],background:"dropdown",round:1,overflow:{vertical:"auto"},margin:[.5,0,0],width:30}).withConfig({displayName:"list__Dropdown",componentId:"sc-s8yppy-0"})([""]),(0,d.memo)((e=>{let{dashboards:t,selected:a,setSelected:r,itemProps:n}=e;const s=(0,m.A)();return d.createElement(d.Fragment,null,d.createElement(w,{item:{id:"new",name:"Create a new dashboard",isNew:!0},itemProps:n}),d.createElement(o.MenuDropdown,{items:t,Item:w,value:a,hasSearch:!1,onItemClick:r,hideShadow:!0,itemProps:n,overflow:"hidden",ref:s}))})));var D=a(86008),y=a(3914),I=a(69765),v=a(91517),E=a(47767),A=a(80925),C=a(71835),S=a(79731),k=a(50876),_=a(2025),F=a(67544),L=a(4659),N=a(18202),M=a(54621);const P=e=>{let{onDone:t}=e;const a=(0,E.Zp)(),r=(0,y.vt)(),o=(0,I.ID)(),n=(0,y.ns)(r,"slug"),s=(0,I.wz)(o,"slug"),i=(0,A.eg)(),[l,c]=(0,C.A)(),{sendLog:u}=(0,k.A)(),p=(0,M.tV)(),b=(0,_.DH)(null,{onSuccess:e=>{p({title:e.slug,id:e.id,destination:e.slug,type:"dashboards",droppable:!0,droppableProps:{dashboardId:e.id,dropArea:!0}}),l({header:"Added",text:d.createElement(d.Fragment,null,"Chart added in"," ",d.createElement(L.A,{as:"a",strong:!0,onClick:()=>a(`/spaces/${n}/rooms/${s}/dashboards/${e.slug}`)},e.name)," ","dashboard.")}),setTimeout((()=>t()),2e3),u({feature:"drag-in-dashboard",isSuccess:!0})},onFail:e=>{const a=e?.response?.data,d=(0,S.o)(a?.errorMsgKey)||a?.errorMessage||"Something went wrong";c({message:d}),t(),u({feature:"drag-in-dashboard",isFailure:!0,message:d})}}),m=(0,F.nM)(),g=(0,F.Dn)(r,o);return(0,d.useCallback)(((e,t)=>{const a=i.getNode({id:t?.itemId}),d=(0,N.h)(a.getAttributes());"new"!==e?m(d.contextScope,{...d,dashboardId:e,itemLayout:t},(()=>b(e))):g({name:"[Untitled]"},(e=>{m(d.contextScope,{...d,dashboardId:e.id,itemLayout:t},(()=>b(e.id)))}))}),[g,m])},T=(0,r.default)(o.Flex).attrs({background:"mainBackground",padding:[2],overflow:"auto",height:"80%",width:"600px"}).withConfig({displayName:"dropDashboard__ScaledDownContainer",componentId:"sc-zd7fpn-0"})(["box-shadow:0 0 0 1px rgba(63,63,68,0.05),-1px 0 15px 0 rgba(34,33,81,0.01),0px 15px 15px 0 rgba(34,33,81,0.25);"]),z=e=>{let{id:t,setOverDashboard:a}=e;const r=(0,y.vt)(),n=(0,I.ID)(),s=(0,y.ns)(r,"slug"),i=(0,I.wz)(n,"slug"),l=(0,v.A)(t,{spaceId:r,spaceSlug:s,roomId:n,roomSlug:i}),c=P({onDone:a});return t?d.createElement(o.Flex,{flex:!0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},d.createElement(T,null,l?d.createElement(b.A,{title:"Loading dashboard..."}):d.createElement(D.A,{id:t,containerWidth:600,trashable:!1,containerDndProps:{droppable:!0},onDragEnd:(e,d)=>{if(!d)return a();c(t,d)}}))):null},j=(0,r.default)(o.Flex).attrs({column:!0,background:"dropdown",width:{max:"auto",min:100,base:100}}).withConfig({displayName:"dropInDashboard__Dropdown",componentId:"sc-12fd9r3-0"})(["box-shadow:0 0 0 1px rgba(63,63,68,0.05),-1px 0 15px 0 rgba(34,33,81,0.01),0px 15px 15px 0 rgba(34,33,81,0.25);"]),R=()=>{const[e,t]=(0,d.useState)(),[a,r]=(0,d.useState)();(0,c.A)();const m=(0,u.q)();let g=(0,p.Sf)(m);g=(0,d.useMemo)((()=>[...g].sort(((e,t)=>new Date(e.updatedAt)<new Date(t.updatedAt)?1:-1))),[m]);const h=(0,u.RQ)(),f=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const[r,o]=(0,d.useState)();return(0,s.A)((()=>o(e)),t,[e,...a]),r}(a?.id,500),w=P({onDone:r});(0,n.E5)({onDragMove:e=>{let{active:t,over:a}=e;if(a?.id&&t)if(a.data.current.dropinDashboards&&t.data.current.dashboardable)r((e=>e||{active:t,dropinDashboards:!0}));else if(a.data.current.dashboardId&&t.data.current.dashboardable){if("new"===a.data.current.dashboardId)return;r((e=>e&&e?.id===a.data.current.dashboardId?e:{...e,id:a.data.current.dashboardId,active:t}))}},onDragEnd:e=>{let{active:t,over:a}=e;a?.id&&t&&(a.data.current.dashboardId&&t.data.current.dashboardable?w(a.data.current.dashboardId,t.data.current):setTimeout((()=>r()),1e3))},onDragCancel:()=>{r()}});const D=(0,d.useMemo)((()=>({overDashboardId:f})),[f]);if(!a?.active)return null;const{isItem:y,isContainer:I,dashboardable:v}=a.active.data.current;return v&&(y||I)?d.createElement(o.Layer,{position:"right",full:!0,backdrop:!0,shadow:!0,justifyContent:"end"},d.createElement(z,{id:f,setOverDashboard:r}),a?.dropinDashboards&&d.createElement(j,null,d.createElement(i.z,{title:"Drop in a dashboard",onClose:()=>r()}),d.createElement(l.Yv,{gap:2,height:"100%",overflow:"hidden",background:"dropdown"},h?d.createElement(x,{dashboards:g,selected:e,setSelected:t,itemProps:D}):d.createElement(b.A,{title:"Loading dashboards..."})))):null}}}]);