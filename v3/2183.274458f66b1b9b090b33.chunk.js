!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="031d23da-d3a4-4cd5-9134-e2ad773d241f",e._sentryDebugIdIdentifier="sentry-dbid-031d23da-d3a4-4cd5-9134-e2ad773d241f")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[2183],{26751:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(58168),r=n(96540),l=n(65336);const o=e=>{let{message:t,title:n,footer:o,...i}=e;const s=i?.["data-testid"]||"functionError";return r.createElement(l.Flex,(0,a.A)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},i),r.createElement(l.H3,{"data-testid":`${s}-title`},n),r.createElement(l.TextBig,{color:"textDescription","data-testid":`${s}-message`},t),o)}},72183:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Qa});var a=n(96540),r=n(83084),l=n(67990),o=n(27467),i=n(50466),s=n(74002),c=n(99739),d=n(28738),u=n(3705),m=n(58168),g=(n(3064),n(98992),n(72577),n(5287)),p=n.n(g),f=n(65336),h=n(47762),y=n(11128),x=n(69765),E=n(20378),b=n(13630),v=n(4659),C=n(26751);const w=e=>{let{paramsKey:t,...n}=e;const r=n?.["data-testid"]||"capableNodesError",l=(0,y.a7)(t),o=(0,h.xY)(l?.[0],"name");return a.createElement(f.Flex,(0,m.A)({alignItems:"center",flex:!0,gap:8,justifyContent:"center"},n,{"data-testid":r}),a.createElement(f.Icon,{"data-testid":`${r}-icon`,height:"230px",name:"unreachableNode",width:"230px"}),a.createElement(C.A,{"data-testid":`${r}-details`,gap:2,title:o?`${o} is not configured for Functions`:"Your nodes are not configured for Functions",message:a.createElement(a.Fragment,null,"Learn how to configure your nodes"," ",a.createElement(v.A,{Component:f.TextBig,"data-ga":"functions-capable-nodes-error::click-docs-link::functions-view","data-testid":`${r}-docsLink`,href:"https://learn.netdata.cloud/docs/nightly/operations/run-time-troubleshooting-with-functions#prerequisites",target:"_blank",rel:"noopener noreferrer"},"to support functions")),width:{max:"fit-content"}}))};var k=n(68741),A=n(40982),I=n(78459),T=(n(41393),n(14905),n(81454),n(8872),n(18121)),F=n(57605),S=n(29217),K=n(87659),$=n(61360),P=n(8711);const z=(0,P.default)(f.Flex).attrs({alignItems:"center",border:{side:"bottom",color:"borderSecondary"},padding:[2]}).withConfig({displayName:"styled__MenuItem",componentId:"sc-1bb2nho-0"})(["&:last-child{border:none;}"]),L=(0,P.default)(f.TextInput).withConfig({displayName:"styled__TextInput",componentId:"sc-1bb2nho-1"})(['margin:0 10px;min-width:unset;width:45px;> div{margin:0;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type="number"]{-moz-appearance:textfield;}']),N=a.createElement(f.Flex,{column:!0,width:{max:"500px"},gap:1},a.createElement(f.TextSmall,null,"Full data queries will always provide all the available facets with counters for your search, which depending on the size of the query could result in poor performance."),a.createElement(f.TextSmall,null,"i.e. Querying logs for multiple days with multitudes of entries."),a.createElement(f.TextSmall,null,"With this toggle \u201coff\u201d (default), queries will slice the data and will lower performance hit on your servers.")),M=e=>{let{onClose:t,targetRef:n,paramsKey:r,...l}=e;const s=l?.["data-testid"]||"config",c=(0,i.Ol)({key:"acceptedParams",...r}).includes("slice"),[d,u]=(0,o.r$)("slice",{defaultValue:!0,flavour:"bool",...r}),[m,g]=(0,K.A)(!d);(0,$.A)((()=>{!!d===!!m&&u(!m)}),200,[d,m]);const p=(0,i.Ol)({key:"updateEvery",...r}),[h,y]=(0,o.r$)("pollingInterval",{...r,flavour:"int",defaultValue:p}),[x,E]=(0,a.useState)(h);return(0,$.A)((()=>{h!==x&&y(x)}),400,[h,x]),n.current?a.createElement(f.Drop,{align:{top:"bottom",right:"right"},animation:!0,background:"dropdown",close:t,column:!0,"data-testid":s,margin:[.5,0,0],onClickOutside:t,onEsc:t,round:1,target:n.current,width:58},c&&a.createElement(z,{"data-testid":`${s}-slice-data`,justifyContent:"between"},a.createElement(f.Flex,{gap:1,alignItems:"center"},a.createElement(f.Text,{color:"textNoFocus","data-testid":`${s}-slice-data-label`},"Full data queries (slow)"),a.createElement(S.A,{plain:!0,content:N,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},a.createElement(f.Icon,{name:"information",color:"textDescription",width:"14px",height:"14px"}))),a.createElement(f.Toggle,{colored:!0,checked:m,"data-ga":"functions-config::auto-slice-data-switch::functions-view::"+(m?"enabled":"disabled"),"data-testid":`${s}-slice-data-switch`,onChange:g})),a.createElement(z,{"data-testid":`${s}-pollingInterval`},a.createElement(f.Text,{color:"textNoFocus","data-testid":`${s}-pollingInterval-label`},"Refresh every"),a.createElement(L,{"data-ga":"functions-config::polling-interval::functions-view","data-testid":`${s}-pollingInterval-input`,min:1,onChange:e=>{let{target:t}=e;const n=+t.value;n>0&&E(n)},size:"tiny",type:"number",value:x}),a.createElement(f.Text,{color:"textNoFocus","data-testid":`${s}-pollingInterval-units`},"seconds"))):null};var O=n(21290);const B=e=>{let{paramsKey:t}=e;const{updatedAt:n}=(0,i.Ol)(t),{localeTimeString:r,localeDateString:l}=(0,O.$j)();return a.createElement(f.TextMicro,{color:"textLite"},"Last updated: ",l(n,{long:!0})," ",r(n,{secs:!0}))};var R=n(51112);const D=P.default.div.withConfig({displayName:"reload__IconsContainer",componentId:"sc-gd414j-0"})(["position:relative;"]),V=(0,P.default)(f.Icon).withConfig({displayName:"reload__SmallIcon",componentId:"sc-gd414j-1"})(["position:absolute;top:3px;left:3px;"]),_=(0,P.keyframes)(["from{transform:rotate(0deg);}to{transform:rotate(359deg);}"]),j=(0,P.default)(f.IconButton).withConfig({displayName:"reload__AnimatedIcon",componentId:"sc-gd414j-2"})(["&& svg{animation:",";}animation:rotation 2s infinite linear;"],(e=>{let{animate:t}=e;return t?(0,P.css)([""," 3s linear infinite"],_):""})),W=e=>{let{onRefresh:t,dataGa:n,testId:r,loading:l}=e;const o=(0,R.gC)(),[i,s]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{if(!l)return void s(!1);const e=setTimeout((()=>s(!0)),500);return()=>{clearTimeout(e)}}),[l]),a.createElement(f.Flex,{alignItems:"center"},a.createElement(D,null,a.createElement(V,{name:o?"playSolid":"pauseSolid",width:"6px",height:"6px",color:o?"primary":"text"}),a.createElement(j,{animate:i,"data-testid":`${r}-refreshNowBtn`,"data-ga":`${n}::click-refresh-now::functions-view`,flavour:"hollow",icon:"refresh",onClick:()=>t({merge:!1}),disabled:o,padding:[1]})))};var q=n(18925),H=n(40933),G=n(44644),U=n(46741),Z=n(3914),Y=n(92155);const X={room:"space_new",space:"spaces_v2",personal:"user"},J=(0,Y.A)(f.Button),Q=e=>{let{onSubmit:t,onClose:n,canAddSpaceSettings:r}=e;const[l,o]=(0,a.useState)(""),[i,s]=(0,a.useState)("personal"),c=(e=>(0,a.useMemo)((()=>[{icon:X.personal,value:"personal",label:"Personal"},{icon:X.room,value:"room",label:"Room",disabled:!e},{icon:X.space,value:"space",label:"Space",disabled:!e}]),[e]))(r);return a.createElement(f.Modal,{onClickOutside:n,onEsc:n},a.createElement(f.ModalContent,{background:"dropdown"},a.createElement(f.ModalHeader,null,"Create a new settings snapshot",a.createElement(f.ModalCloseButton,{testId:"close-button",onClose:n})),a.createElement(f.ModalBody,null,a.createElement(f.Flex,{column:!0,width:80,gap:3},a.createElement(f.TextInput,{"data-testid":"name",label:"Name",onChange:e=>{let{target:t}=e;return o(t.value)},value:l}),a.createElement(f.Flex,{column:!0,gap:1},a.createElement(f.TextSmall,{strong:!0},"Scope"),a.createElement(f.Select,{options:c,value:c.find((e=>e.value===i)),onChange:e=>{let{value:t}=e;return s(t)},styles:{minWidth:"80px"}})))),a.createElement(f.ModalFooter,null,a.createElement(J,{disabled:""===l.trim(),label:"Create",onClick:()=>t({name:l,scope:i}),"data-testid":"btn-create",payload:{description:"Modal - Create Settings"}}))))},ee={color:"textLite",margin:[0,1,0,0],width:"14px",height:"14px"},te=e=>{let{openForm:t,close:n}=e;return a.createElement(f.Flex,{padding:[2,1],border:{side:"top"},justifyContent:"center"},a.createElement(f.Button,{small:!0,icon:"save",onClick:()=>{t(),n()},"data-ga":"user-settings::click-create",title:"Create a new setting with your changes"},"Add new setting"))},ne=()=>({}),ae=e=>{let{id:t,close:n,getValue:r=ne}=e;const l=(0,q.xS)(t,{onSuccess:n});return a.createElement(f.IconButton,{icon:"save",iconColor:"textLite",onClick:e=>{e.stopPropagation(),l({value:r()})},"data-ga":"user-settings::click-update",neutral:!0,padding:[0],title:"Update this setting with your changes"})},re=e=>{let{id:t,close:n}=e;const r=(0,q.z2)(t,{onSuccess:n});return a.createElement(f.IconButton,{icon:"trashcan",iconColor:"textLite",onClick:e=>{e.stopPropagation(),r()},"data-ga":"user-settings::click-delete",neutral:!0,padding:[0],title:"Delete this setting"})},le=e=>{let{item:{value:t,label:n,icon:r,disabled:l,onClick:o,canUpdate:i,...s},value:c,onItemClick:d,index:u,style:g,close:p,itemProps:h={},...y}=e;const{getLocalSettingsValue:x}=h,E=c===t;return a.createElement(f.MenuItemContainer,(0,m.A)({"data-index":u,"aria-selected":E,disabled:l,selected:E,onClick:e=>{o&&o(e),d(t)}},s,y,{style:g,alignItems:"center",justifyContent:"between",padding:[1],overflow:"hidden"}),a.createElement(f.Flex,{alignItems:"center"},r,a.createElement(f.TextSmall,{whiteSpace:"normal",wordBreak:"break-word"},n)),a.createElement(f.Flex,{alignItems:"center",gap:.5},a.createElement(ae,{id:t,close:p,getValue:x,disabled:!i}),a.createElement(re,{id:t,close:p,disabled:!i})))},oe=e=>{let{disabled:t,type:n,types:r,entity:l,entities:o,paths:i,path:s,getLocalSettingsValue:c,...d}=e;r=Array.isArray(r)?r:n?[n]:[],o=Array.isArray(o)?o:l?[l]:[],i=Array.isArray(i)?i:s?[s]:[];const u=(0,H._)({params:{type:r,entity:o,path:i}}),[g,p]=(0,G.WY)({type:n,entity:l,path:s}),h=(0,U.JT)("space:UpdateSettings"),y=((e,t)=>{let{canAddSpaceSettings:n}=t;return(0,a.useMemo)((()=>e.map((e=>({value:e.id,label:e.name,icon:a.createElement(f.Icon,(0,m.A)({name:X[e.scope]||X.personal},ee)),"data-track":`setting-${e.scope}`,canUpdate:"personal"===e.scope||n})))),[e,n])})(u,{canAddSpaceSettings:h}),[x,,E,b]=(0,K.A)(),v=(0,q.yK)({onSuccess:()=>{b(),close()}}),C=(0,Z.dg)();return a.createElement(a.Fragment,null,a.createElement(f.Menu,{value:g,items:y,dropProps:{align:{top:"bottom",right:"right"},"data-toolbox":!0},dropdownProps:{width:"200px"},onChange:p,"data-track":"user-settings",Item:le,itemProps:{getLocalSettingsValue:c},Footer:(0,a.useMemo)((()=>e=>C?a.createElement(f.Flex,{padding:[1]},a.createElement(f.TextSmall,null,"Settings can be saved when the agent is part of a Netdata cloud space.")):a.createElement(te,(0,m.A)({},e,{openForm:E}))),[C])},a.createElement(f.IconButton,(0,m.A)({icon:"settings_h",padding:[0],title:"User settings",disabled:t,"data-testid":"toolbox-addSettings"},d))),x&&a.createElement(Q,{onSubmit:function(){return v({type:n,entity:l,path:s,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},value:c()})},onClose:b,canAddSpaceSettings:h}))},ie=(0,a.memo)(oe),se=(e,t)=>{"undefined"!==typeof e&&t(e)},ce=(0,a.memo)((e=>{let{fn:t,paramsKey:n,dataGa:r,testId:l}=e;const s=(0,G.CS)({type:"function",entity:t,path:"/view"}),[c,d]=(0,o.r$)("colSizing",{defaultValue:{},flavour:"obj",...n}),[u,m]=(0,i.UB)({param:"sortBy",flavour:"arrobj",...n}),[g,p]=(0,i.ZY)({...n,flavour:"arr"}),[f,h]=(0,i.ZY)({param:"query",flavour:"val",...n,defaultValue:""}),[y,x]=(0,i.WH)({key:"columnVisibility",...n}),[E,b]=(0,i.oV)({param:"selectedFacets",extraKey:t||n?.extraKey,flavour:"arr"});return(0,a.useEffect)((()=>{if(!s)return;if(!s.fnFilters)return;const{query:e,...t}=s.fnFilters||{};se(s.columnSizing,d),se(s.fnSortBy,m),se(t,p),se(e,h),se(s.columnVisibility,x),se(s.fnFacets,b)}),[s]),a.createElement(ie,{type:"function",path:"/view",entity:t,padding:[1],"data-testid":`${l}-SettingsBtn`,"data-ga":`${r}::click-config::functions-view`,flavour:"hollow",getLocalSettingsValue:()=>({columnSizing:c,fnSortBy:u,fnFilters:{query:f,...g},columnVisibility:y,fnFacets:E})})})),de={fn:{dataGa:"functions-header",hasConfig:!0,Title:e=>{let{name:t,fn:n}=e;return n?t?`${n} on ${t}`:n:"Top"},titleTooltip:a.createElement(f.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},a.createElement(f.Text,null,"Netdata Functions enable detailed low-level monitoring at the edge. "),a.createElement(v.A,{Component:f.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-functions",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata functions documentation to learn more"),a.createElement(f.Text,null,"."))},logs:{dataGa:"logs-header",hasConfig:!0,Title:e=>{let{name:t,fn:n}=e;return n?t?`${n} logs on ${t}`:`${n} logs`:"Logs"},titleTooltip:a.createElement(f.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},a.createElement(f.Text,null,"Explore system and applications logs. "),a.createElement(v.A,{Component:f.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/logs/systemd-journal",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata logs documentation to learn more"),a.createElement(f.Text,null,"."))},feed:{dataGa:"feed-header",Title:()=>"Events",titleTooltip:a.createElement(f.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},a.createElement(f.Text,null,"Troubleshoot faster with Netdata Events. Access topology and alert events across the room in one convenient location."," "),a.createElement(v.A,{Component:f.Text,"data-ga":"feed-header::click-docs-link::feed-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/events-feed",target:"_blank",rel:"noopener noreferrer"},"Read the Events feed documentation to learn more"),a.createElement(f.Text,null,"."))}},ue=(0,a.memo)((e=>{let{onRefresh:t,onCancel:n,paramsKey:r,...l}=e;const o=l?.["data-testid"]||"functionsHeader",s=(0,a.useRef)(),{dataGa:c,hasConfig:d,titleTooltip:u,Title:m}=de[r.extraKey]||de.fn,[g,p,,x]=(0,K.A)(!1),E=(0,i.Ak)(r),b=(0,y.a7)({...r,extraKey:E||r.extraKey}),v=(0,h.xY)(b?.[0],"name"),{loaded:C,data:w,totalSize:k,actualSize:A,loading:I,loadingMore:T,aggregatedView:F}=(0,i.Ol)(r),$=(0,i.rc)(r);return a.createElement(f.Flex,{"data-testid":o,justifyContent:"between"},a.createElement(f.Flex,{column:!0},a.createElement(f.Flex,{alignItems:"start","data-testid":`${o}-title`,gap:1},a.createElement(f.H3,null,a.createElement(m,{name:v,fn:$})),a.createElement(S.A,{plain:!0,content:u,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},a.createElement(f.Icon,{name:"information",color:"textDescription",width:"16px",height:"16px"}))),a.createElement(f.Flex,{alignItems:"center",gap:2},C&&a.createElement(f.TextSmall,{color:"textLite",strong:!0},"(",!!F&&!!A&&a.createElement(a.Fragment,null,a.createElement(f.TextSmall,{color:"text",strong:!0},A||0," ",F.aggregatedLabel),a.createElement("span",null," \u2283 ")),k||w?.length||0," ",F?.resultsLabel||"results",")"),a.createElement(B,{paramsKey:r}))),a.createElement(f.Flex,{gap:1,alignItems:"start"},a.createElement(W,{testId:o,dataGa:c,onRefresh:t,onCancel:n,loading:I||T}),d&&a.createElement(f.IconButton,{"data-testid":`${o}-ConfigBtn`,"data-ga":`${c}::click-config::functions-view`,flavour:"hollow",icon:"gear",ref:s,onClick:p,padding:[1]}),g&&a.createElement(M,{"data-testid":`${o}-Config`,isOpen:g,onClose:x,targetRef:s,paramsKey:r}),a.createElement(ce,{fn:E,testId:o,dataGa:c,paramsKey:r})))}),((e,t)=>e.onRefresh===t.onRefresh));var me=n(65570),ge=n(16099),pe=n.n(ge),fe=n(98525);const he=(0,P.default)(f.Icon).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"value__Arrow",componentId:"sc-1apuy8c-0"})(["rotate:",";transition:all 200ms ease;"],(e=>{let{rotate:t}=e;return t})),ye=function(e){let{transform:t,decimalPoints:n=0,units:r,defaultValue:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,fe.py)();return(0,a.useMemo)((()=>{switch(t){case"number":return(0,fe.iX)(e,{decimalPoints:n,units:r,defaultValue:l});case"duration":return(0,fe.Sh)(e,{defaultValue:l});case"datetime":return o(e,{defaultValue:l});case"datetime_usec":return o(e,{defaultValue:l,usec:!0});case"xml":return pe()(e||l||"");default:return null===e||"undefined"===typeof e?l:e}}),[e,r])},xe=e=>{let{description:t="",value:n,units:r=""}=e;return t?a.createElement(f.Flex,{column:!0,gap:1,justifyContent:"center"},a.createElement(f.TextSmall,null,t),a.createElement(f.TextSmall,{strong:!0,textAlign:"center"},n," ",r)):`${n} ${r}`},Ee=(0,P.default)(f.Flex).withConfig({displayName:"value__ValueContainer",componentId:"sc-1apuy8c-1"})(["",""],(e=>{let{overflowWrap:t}=e;return t&&"* {\n      overflow-wrap: anywhere;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n  "})),be={debug:{strong:!0,color:"textLite"},normal:{},notice:{strong:!0},warning:{strong:!0,color:"warningText"},critical:{strong:!0,color:"errorText"}},ve=(0,P.default)(f.Text).attrs((e=>({...e,...be[e.severity]||be.normal}))).withConfig({displayName:"value__ValueLabel",componentId:"sc-1apuy8c-2"})([""]),Ce=(0,a.forwardRef)(((e,t)=>{let{icon:n,iconRotate:r,children:l,onClick:o,strong:i,testId:s="cell",textAlign:c,wrap:d,truncate:u=!0,rowOptions:g,...p}=e;return a.createElement(Ee,(0,m.A)({cursor:o?"pointer":"inherit",gap:.5,onClick:o,overflow:"hidden",ref:t,width:{max:"100%",base:"100%"},flexWrap:!0,overflowWrap:d},p),n&&a.createElement(he,{name:n,rotate:r}),a.createElement(ve,(0,m.A)({"data-testid":`${s}-value`,strong:i,textAlign:c,truncate:!d&&u,whiteSpace:d?"wrap":"nowrap"},g),l))})),we=e=>{let{description:t="",tooltipValue:n,value:r,valueOptions:l={},wrap:o,rowOptions:i,...s}=e;const c=ye(r,l),{transform:d}=l;return a.createElement(S.A,(0,m.A)({content:!o&&a.createElement(xe,{description:t,value:n||r,units:l.units}),"data-testid":"valueComponent",isBasic:!0},s),a.createElement(Ce,{wrap:o,rowOptions:i,justifyContent:"number"===d?"end":"start"},c))},ke=e=>{let{value:t,...n}=e;return a.createElement(we,(0,m.A)({value:t.value},n))},Ae=e=>{let{description:t="",maxValue:n,strong:r,type:l,value:o,valueOptions:i={},wrap:s,...c}=e;const d=100*o/n,u="bar"===l,m=c?.["data-testid"]||"progressValue",g=ye(o,i);return a.createElement(S.A,{content:a.createElement(xe,{description:t,value:o,units:i.units}),isBasic:!0,stretch:"align"},a.createElement(f.Flex,{column:!0,"data-testid":m,gap:1,flexWrap:s,flex:!0},!u&&a.createElement(Ce,{strong:r,testid:m,justifyContent:"end"},g),null!==o&&a.createElement(f.ProgressBar,{background:"border",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":`${m}-bar`,height:2,width:`${d}%`})))},Ie=e=>{let{value:t,wrap:n}=e;return t=Array.isArray(t)?t:[t],a.createElement(f.Flex,{alignItems:"center",justifyContent:"center",flexWrap:n},t.map(((e,t)=>a.createElement(f.Pill,{flavour:"neutral","data-testid":"pillValueComponent",key:`${e}-${t}`,margin:[.3],normal:!1},e))))};var Te=n(40267);const Fe=e=>{let{hide:t,user:n}=e;return t||!n?null:a.createElement(a.Fragment,null,a.createElement(f.Text,null,"by"),a.createElement(Se,null,n))},Se=e=>{let{color:t="text",...n}=e;return a.createElement(f.Text,(0,m.A)({color:t,strong:!0},n))},Ke=e=>{let{type:t,text:n=t,hollow:r}=e;return a.createElement(Te.A,(0,m.A)({flavour:t.toLowerCase()},r&&{border:!1}),n)},$e=(0,P.default)(f.Flex).attrs({gap:1,flexWrap:!0,alignItems:"center"}).withConfig({displayName:"components__Container",componentId:"sc-b5rk6g-0"})([""]);var Pe=n(47767),ze=n(84976);const Le={CLEAR:0,WARNING:1,CRITICAL:2,UNINITIALIZED:3,UNDEFINED:4},Ne=e=>{let{chart:t,context:n,nodeId:r,nodeName:l,spaceSlug:o,roomSlug:i,alert:s}=e;const c=(0,Pe.Zp)(),d=(0,h.Zl)(r),u=(0,a.useCallback)((()=>{c(d,s?.id?{state:{alertId:s.id}}:{state:{contextToGo:n?.name?.[0]}})}),[d,s]),m=`/spaces/${o}/rooms/${i}/alerts/${s?.id}`,{current:g,name:p,previous:y}=s;if("ERROR"===g.status)return a.createElement($e,null,a.createElement(f.Text,null,"For the alert"),a.createElement(v.A,{Component:Se,as:ze.N_,to:m},p),a.createElement(f.Text,null,"for"),a.createElement(v.A,{Component:Se,onClick:u},t.name),a.createElement(f.Text,null,"on"),a.createElement(v.A,{Component:Se,onClick:u},l),a.createElement(f.Text,null,"we couldn't calculate the current value"),a.createElement(S.A,{align:"bottom",content:"Please check your alert configuration"},a.createElement(f.Icon,{color:"nodeBadgeColor",size:"small",name:"information"})));if("REMOVED"===g.status)return a.createElement($e,null,a.createElement(f.Text,null,"Alert"),a.createElement(v.A,{Component:Se,as:ze.N_,to:m},p),a.createElement(f.Text,null,"for"),a.createElement(v.A,{Component:Se,onClick:u},t.name),a.createElement(f.Text,null,"on"),a.createElement(v.A,{Component:Se,onClick:u},l),a.createElement(f.Text,null,"is no longer available, state can't be assessed"));const x=Le[g.status]===Le.CLEAR;return a.createElement($e,null,a.createElement(f.Text,null,"Alert"),a.createElement(v.A,{Component:Se,as:ze.N_,to:m},p),a.createElement(f.Text,null,"for"),a.createElement(v.A,{Component:Se,onClick:u},t.name),a.createElement(f.Text,null,"on"),a.createElement(v.A,{Component:Se,onClick:u},l),x?a.createElement(f.Text,null,"recovered"):a.createElement(a.Fragment,null,a.createElement(f.Text,{strong:!0},Le[y.status]===Le.CRITICAL?"was demoted":Le[y.status]===Le.WARNING?"escalated":Le[g.status]===Le.UNDEFINED?"transitioned":"was raised"),a.createElement(f.Text,null,"to"),a.createElement(Ke,{type:g.status}),Le[g.status]===Le.UNDEFINED&&a.createElement(f.Text,null,"state")),a.createElement(f.Text,null,"with value"),a.createElement(Ke,{type:g.status,text:g.value_string,hollow:!0,padding:[0]}))},Me=e=>{let{id:t,name:n}=e;const r=`/spaces/${(0,Z.bq)()}/rooms/${(0,x.wz)(t,"slug")}/home`;return a.createElement(v.A,{Component:Se,as:ze.N_,to:r},n)},Oe=e=>{let{rooms:t}=e;return t.map(((e,n)=>a.createElement(a.Fragment,{key:e.id},n>0&&(n<t.length-1?", ":" and "),a.createElement(Me,e))))},Be=e=>{let{rooms:t}=e;if(!t.length)return null;const n=t.length>1?"rooms":"room";return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"on ",n),a.createElement(Oe,{rooms:t}))},Re=e=>{let{contexts:t}=e;t.map(((e,n)=>a.createElement(a.Fragment,{key:e},n>0&&(n<t.length-1?", ":" and "),a.createElement(Se,null,e))))},De=e=>{let{contexts:t}=e;if(!t.length)return null;const n=t.length>1?"contexts":"context";return a.createElement(f.Text,null,"on ",n," ",a.createElement(Re,{contexts:t}))},Ve={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0},_e=e=>{let{start:t,end:n}=e;const{localeDateString:r}=(0,O.$j)();if(!t||!n)return null;const l=r(new Date(t),Ve),o=r(new Date(n),Ve);return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"(scheduled ",l," - ",o,")"))},je={"silencing-rule-created":"created","silencing-rule-deleted":"deleted","silencing-rule-changed":"changed"},We=e=>{let{rooms:t=[],contexts:n=[]}=e;return t.length||n.length?a.createElement(a.Fragment,null,!!t.length&&a.createElement(Be,{rooms:t}),!!t.length&&!!n.length&&a.createElement(f.Text,null,"and ",a.createElement(De,{contexts:n}))):null},qe=e=>{let{action:t,notification:n,user:r,room:l,context:o}=e;const i=(n?.silencing?.rule||[])[0],s=r?.name,c=o?.name||[];return a.createElement($e,null,a.createElement(f.Text,null,"Silencing rule"),a.createElement(Se,null,i.name),a.createElement(We,{rooms:l,contexts:c}),a.createElement(f.Text,null,"was ",je[t]),a.createElement(Fe,{user:s}),a.createElement(_e,i))};var He=n(78969);const Ge=(e,t)=>e.target?.[t]||e.target?.id||e[t]||e.id,Ue=(e,t)=>{if(e)return t=t||"name",Array.isArray(e)?e[0][t]:e[t]},Ze={"space-setting-created":()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"created")),"space-setting-changed":()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"updated")),"space-setting-removed":()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"deleted"))},Ye=function(){let{event:e={},user:t={},token:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"space-claiming-token-created"==e.action?a.createElement($e,null,a.createElement(f.Text,null,"Claiming Token was created by user"),a.createElement(Fe,{hide:!t.target,user:t.name})):"space-claiming-token-revoked"==e.action?a.createElement($e,null,a.createElement(f.Text,null,"Claiming Token"),a.createElement(f.Text,{strong:!0},n.prefix),a.createElement(f.Text,null,"was revoked by user"),a.createElement(Fe,{hide:!t.target,user:t.name})):null},Xe=e=>{let{action:t,Netdata:n}=e;const r=Ze[t];return a.createElement($e,null,a.createElement(f.Text,null,"Setting on"),a.createElement(Se,null,Ue(n.settings,"type")),a.createElement(r,null),a.createElement(f.Text,null,"on ",Ue(n.space)))},Je=e=>{let{statistics:t}=e;const{live:n,stale:r,removed:l,total:o}=t?.nodes||{};return a.createElement($e,null,a.createElement(f.Text,null,"Space statistics. Nodes:"),a.createElement(f.Text,{color:He.J4.live.statusTextColor},n," live"),a.createElement(f.Text,null,","),a.createElement(f.Text,{color:He.J4.stale.statusTextColor},r," stale"),a.createElement(f.Text,null,","),a.createElement(f.Text,{color:He.J4.offline.statusTextColor},l," removed"),a.createElement(f.Text,null,","),a.createElement(f.Text,{strong:!0},o," total"))};n(78898);var Qe=n(24398);const et=e=>{let{stateColor:t,state:n}=e;return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"became"),a.createElement(Se,{color:t},n))},tt=e=>{let{stateColor:t,state:n}=e;return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"was"),a.createElement(Se,{color:t},n))},nt={"node-created":tt,"node-state-live":et,"node-state-stale":et,"node-state-offline":et,"node-removed":tt,"node-deleted":tt,"node-restored":tt,default:tt},at=e=>{let{action:t,hosts:n=[]}=e;const{id:r,name:l}=n[0],o=(0,Pe.Zp)(),i=(0,h.Zl)(r),s=(0,a.useCallback)((()=>o(i)),[i]),c=nt[t],d=t.split("-").at(-1),u=Qe.P[d]?.statusTextColor;return a.createElement($e,null,a.createElement(f.Text,null,"Node"),a.createElement(v.A,{Component:Se,onClick:s},l),a.createElement(c,{stateColor:u,state:d}))},rt=e=>{let{room:t}=e;const n=(0,x.XA)("untouchable");return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"added")," to",n?" room":""),a.createElement(Se,null,n?Ue(t):"this room"))},lt=()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"created")),ot=()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"deleted")),it=e=>{let{room:t}=e;const n=(0,x.XA)("untouchable");return a.createElement(a.Fragment,null,a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"removed")," from",n?" room":""),a.createElement(Se,null,n?Ue(t):"this room"))},st=e=>{let{room:t}=e;const n=(0,x.XA)("untouchable");return a.createElement(a.Fragment,null,a.createElement(f.Text,null,n?"room":""),a.createElement(Se,null,n?Ue(t):"this room"))},ct={"room-created":lt,"room-deleted":ot,"room-node-added":rt,"room-node-removed":it,"room-user-added":rt,"room-user-removed":it,"room-setting-created":lt,"room-setting-changed":()=>a.createElement(f.Text,null,"was ",a.createElement(f.Text,{strong:!0},"updated")),"room-setting-removed":ot},dt=e=>{let{action:t,hosts:n=[],Netdata:r,user:l}=e;const o=ct[t],i=n[0]?.name;return a.createElement($e,null,a.createElement(f.Text,null,"Node"),a.createElement(Se,null,i),a.createElement(o,{room:r.room}),a.createElement(Fe,{user:l?.name}))},ut=e=>{let{action:t,Netdata:n,user:r}=e;const l=ct[t];return a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(r,"name")),a.createElement(l,{room:n.room}),a.createElement(Fe,{hide:!r.target,user:r.name}))},mt=e=>{let{action:t,Netdata:n}=e;const r=ct[t];return a.createElement($e,null,a.createElement(f.Text,null,"Setting on"),a.createElement(Se,null,Ue(n.settings,"type")),a.createElement(r,null),a.createElement(f.Text,null,"on"),a.createElement(st,{room:n.room}))},gt=e=>{let{action:t,Netdata:n,user:r}=e;const l=ct[t];return a.createElement($e,null,a.createElement(f.Text,null,"Room"),a.createElement(Se,null,Ue(n.room)),a.createElement(l,null),a.createElement(Fe,{user:r.name}))},pt={"alert-node-transition":e=>{let{chart:t,hosts:n,alert:r,...l}=e;return n.map(((e,n)=>{let{id:o,name:i}=e;const s={...r,name:r.name[n],...r.current?{current:{...r.current,...r.current.status?{status:r.current.status[n]||r.current.status[0]}:{}}}:{}};return a.createElement(Ne,(0,m.A)({key:o,chart:t,nodeId:o,nodeName:i,alert:s},l))}))},"node-created":at,"node-state-live":at,"node-state-stale":at,"node-state-offline":at,"node-removed":at,"node-deleted":at,"node-restored":at,"agent-connected":e=>{let{agentId:t}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Agent with claim ID"),a.createElement(Se,null,t)," ",a.createElement(f.Text,null,"has ",a.createElement(f.Text,{strong:!0},"connected")," to Netdata"))},"agent-connection-initialized":e=>{let{agentId:t,reason:n}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Agent with claim ID"),a.createElement(Se,null,t),a.createElement(f.Text,null,"has ",a.createElement(f.Text,{strong:!0},"initialized")," its connection to Netdata"))},"agent-disconnected":e=>{let{agentId:t,reason:n}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Agent with claim ID"),a.createElement(Se,null,t),a.createElement(f.Text,null,"has ",a.createElement(f.Text,{strong:!0},"disconnected")," from Netdata with reason: \u201c",n,"\u201d"))},"agent-authenticated":e=>{let{agentId:t}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Agent with claim ID"),a.createElement(Se,null,t),a.createElement(f.Text,null,"has ",a.createElement(f.Text,{strong:!0},"successfully")," authenticated"))},"agent-authentication-failed":e=>{let{agentId:t}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Agent with claim ID"),a.createElement(Se,null,t),a.createElement(f.Text,null,"has ",a.createElement(f.Text,{strong:!0},"failed")," to authenticate"))},"room-created":gt,"room-deleted":gt,"room-node-added":dt,"room-node-removed":dt,"room-user-added":ut,"room-user-removed":ut,"space-created":e=>{let{Netdata:t,user:n}=e;return a.createElement($e,null,a.createElement(f.Text,null,"Space"),a.createElement(Se,null,Ue(t.space)),a.createElement(f.Text,null,"was created"),a.createElement(Fe,{user:n.name}))},"space-statistics":Je,"space-user-added":e=>{let{Netdata:t,user:n}=e;const{name:r}=t?.inviter||{};return a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(n,"name")),a.createElement(f.Text,null,"was added to this space"),r&&a.createElement(a.Fragment,null,a.createElement(f.Text,null,"by invite of"),a.createElement(Se,null,r)))},"space-user-changed":e=>{let{user:t}=e;if(!!t.changes?.roles&&1===Object.keys(t.changes).length){const e=t.changes.roles.length>1,n=t.changes.roles.join(", ");return a.createElement($e,null,a.createElement(f.Text,null,"User ",e?"roles":"role"," for"),a.createElement(Se,null,Ge(t,"name")),a.createElement(f.Text,null,e?"were":"was"," changed to"),a.createElement(Se,null,n),a.createElement(Fe,{hide:!t.target,user:t.name}))}return a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(t,"name")),a.createElement(f.Text,null,"was modified"))},"space-user-invited":e=>{let{user:t}=e;return a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(t,"email")),a.createElement(f.Text,null,"was invited to this space"),a.createElement(Fe,{user:t.name}))},"space-user-removed":e=>{let{user:t}=e;const{name:n}=t.target||{};return a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(t,"name")),a.createElement(f.Text,null,"was removed from this space"),n&&a.createElement(Fe,{user:t.name}))},"space-user-uninvited":e=>{let{event:t,user:n}=e;return"space-invite-expired"===t.reason?a.createElement($e,null,a.createElement(f.Text,null,"The invite for"),a.createElement(Se,null,Ge(n,"email")),a.createElement(f.Text,null,"to this space has expired")):a.createElement($e,null,a.createElement(f.Text,null,"User"),a.createElement(Se,null,Ge(n,"email")),a.createElement(f.Text,null,"was uninvited from this space"),a.createElement(Fe,{hide:!n.target,user:n.name}))},"space-claiming-token-created":Ye,"space-claiming-token-revoked":Ye,"silencing-rule-created":qe,"silencing-rule-deleted":qe,"silencing-rule-changed":qe,"space-settings-created":Xe,"space-settings-removed":Xe,"space-settings-changed":Xe,"room-settings-created":mt,"room-settings-removed":mt,"room-settings-changed":mt},ft=e=>{let{data:t}=e;const{action:n,roomId:r,space:l}=t.source,o=(0,Z.ns)(l.id,"slug"),i=(0,x.wz)(r,"slug"),s=pt[n];return s?a.createElement(s,(0,m.A)({},t.source,{spaceSlug:o,roomSlug:i})):a.createElement($e,null,a.createElement(f.Text,null,"Event")," ",a.createElement(f.Text,{strong:!0},n)," ",a.createElement(f.Text,null,"emitted"))},ht={bar:Ae,"bar-with-integer":Ae,duration:Ae,pill:Ie,number:we,string:we,feedTemplate:ft,datetime:e=>{let{value:t,...n}=e;const r=new Date(t),{localeTimeString:l,localeDateString:o}=(0,O.$j)(),i=isNaN(r.valueOf())?"Missing date & time":`${o(r,{long:!1})} ${l(r,{secs:!0})}`;return a.createElement(we,(0,m.A)({value:i},n))},value:we},yt={bar:Ae,pill:Ie,value:we,richValue:ke,feedTemplate:ft,rowOptions:"skip"},xt=e=>{let{visualization:t,type:n,value:r,data:l,...o}=e;const i=yt[t]||ht[n]||yt.value;return i===yt.rowOptions?null:a.createElement(i,(0,m.A)({value:r,type:n,rowOptions:l?.rowOptions,data:l},o))},Et={sum:"sum",min:"min",max:"max",extent:"extent",mean:"mean",median:"median",unique:"unique",uniqueCount:"uniqueCount",count:"count"};n(17333),n(8159),n(54520),n(37550);var bt=n(47444);const vt={query:(e,t,n)=>{let{columnVisibility:a}=n;const r="string"===typeof t?t.toLowerCase():"";return Object.entries(e).some((e=>{let[t,n]=e;return!!a[t]&&(null!==n&&"undefined"!==typeof n&&(Array.isArray(n)?n.some((e=>String(e).toLowerCase().includes(r))):("object"===typeof n&&Object.keys(n).some((e=>String(n[e]).toLowerCase().includes(r))),String(n).toLowerCase().includes(r))))}))}},Ct=e=>(t,n)=>!e.some((e=>{let[a,r]=e;return vt[a]?!vt[a](t,r,n):!(e=>(t,n,a)=>{if(!a.columns[e]||"facet"===a.columns[e]?.filter)return!0;if("range"===a.columns[e]?.filter&&n?.length)return t[e]>=n[0]&&t[e]<=n[1];if(!Array.isArray(n)||!n.length)return!0;let r=t[e];return"number"===typeof r?(r=parseFloat(r),n.some((e=>parseFloat(e)===r))):n.includes(r)})(a)(t,r,n)})),wt=(0,bt.K0)({key:"fnDataFiltered",get:e=>{let{extraKey:t,baseKey:n,omit:a,keepAll:r,fn:l}=e;return e=>{let{get:s}=e;const{columnVisibility:c,data:d,columns:u,aggregations:m,requiredParams:g}=s((0,i.WB)({id:l}));if(m||!d)return d||[];const p=s((0,o.GA)({key:n,extraKey:`${t}Filters`,merge:!1})),f=a?a.split(":::"):[],h=Object.keys(p).reduce(((e,t)=>(g.some((e=>e.id===t))||f.includes(t)||e.push([t,p[t]]),e)),[]);if(!h.length)return d;const y=Ct(h),x=s((0,o.GA)({key:n,extraKey:`${l}Settings`,flavour:"val"}))?.sortColumn;return r?d.map((e=>y(e,{columnVisibility:c,columns:u,sortColumn:x})?e:{...e,hidden:!0})):d.filter((e=>y(e,{columnVisibility:c,columns:u,sortColumn:x})))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),kt=function(){let{extraKey:e="fn",omit:t,keepAll:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=(0,i.Ak)({extraKey:e}),[r,l]=(0,i.Cs)({extraKey:e});return(0,bt.vc)(wt({extraKey:l,fn:a,baseKey:r,omit:t,keepAll:n}))};var At=n(94944);const It=(0,P.default)(f.Table).withConfig({displayName:"table__StyledTable",componentId:"sc-1n2s6gl-0"})(["*{font-family:monospace;letter-spacing:0.09px;}"]),Tt=(0,a.memo)(It,((e,t)=>(0,me.Ay)(e,t,{keep:["columnVisibility","data","fnQuery","sortBy","virtualizeOptions","columnSizing","columnPinning"]})));let Ft;const St=(0,a.memo)((0,a.forwardRef)(((e,t)=>{let{"data-testid":n,paramsKey:r,refetch:l,onShowInfo:s}=e;const c=(0,i.Ol)(r),{columns:d,sortedColumns:u,sortColumn:m,sortDirection:g,columnVisibility:p,pinnedColumns:h,loadingMore:y,retentionWarning:x,groupByColumns:E,pagination:b,merged:v,latestDirection:C,hasDirection:w,tail:k,aggregations:A}=c,I=(0,a.useRef)();I.current=c;const[T,F]=(0,a.useState)(""),S=kt(r),K="feed"===r.extraKey,$=((e,t,n)=>{let{groupBy:r}=n;return(0,a.useMemo)((()=>(e||[]).reduce(((e,n)=>{const l=t[n];if(!l)return e;const{displayName:o,name:i,sortable:s,sticky:c,units:d,max:u,dummy:m,cellSize:g,valueOptions:p,summary:h,type:y,visualization:x,wrap:E=!1,...b}=l;return m?e:[...e,{...b,displayName:o,id:o,accessorFn:e=>e[n],cell:e=>{let{getValue:t,row:n,cell:l}=e;const o=l.getIsAggregated(),s=t(),c=o&&(Et[h]===Et.count||Et[h]===Et.uniqueCount||!Et[h]);return a.createElement(xt,{description:i,data:n.original,maxValue:u,padding:n.depth>0?[0,0,0,2.5*n.depth]:[0],strong:o,value:c?`${s}x`:s,tooltipValue:c?`${s} ${1===s?"item":"items"} associated with ${r} grouping`:s,valueOptions:c?{...p,transform:"none"}:p,type:y,visualization:x,wrap:E})},header:a.createElement(f.Flex,{column:!0},a.createElement(f.TextSmall,{strong:!0},o),d&&a.createElement(f.TextMicro,null,"(",d,")")),enableSorting:s,aggregationFn:Et[h]||Et.count,...g,meta:{...o!==i?{tooltip:i}:{}}}]}),[])),[e,t,r])})(u,d,{...K?{}:{groupBy:T}}),[P,z]=(0,o.r$)("colSizing",{defaultValue:{},flavour:"obj",...r}),[L,N]=(0,i.UB)({param:"sortBy",flavour:"arrobj",...r}),[M,O]=(0,i.ZY)({param:"query",flavour:"val",...r,defaultValue:""}),B=(0,i.E)({key:"columnVisibility",...r}),R=(0,a.useMemo)((()=>L||(m?[{id:m,desc:"descending"===g}]:[])),[m,g,L]),D=(0,a.useMemo)((()=>({left:h})),[h]),V=(0,a.useRef)();V.current=y;const{pause:_}=(0,At.A)(),j=(0,a.useCallback)((e=>{let{data:t}=e;return s({data:t.json||t,columns:d})}),[]),W=(0,a.useRef)(),q=(0,a.useRef)(),H=(0,a.useRef)(),G=(0,a.useRef)(0),U=(0,a.useRef)(0),Z=(0,a.useRef)(v);(0,a.useLayoutEffect)((()=>{v&&!k||!q.current?.scrollOffset||q.current.scrollToOffset(0)}),[v,k]),(0,a.useLayoutEffect)((()=>{clearTimeout(Ft),y||(Ft=setTimeout((()=>{Z.current=!1}),200))}),[y]),(0,a.useLayoutEffect)((()=>{if(!b||!w||k)return;if(U.current!==S.length&&"forward"===C){const e=q.current.scrollOffset;let t=0,n=q.current.getMeasurements().find(((n,a)=>0!==a&&(t+=n.size,t>e)));if(n||(n=q.current.getMeasurements()?.[1]),!n)return;H.current={...S[S.length-U.current+(n.index-1)],headerSize:q.current.getMeasurements()?.[0]?.size||0},v&&!k?G.current=0:H.current=null}const e=()=>{if(H.current&&G.current<5){G.current=G.current+1,U.current=S.length;const t=H.current?.[b.column]?.toString?.();let n=q.current.getMeasurements().find((e=>e.key.replace(/-\d+?/,"")===t));if(!n){const e=S.findIndex((e=>e[b.column]==t));n=q.current.getMeasurements()[e+1]}return n?(q.current.scrollToOffset(n.start-H.current.headerSize),void setTimeout(e)):(G.current=5,void(H.current=null))}G.current=5,H.current=null};e(),U.current=S.length}),[S]);const Y=(0,a.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"backward";k||V.current||I.current.hasDirection&&(Z.current||("backward"!==e||I.current.hasNextPage||I.current.anchorBefore)&&("forward"!==e||I.current.hasPrevPage||I.current.anchorAfter)&&("forward"===e&&(Z.current=!0),l({anchor:"backward"===e?I.current.anchorBefore:I.current.anchorAfter,merge:!0,direction:e,data_only:!0})))}),[k]),X=(0,a.useCallback)((e=>"undefined"!==typeof I.current.data[e]?.[b?.column]?`${I.current.data[e][b?.column]}-${e}`:`${e}`),[]),J=(0,a.useCallback)((()=>I.current.hasNextPage),[]),Q=(0,a.useCallback)((()=>I.current.hasPrevPage),[]),ee=(0,a.useCallback)((e=>{e.scrollOffset>10&&_()}),[_]),te=(0,a.useMemo)((()=>({overscan:15,getHasNextPage:J,getHasPrevPage:Q,loading:y,loadMore:Y,warning:x,virtualRef:q,getItemKey:X,onVirtualChange:ee})),[S,y]),ne=(0,i.dP)();return a.createElement(Tt,{groupByColumns:E,onClickRow:j,columnPinning:D,columnVisibility:p,data:S,dataColumns:$,dataGa:"functions",enableColumnPinning:!!h?.length,enableColumnVisibility:!K,enableCustomSearch:!!A,enableResizing:!0,enableSorting:!K,globalFilter:K?null:M,onColumnVisibilityChange:B,onColumnSizingChange:z,columnSizing:P,onSearch:K?null:O,onGroupByChange:K?null:F,onSortingChange:K?null:N,sortBy:R,testPrefix:n,virtualizeOptions:te,ref:t,tableRef:W,onHoverCell:(0,a.useCallback)((function(){let{row:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e||ne(null),ne(e)}),[])})})),(()=>!0)),Kt=St;var $t=n(2404),Pt=n.n($t),zt=n(33829),Lt=n(92138),Nt=n(99090),Mt=n(65624),Ot=n(61531),Bt=(n(9920),n(3949),n(88055)),Rt=n.n(Bt),Dt=n(64454);const Vt=90,_t=110,jt=160,Wt=1e3,qt={minSize:Vt,maxSize:Wt},Ht=50,Gt={uniqueKey:{size:Vt,downLimit:Vt-Ht,upLimit:Vt+Ht},bar:{size:Vt,downLimit:Vt-Ht,upLimit:Vt+Ht},value:{size:_t,downLimit:_t-Ht,upLimit:_t+Ht},feedTemplate:{size:Wt,downLimit:Wt-Ht,upLimit:Wt+Ht,minSize:230,maxSize:5e3,fullWidth:!0},pill:{size:_t,downLimit:_t-Ht,upLimit:_t+Ht},timestamp:{size:jt,downLimit:jt-Ht,upLimit:jt+Ht},datetime:{size:jt,downLimit:jt-Ht,upLimit:jt+Ht}},Ut=(e,t)=>{e((e=>{const{updateEvery:n,merge:a,reset:r,groupBy:l,items:o,direction:i,dataOnly:s,showIds:c=!1!==e.showIds,facetsDelta:d,histogramDelta:u,itemsDelta:m,aggregatedView:g,...p}=t;let f=r?t.columns:s?Rt()(e.columns):Rt()(a?(0,Dt.A)(t.columns,e.columns):t.columns),h=r?{}:{...e.sortedColumnsObj}||{};const y=p.hasHistory||e.hasHistory,x=s?e.pagination:t.pagination;let E=Object.keys(f).reduce(((t,n)=>{const a=f[n],{id:l,name:o,sticky:i,visible:s,index:d}=a;return a.displayName=c?l||n:o,t.columnVisibility[a.displayName]=!r&&e.loaded?!!t.columnVisibility[a.displayName]:s,!i||!r&&e.loaded||t.pinnedColumns.push(a.displayName),a.valueOptions=a.valueOptions||{},a.cellSize=(e=>{let{visualization:t,type:n,fullWidth:a=!1,uniqueKey:r}=e;return{...qt,fullWidth:a,...(r&&"timestamp"!==n?Gt.uniqueKey:Gt[n])||Gt[t]||{minSize:Vt,maxSize:Wt,size:_t,downLimit:_t-Ht,upLimit:_t+Ht}}})(a),a.sortable=a.sortable&&!x?.enabled,"undefined"!==typeof d&&(h[h[d]!==n?a.displayName:d]=n),t}),{columnVisibility:r?{}:{...e.columnVisibility||{}},pinnedColumns:r?[]:[...e.pinnedColumns||[]]}),b=r?Object.keys(f).sort(((e,t)=>(f[e].displayName||f[e].name).localeCompare(f[t].displayName||f[t].name,void 0,{sensitivity:"accent",ignorePunctuation:!0}))):e.alphabetical,v=r?t.aggregations:a?Rt()(e.aggregations):t.aggregations||Rt()(e.aggregations);d&&d.forEach((e=>{const t=v.find((t=>t.id===e.id));t?e.options.forEach((e=>{if(isNaN(e.count))return;const n=t.options.find((t=>t.id===e.id));n?n.count=(n.count||0)+(e?.count||0):t.options.push(e)})):v.push(e)}));let C=r?t.histogram:a?Rt()(e.histogram):t.histogram||Rt()(e.histogram);if(u){if(!r&&e.histogram?.id!==u?.id)return;const t=C.chart.result.labels;if((0,me.Ay)(t,u.chart.result.labels))C.chart.result.data=[...C.chart.result.data,...u.chart.result.data];else{const e=((e,t)=>{const n=t.reduce(((t,n,a)=>{const r=e.findIndex((e=>n===e));return-1===r||(t[r]=a),t}),{});return t=>e.reduce(((e,a,r)=>("undefined"===typeof n[r]?e.push([0,0,0]):e.push(t[n[r]]),e)),[])})(t,u.chart.result.labels);u.chart.result.data.forEach((t=>C.chart.result.data.push(e(t))))}}let w={};Object.keys(t.columns).forEach((e=>{w[t.columns[e].index]=e}));let k=t.data.map((e=>e.reduce(((e,t,n)=>{const a=w[n];return a?(e[a]=t,e):e}),{}))),A=r?k:a?"forward"===i?k.concat(e.data||[]):(e.data||[]).concat(k):k;p.tail&&A.slice(0,500);let I=x?.enabled&&x.column&&Array.isArray(A)&&A[A.length-1]?.[x.column]&&A[0]?.[x.column]?{anchorBefore:A[A.length-1][x.column],anchorAfter:A[0][x.column],anchorUnits:x.units}:{};const T=t.defaultSortColumn||e.defaultSortColumn,F=(r?t.acceptedParams||[]:t.acceptedParams||e.acceptedParams).includes("direction");let S=0;g&&(S=A.reduce(((e,t)=>e+(t[g.column]||0)),0));const K={...e||Ot.zb.table,...p,groupByColumns:r?l:l||e.groupByColumns,data:A,columns:f,updatedAt:(new Date).getTime(),updateEvery:n||e.updateEvery,sortedColumns:Object.values(h),sortColumn:f[T]?.displayName,sortDirection:T?f[T].sort:"descending",...E,...I,totalSize:p.totalSize||o?.matched||(!s||"forward"===i||k.length||t.partial?(e.totalSize||0)+(m?m.matched:0):0),actualSize:S,...!!y&&{hasNextPage:!(s&&"forward"!==i&&!k.length&&!t.partial)&&(!o||0!==o.after)},...!!y&&F&&{hasPrevPage:!(s&&"forward"===i&&!k.length&&!t.partial)&&(!(!p.tail&&o)||0!==o.before)},offset:a?null:o?.before||null,loading:!1,loaded:!0,showIds:c,merged:a,latestDirection:i,hasHistory:y,hasDirection:F,aggregations:v,histogram:C,sortedColumnsObj:h,filtersToRefresh:(p.requiredParams||[]).reduce(((e,t)=>t.uniqueView?{...e,[t.id]:!0}:e),{}),reset:r,aggregatedView:g,alphabetical:b,transactionId:null};return h=null,C=null,v=null,I=null,E=null,f=null,w=null,k=null,A=null,b=null,K}))},Zt={table:Ut,log:Ut,default:(e,t)=>{const{data:n,type:a,updateEvery:r,...l}=t;e({...Ot.zb.default,...l,data:n,updateEvery:r,type:a,loading:!1,loaded:!0,transactionId:null})}},Yt={default:{fetch:Mt.ph,isEnabled:e=>{let{nodeIds:t,fn:n,after:a}=e;return!!t?.length&&!!n&&!!a}},feed:{fetch:Mt.d$,isEnabled:e=>{let{roomId:t,fn:n}=e;return!!t&&!!n}}},Xt=e=>{const{after:t,before:n,highlight:r}=(0,o.rW)();return(0,a.useMemo)((()=>t>0?[()=>({after:t,before:n}),t,n,e||r.before]:[()=>{const e=Date.now();return{after:e+1e3*t,before:e}},t,n,e||r.before]),[t,n,r?.before,e])};var Jt=n(18061);const Qt={default:{fetch:Mt.JJ,isEnabled:e=>{let{nodeIds:t,fn:n}=e;return!!t?.length&&!!n}},feed:{fetch:()=>Promise.resolve({data:{type:"table"}}),isEnabled:()=>!0}},en=(e,t,n)=>{const a=(0,x.ID)(),r=(0,h.yN)(e),[{loading:l,token:o}]=(0,I.f7)(),{fetch:s,isEnabled:c}=Qt[t]||Qt.default,[{error:d},u]=(0,i.WH)(n),[m]=Xt(),{loaded:g,error:p}=(0,i.vx)(n.extraKey);return(0,Jt.A)((()=>({enabled:g&&!p&&!l&&!d&&c({nodeIds:e,fn:t}),fetch:()=>s({roomId:a,cloudNodeIds:r,nodeIds:e,fn:t,after:m().after,before:m().before}),onFail:e=>{!e?.response?.status||400!==e.response.status&&304!==e.response.status?(e?.response?.data&&(e=e.response.data),u({error:e})):u((e=>({...e,infoLoaded:!0})))},onSuccess:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u((t=>({...Ot.zb[e.type]||Ot.zb.default,...t,hasHistory:e.hasHistory||!1,acceptedParams:e.acceptedParams||[],requiredParams:e.requiredParams||[],type:e.type,help:e.help,v:e.v,infoLoaded:!0})))}})),[g,t,l,!e?.length,e?.[0],o]),p};var tn=n(44731),nn=n(5638),an=n(3839),rn=n(66118);const ln=(0,bt.eU)({key:"chartjs",default:{navigation:"pan"}}),on=(0,bt.K0)({key:"feedChartState",get:e=>{let{key:t}=e;return e=>{let{get:n}=e;const a=n(ln);return t?a[t]:a}},set:e=>{let{key:t}=e;return(e,n)=>{let{set:a}=e;a(ln,(e=>t?{...e,[t]:n}:{...e,...n}))}}}),sn=e=>(0,bt.vc)(on({key:e})),cn=e=>(0,bt.lZ)(on({key:e}));var dn=n(31225);n(77518);const un=(0,P.default)(f.Button).attrs((e=>{let{active:t}=e;return{flavour:"borderless",iconColor:t?"textDescription":"border",iconSize:"small",padding:[.5],small:!0}})).withConfig({displayName:"styled__Button",componentId:"sc-8s0lqd-0"})(["&&{background-color:",";height:20px;width:20px;&:hover{background-color:",";.button-icon__color{fill:",";}}}"],(e=>{let{theme:t,active:n}=e;return n?(0,f.getColor)("borderSecondary")({theme:t}):"initial"}),(e=>{let{theme:t}=e;return(0,f.getColor)("borderSecondary")({theme:t})}),(e=>{let{theme:t}=e;return(0,f.getColor)("textDescription")({theme:t})})),mn=(0,P.default)(f.Flex).attrs({padding:[.5],gap:1,round:!0,border:{side:"all",color:"borderSecondary"}}).withConfig({displayName:"styled__Container",componentId:"sc-8s0lqd-1"})(["position:absolute;top:18px;right:8px;background:",";&:hover{background:",";}"],(0,f.getRgbColor)("elementBackground",.5),(0,f.getColor)("elementBackground")),gn=(0,a.forwardRef)(((e,t)=>{let{testIdPrefix:n,...r}=e;const[{after:l,before:i},s]=(0,o.N9)(),[c,d]=[sn(u="navigation"),cn(u)];var u;const g=(0,a.useCallback)((e=>{let t=l,n=i;if(l<0){const e=Date.now();t=e+1e3*l,n=e}const a=e*Math.round((n-t)/4);s({after:t+a,before:n-a})}),[l,i]),p=l>0&&Math.abs(i-l)<2e3||-1===l;return a.createElement(mn,(0,m.A)({"data-testid":"chartToolbox","data-track":`chart-toolbox::hover-chart::${n}`,"data-toolbox":"true",ref:t},r),a.createElement(un,{active:"pan"===c,"data-testid":"chartToolbox-pan","data-track":`chart-toolbox::pan-click::${n}`,icon:"panTool",onClick:()=>d("pan"),title:"Pan"}),a.createElement(un,{active:"highlight"===c,"data-testid":"chartToolbox-highlight","data-track":`chart-toolbox::highlight-click::${n}`,icon:"highlightArea",onClick:()=>d("highlight"),title:"Highlight"}),a.createElement(un,{active:"zoom"===c,"data-testid":"chartToolbox-zoom","data-track":`chart-toolbox::zoom-click::${n}`,disabled:p,icon:"dragHorizontal",onClick:()=>{d("zoom")},title:"Select and zoom"}),a.createElement(un,{"data-testid":"chartToolbox-zoomIn","data-track":`chart-toolbox::zoom-in-click::${n}`,disabled:p,icon:"zoomIn",onClick:()=>{g(1)},title:"Zoom in"}),a.createElement(un,{"data-testid":"chartToolbox-zoomOut","data-track":`chart-toolbox::zoom-out-click::${n}`,icon:"zoomOut",onClick:()=>{g(-1)},title:"Zoom out"}),a.createElement(un,{"data-testid":"chartToolbox-zoomReset","data-track":`chart-toolbox::zoom-reset-click::${n}`,disabled:-900===l&&0===i,icon:"zoomReset",onClick:()=>{s({after:-900,before:0})},title:"Zoom reset"}))})),pn={after:null,before:null};rn.t1.register(nn.A,rn.A6,rn.E8,rn.PP,rn.s$,rn.kc,rn.UA,rn.m_,an.Ay);const fn=e=>{let{paramsKey:t,testIdPrefix:n}=e;const r=(0,a.useRef)(),l=(0,a.useContext)(P.ThemeContext),[s,c]=(0,o.N9)(),[d,u]=(0,a.useState)([]),[m,g]=(0,a.useState)(pn),[p,h]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[E,b]=(0,a.useState)([]),[v,C]=(0,a.useState)(null),[w,k]=(0,a.useState)("second"),[A,,I,T]=(0,K.A)(!1),{aggregations:F}=(0,i.Ol)(t),{navigation:S}=sn(),{localeTimeString:$,localeDateString:z}=(0,O.$j)(),[L]=Xt(),N=L.before-L.after,M=(0,a.useMemo)((()=>{const e=Date.now();return{min:L.after-N,max:0===s.before?L.before:e<L.before+N?e:L.before+N}}),[L.after,L.before,s.before]),B=[{backgroundColor:(0,f.getColor)("primary")({theme:l}),borderWidth:0,data:d,label:"Histogram",maxBarThickness:50,minBarLength:0}];(0,a.useEffect)((()=>{if(!F?.event_histogram?.hits?.buckets)return;const e=F.event_histogram.hits.buckets.reduce(((e,t)=>{let{key:n,doc_count:a}=t;return{data:[...e.data,a],labels:[...e.labels,n]}}),{data:[],labels:[]}),t=(0,fe.Bp)(s.after,s.before)||{};u(e.data),b(e.labels),C(null),k(t.unit)}),[F?.event_histogram?.hits?.buckets]);const R=(0,a.useMemo)((()=>({animation:!1,interaction:{axis:"x"},maintainAspectRatio:!1,plugins:{annotation:{annotations:{...m.after&&m.before?{annotation:{type:"box",backgroundColor:"rgba(128,128,128,0.3)",borderDash:[1,5,1,1],borderWidth:1,xMax:m.before,xMin:m.after,xScaleID:"x"}}:{}}},legend:{align:"start",display:!1,position:"bottom"},zoom:{limits:{x:M},pan:{enabled:"pan"===S&&!p,mode:"x",onPanStart:e=>{let{chart:t}=e;t.canvas.style.cursor="grabbing"},onPanComplete:e=>{let{chart:t}=e;t.canvas.style.cursor="default";const{min:n,max:a}=t.scales.x;C({min:Math.round(n),max:Math.round(a)}),c({after:Math.round(n),before:Math.round(a)}),t.update()},threshold:1},zoom:{drag:{enabled:"zoom"===S||p},mode:"x",onZoomStart:e=>{let{chart:t}=e;t.canvas.style.cursor="col-resize"},onZoomComplete:e=>{let{chart:t}=e;if("zoom"!==S&&!p)return;t.canvas.style.cursor="default";const{min:n,max:a}=t.scales.x;c({after:Math.round(n),before:Math.round(a)}),h(!1)}}}},responsive:!0,scales:{x:{type:"time",grid:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!0,offset:!1},parsing:!1,ticks:{color:(0,f.getColor)("textLite")({theme:l}),font:{size:11},autoSkip:!0,maxTicksLimit:20,..."minute"===w&&N>=1e3*dn.wD?{callback:e=>`${z(e,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}).split("/").reverse().slice(1).join("-")} ${$(e,{secs:!1})}`}:{}},time:{displayFormats:{week:"yyyy-MM-dd",day:"MM-dd",hour:"MM-dd HH:mm",minute:"HH:mm",second:"HH:mm:ss"},tooltipFormat:"yyyy-MM-dd HH:mm:ss",unit:w||"second"},...v?{min:v.min,max:v.max}:{}},y:{beginAtZero:!0,ticks:{precision:0,color:(0,f.getColor)("textLite")({theme:l}),font:{size:11}}}}})),[m,N,p,S,v,C,w,M]);if((0,a.useEffect)((()=>{const e=e=>{"Shift"===e.key&&(e.preventDefault(),h(!0))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]),!d.length)return null;return a.createElement(f.Flex,{position:"relative",height:{min:50},onMouseEnter:I,onMouseLeave:T},A&&a.createElement(gn,{testIdPrefix:n}),a.createElement(tn.yP,{data:{datasets:B,labels:E},onMouseDown:e=>{if(e.preventDefault(),"highlight"!==S)return;x(!0);const t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=r.current;n.canvas.style.cursor="crosshair",g({after:Math.round(n.scales.x.getValueForPixel(t)),before:null})},onMouseMove:e=>{if(e.preventDefault(),"highlight"!==S||!y)return;const t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=r.current;g((e=>({...e,before:Math.round(n.scales.x.getValueForPixel(t))})))},onMouseUp:e=>{e.preventDefault(),x(!1);const t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=r.current;n.canvas.style.cursor="default";m.after===Math.round(n.scales.x.getValueForPixel(t))?g(pn):g(m)},options:R,ref:r}))};var hn=n(80158);const yn={none:!0,facet:!0},xn=(e,t)=>{const{loaded:n,loading:r,columns:l,sortedColumns:o}=(0,i.Ol)({extraKey:e}),s=(0,a.useRef)([]);return(0,a.useMemo)((()=>(!n||r||(s.current=(o||[]).reduce(((e,n)=>l[n]&&l[n].filter&&!yn[l[n].filter]?[...e,t(n,l)]:e),[])),s.current)),[n,r])};n(74648),n(23215),n(25509),n(65223),n(60321),n(41927),n(11632),n(64377),n(66771),n(12516),n(68931),n(52514),n(35694),n(52774),n(49536),n(21926),n(94483),n(16215);const En={sum:e=>e.reduce(((e,t)=>e+("number"===typeof t?t:0)),0),min:e=>{let t;return e.forEach((e=>{null!=e&&(t>e||void 0===t&&e>=e)&&(t=e)})),t},max:e=>{let t;return e.forEach((e=>{null!=e&&(t<e||void 0===t&&e>=e)&&(t=e)})),t},extent:e=>{let t,n;return e.forEach((e=>{null!=e&&(void 0===t?e>=e&&(t=n=e):(t>e&&(t=e),n<e&&(n=e)))})),[t,n]},mean:e=>{let t=0,n=0;if(e.forEach((e=>{null!=e&&(e=+e)>=e&&(++t,n+=e)})),t)return n/t},median:e=>{if(!e.length)return;if(t=e,!Array.isArray(t)||!t.every((e=>"number"===typeof e)))return;var t;if(1===e.length)return e[0];const n=Math.floor(e.length/2),a=e.sort(((e,t)=>e-t));return e.length%2!==0?a[n]:(a[n-1]+a[n])/2},unique:e=>Array.from(new Set(e.map((e=>e))).values()),uniqueCount:e=>new Set(e.map((e=>e))).size,count:e=>e.length},bn=e=>({label:e,value:e}),vn=(0,a.memo)((e=>{let{paramsKey:t,initData:n,initFilter:r}=e;const{charts:l,loaded:o,columns:s}=(0,i.Ol)(t),c=kt(t),d=(0,a.useContext)(P.ThemeContext),u=Object.keys(l).map(bn),m=xn(t.extraKey,bn),[g,p]=(0,a.useState)(n),[h,y]=(0,a.useState)(r),x=(0,i.Ak)(t);(0,a.useEffect)((()=>{p(n)}),[n]),(0,a.useEffect)((()=>{y(r)}),[r]);const E=(0,a.useMemo)((()=>{if(!l[g])return{datasets:[],labels:[]};const e=l[g].columns.reduce(((e,t)=>{const n=((e,t,n)=>e.reduce(((e,a)=>(e[a[n]]||(e[a[n]]={label:a[n],data:[]}),e[a[n]].data.push(a[t]),e)),{}))(c,t,h),a=s[t]?.summary||"count",r=En[a];return Object.keys(n).forEach((a=>{const l=r(n[a].data);e[n[a].label]={...e[n[a].label],[t]:l,label:n[a].label,sortByValue:e[n[a].label]&&e[n[a].label].sortByValue>l?e[n[a].label].sortByValue:l}})),e}),{}),t=Object.values(e).sort(((e,t)=>t.sortByValue-e.sortByValue)).slice(0,15).map((e=>{let{sortByValue:t,...n}=e;return n}));return{datasets:l[g].columns.map(((e,n)=>({backgroundColor:dn.b4[n],borderWidth:0,data:t.map((t=>t[e])),label:e,maxBarThickness:50,minBarLength:0}))),labels:t.map((e=>{let{label:t}=e;return t}))}}),[x,l,g,h,c]),b={animation:!1,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:4,boxHeight:20,title:{color:(0,f.getColor)("textLite")({theme:d})}}}},responsive:!0,scales:{x:{stacked:!0,grid:{color:(0,f.getColor)("borderSecondary")({theme:d})},afterSetDimensions:e=>{e.maxHeight=50},ticks:{callback:(e,t)=>{let n=E.labels[t];if(!n)return;let a=0;for(;n?.length>20;)n=(0,hn.P3)(n,a),a+=1;return n}}},y:{stacked:!0,grid:{color:(0,f.getColor)("borderSecondary")({theme:d})},afterSetDimensions:e=>{e.maxWidth=50}}}},[v,C]=(0,T.useHovered)({},[o]),w=(0,F.A)();return(0,a.useEffect)((()=>{w(C)}),[C]),a.createElement(f.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"50%",background:"mainChartBg",border:{side:"all",color:"mainChartBorder"},padding:[4],round:.5},a.createElement(f.Flex,{alignItems:"center","data-testid":`functionsChart${g}-selects`,gap:2},a.createElement(f.Select,{"data-ga":`functions-chart-${g}::select-data::functions-view`,"data-testid":`functionsChart${g}-dataSelect`,isLoading:!o,onChange:e=>{let{value:t}=e;return p(t)},options:u,styles:{size:"tiny",minWidth:120},value:{label:g,value:g}}),a.createElement(f.Text,{"data-testid":`functionsChart${g}-perLabel`,color:"textLite"},"per"),a.createElement(f.Select,{"data-ga":`functions-chart-${h}::select-filter::functions-view`,"data-testid":`functionsChart${h}-filterSelect`,isLoading:!o,onChange:e=>{let{value:t}=e;return y(t)},options:m,styles:{size:"tiny",minWidth:120},value:{label:h,value:h}})),a.createElement(f.Flex,{position:"relative",height:{min:60},width:{min:"100%"},ref:v},a.createElement(tn.yP,{data:E,options:b})))})),Cn=vn;var wn=n(83465),kn=n(75233),An=n(19018),In=n(5668);const Tn={dark:{publicColor:"#FF9700",privateColor:"#0075A2",serverColor:"#00a44a",clientColor:"#DB162F",otherColor:"#3E4551",appFontColor:"#AEBBBB",appFontFamily:"monospace",appFontSize:"12px",appFontWeight:"regular",borderFontColor:"#EDF0F0",borderFontFamily:"monospace",borderFontSize:"14px",borderFontWeight:"bold"},light:{publicColor:"#BFA142",privateColor:"#197EA8",serverColor:"#339979",clientColor:"#CD6364",otherColor:"#AFB5BA",appFontColor:"#526161",appFontFamily:"monospace",appFontSize:"12px",appFontWeight:"regular",borderFontColor:"#5D7070",borderFontFamily:"monospace",borderFontSize:"14px",borderFontWeight:"bold"}},Fn=(0,a.memo)((0,a.forwardRef)(((e,t)=>{let{data:n,width:r,height:l,processing:o}=e;const i=(0,a.useRef)({}),s=(0,In.xd)("theme"),c=(0,Lt.A)(n),d=(0,Lt.A)(r),u=(0,Lt.A)(l),m=(0,Lt.A)(o),g=(0,a.useRef)({}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=!e&&(0,me.Ay)(n,c);g.current=t?g.current:n.reduce(((e,t)=>(e[t.Process]||(e[t.Process]={listen:0,inbound:0,outbound:0,local:0,private:0,public:0,total:0,name:t.Process}),e[t.Process].total+=t.Count,"listen"===t.Direction?e[t.Process].listen+=t.Count:"local"===t.Direction?e[t.Process].local+=t.Count:"inbound"===t.Direction?e[t.Process].inbound+=t.Count:"outbound"===t.Direction&&(e[t.Process].outbound+=t.Count),"public"===t.RemoteAddressSpace?e[t.Process].public+=t.Count:"private"===t.RemoteAddressSpace&&(e[t.Process].private+=t.Count),e)),{});function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(7!==e.length||"#"!==e[0])throw new Error("Invalid hex color format");return`rgba(${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}, ${t})`}function o(e,t,n,a,r){const l=t/2,o=n/2;!function(e){e.selectAll(".app").each((function(e){e&&(i.current[e.name]={x:e.x,y:e.y})}))}(e);const s=An.scaleOrdinal().domain(["public","private","listenInbound","outbound","others"]).range([r.publicColor,r.privateColor,r.serverColor,r.clientColor,r.otherColor]),c=An.pie().value((e=>e.value)),d=An.arc(),f=e.selectAll(".app").data(Object.values(g.current),(e=>e.name));f.exit().transition().style("opacity",0).remove();const h=f.enter().append("g").attr("class","app").attr("transform",(e=>{const t=i.current[e.name];return`translate(${t?.x||l}, ${t?.x||o})`}));h.each((function(e){const t=An.select(this),n=c(e.d3.pie),a=e.d3.size;t.selectAll("path").data(n).enter().append("path").transition().attr("fill",((e,t)=>s(t))),t.append("text").text((e=>e.name)).attr("text-anchor","middle").attr("y",a+10).style("font-family",r.appFontFamily).style("font-size",r.appFontSize).style("font-weight",r.appFontWeight).style("fill",r.appFontColor)}));const y=h.merge(f);return y.each((function(e){const t=An.select(this),n=i.current[e.name]||function(e){return e.d3.isListener?{x:e.d3.x,y:e.d3.y}:{x:l,y:o}}(e);e.x=n.x,e.y=n.y,t.selectAll("path").data(c(e.d3.pie)).transition().attr("d",d.innerRadius(0).outerRadius(e.d3.size)),t.select("text").transition().attr("y",e.d3.size+10)})),y.call(An.drag().on("start",u).on("drag",m).on("end",p)),y}let d;function u(e,t){e.active||d.alphaTarget(1).restart(),t.fx=t.x,t.fy=t.y}function m(e,t){t.fx=e.x,t.fy=e.y}function p(e,t){e.active||d.alphaTarget(0),t.fx=null,t.fy=null}!function(n,i){let s=An.select("#d3-canvas").select("svg");((e,n,a)=>{if(t)return;const r=e/2-a,l=n/2-a,o=Math.min(2*r/3-a,2*l/3-a,Math.max(5,Math.min(e,n)/Object.keys(g.current).length)+13),i=Object.values(g.current),s={total:An.max(i,(e=>e.total)),local:An.max(i,(e=>e.local)),listen:An.max(i,(e=>e.listen)),private:An.max(i,(e=>e.private)),public:An.max(i,(e=>e.public)),inbound:An.max(i,(e=>e.inbound)),outbound:An.max(i,(e=>e.outbound))},c=An.scaleLog().domain([1,s.total]).range([13,o]).clamp(!0);let d=0,u=0,m=0,p=n-a;i.forEach((t=>{const o=An.scaleLog().domain([1,t.total+1]).range([0,r-a]),i=An.scaleLog().domain([1,t.total+1]).range([0,r-a]),f=An.scaleLog().domain([1,t.total+1]).range([0,l-a]),h=An.scaleLog().domain([1,t.total+1]).range([0,l-a]);g.current[t.name].forces={total:t.total/s.total,local:t.local/s.local,listen:t.listen/s.listen,private:t.private/s.private,public:t.public/s.public,inbound:t.inbound/s.inbound,outbound:t.outbound/s.outbound},g.current[t.name].pos={right:o(t.public+1),left:i(t.private+1),top:f(t.outbound+1),bottom:h((t.listen+t.inbound)/2+1)};const y=t.total-(t.public+t.private+t.listen+t.inbound+t.outbound);let x=a+r+g.current[t.name].pos.right-g.current[t.name].pos.left,E=a+l+g.current[t.name].pos.bottom-g.current[t.name].pos.top,b=c(t.total);t.listen===t.total&&(b=10,m===u&&50*d>2*e/3&&(d=0,m=0,u=0,p-=80),d?m>=u?(u++,x=e/2+50*u,E=p-b-(u%2===0?0:40)):(m++,x=e/2-50*m,E=p-b-(m%2===0?0:40)):(x=e/2,E=p-b),d++),g.current[t.name].d3={isListener:t.listen===t.total,x:x,y:E,size:b,pie:[{value:t.public},{value:t.private},{value:t.listen+t.inbound},{value:t.outbound},{value:y>0?y:0}]},g.current[t.name].d3.x-g.current[t.name].d3.size/2<a&&(g.current[t.name].d3.x=a+2*g.current[t.name].d3.size),g.current[t.name].d3.x+g.current[t.name].d3.size/2>e&&(g.current[t.name].d3.x=e-2*g.current[t.name].d3.size),g.current[t.name].d3.y-g.current[t.name].d3.size/2<a&&(g.current[t.name].d3.y=a+2*g.current[t.name].d3.size),g.current[t.name].d3.y+g.current[t.name].d3.size/2>n&&(g.current[t.name].d3.y=n-2*g.current[t.name].d3.size)}))})(r,l,n),(s.empty()||e)&&(s=s.empty()?An.select("#d3-canvas").append("svg").attr("width",r).attr("height",l):s.attr("width",r).attr("height",l),function(e,t,n,r,l){An.select("#d3-canvas").selectAll("svg > *").remove();const o=n/2,i=e.append("defs").append("linearGradient").attr("id","clientsGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");i.append("stop").attr("offset","0%").style("stop-color",a(l.clientColor,1)),i.append("stop").attr("offset","100%").style("stop-color",a(l.clientColor,0));const s=e.append("g").attr("class","topRect");s.append("rect").attr("x",0).attr("y",0).attr("width","100%").attr("height",r/2).style("fill","url(#clientsGradient)"),s.append("text").text("Clients").attr("x","50%").attr("y",12).attr("text-anchor","middle").style("font-family",l.borderFontFamily).style("font-size",l.borderFontSize).style("font-weight",l.borderFontWeight).style("fill",l.borderFontColor);const c=e.append("defs").append("linearGradient").attr("id","serversGradient").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");c.append("stop").attr("offset","0%").style("stop-color",a(l.serverColor,1)),c.append("stop").attr("offset","100%").style("stop-color",a(l.serverColor,0));const d=e.append("g").attr("class","bottomRect");d.append("rect").attr("x",0).attr("y","100%").attr("width","100%").attr("height",r/2).attr("transform",`translate(0, -${r/2})`).style("fill","url(#serversGradient)"),d.append("text").text("Servers").attr("x","50%").attr("y","100%").attr("text-anchor","middle").attr("transform","translate(0, -4)").style("font-family",l.borderFontFamily).style("font-size",l.borderFontSize).style("font-weight",l.borderFontWeight).style("fill",l.borderFontColor);const u=e.append("defs").append("linearGradient").attr("id","publicGradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%");u.append("stop").attr("offset","0%").style("stop-color",a(l.publicColor,1)),u.append("stop").attr("offset","100%").style("stop-color",a(l.publicColor,0));const m=e.append("g").attr("class","rightRect");m.append("rect").attr("x","100%").attr("y",0).attr("transform",`translate(-${r/2}, 0)`).attr("width",r/2).attr("height","100%").style("fill","url(#publicGradient)"),m.append("text").text("Public").attr("x","100%").attr("y","50%").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`rotate(90, ${t-r/4}, ${o})`).style("font-family",l.borderFontFamily).style("font-size",l.borderFontSize).style("font-weight",l.borderFontWeight).style("fill",l.borderFontColor);const g=e.append("defs").append("linearGradient").attr("id","privateGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");g.append("stop").attr("offset","0%").style("stop-color",a(l.privateColor,1)),g.append("stop").attr("offset","100%").style("stop-color",a(l.privateColor,0));const p=e.append("g").attr("class","leftRect");p.append("rect").attr("x",0).attr("y",0).attr("width",r/2).attr("height","100%").style("fill","url(#privateGradient)"),p.append("text").text("Private").attr("x",r/2).attr("y","50%").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform",`rotate(-90, ${r/2-10}, ${o})`).style("font-family",l.borderFontFamily).style("font-size",l.borderFontSize).style("font-weight",l.borderFontWeight).style("fill",l.borderFontColor)}(s,r,l,n,i));const c=o(s,r,l,0,i);d=An.forceSimulation(Object.values(g.current)).force("x",An.forceX((e=>e.d3.x)).strength((e=>e.d3.isListener?.2:.1))).force("y",An.forceY((e=>e.d3.y)).strength((e=>e.d3.isListener?.2:.1))).force("collision",An.forceCollide((e=>1.1*e.d3.size+15)).strength(1)).on("tick",(()=>{c.each((e=>{e.x>r-n?e.x=r-n:e.x<n&&(e.x=n),e.y>l-n?e.y=l-n:e.y<n&&(e.y=n)})),c.attr("transform",(e=>`translate(${e.x}, ${e.y})`))}))}(40,Tn[s]||Tn.dark)};return(0,a.useLayoutEffect)((()=>{o||r&&l&&p(d!==r||u!==l||m!==o)}),[n,r,l,s,o]),a.createElement(f.Flex,{id:"d3-canvas",ref:t,width:"100%",height:"100%",flex:!0,round:!0,overflow:"hidden"})}))),Sn={"network-viewer":Fn},Kn=(0,a.forwardRef)(((e,t)=>{let{id:n,resizeHandle:r,style:l,paramsKey:o,containerWidth:i,resizing:s,...c}=e;const d=kt(o),g=Sn[n],[p,h]=(0,T.useHovered)({},[]),y=(0,F.A)();(0,a.useEffect)((()=>{y(h)}),[h]);const[x,{width:E,height:b}]=(0,u.A)();return a.createElement(f.Flex,{ref:(0,f.mergeRefs)(t,x),position:"relative",style:l},a.createElement(g,(0,m.A)({data:d,key:n,id:n,role:"graphics-object","aria-roledescription":"chart",ref:p,containerWidth:i,width:E,height:b,processing:s},c)),r)})),$n=(0,a.memo)((e=>{let{paramsKey:t,customCharts:n,containerWidth:r}=e;const l=Object.values(n).filter((e=>!!Sn[e.type])),o=l[0]?.type,[i,s]=(0,a.useState)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[(0,wn.bP)(e,{left:0,top:0,width:12,height:9,id:e,...t,chartId:e,minWidth:12,maxWidth:12,minHeight:4,static:!1,dashboardable:!0})]}(o,{paramsKey:t,containerWidth:r}));return l.length?a.createElement(f.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"100%",background:"mainChartBg",round:.5},a.createElement(kn.A,{rootId:t.extraKey,containerId:t.extraKey,onDragEnd:(e,t)=>{(0,wn.Q)(t),s(e)},items:i,containerWidth:r-40,Item:Kn,rearrangeable:!1})):"No chart found"}));var Pn=n(36196),zn=n(28973),Ln=n(13752),Nn=n(92815),Mn=n(72582),On=n(80925),Bn=n(22332),Rn=n(6504);const Dn=e=>{let{fn:t,histograms:n,selectedId:r,disabled:l}=e;const o=(0,Bn.useChart)(),s=(0,a.useMemo)((()=>n.map((e=>{let{id:t,name:n}=e;return{value:t,label:n,"data-track":o.track(`select-histogram-${n}`)}}))),[n]),[c,d]=(0,i.UB)({param:"histogram",extraKey:t,defaultValue:r,flavour:"val"});return a.createElement(f.Menu,{value:c,items:s,dropProps:{align:{top:"bottom",right:"right"},"data-toolbox":o.getId()},onChange:e=>d(e),"data-track":o.track("selectHistogram"),dropdownProps:{width:"150px",height:"300px"}},a.createElement(Rn.Button,{disabled:l},"Source"))},Vn=(0,a.memo)(Dn),_n=e=>t=>`histogram::${e.getAttribute("id")}::${t}`,jn={width:"108px",height:"77px"},Wn=e=>{let{nodeId:t,fn:n,paramsKey:r}=e;const{availableHistograms:l,histogram:o,help:s,pagination:c,data:u}=(0,i.Ol)(r),m=(0,i.nm)(),g=(0,On.eg)(),p=(0,a.useRef)();p.current=()=>Promise.resolve(o?.chart);const[h,y]=(0,a.useMemo)((()=>{const e=`${t}-${n}`,a=g.makeChart({attributes:{id:e,info:s},getChart:()=>p.current(),makeTrack:_n});return g.getRoot().appendChild(a),[a,e]}),[t,n]);(0,a.useEffect)((()=>h.trigger("fetch")),[o]);const[x,E]=(0,i.x9)();return(0,a.useEffect)((()=>{if(h)return(0,zn.unregister)(h.on("highlightClick",(e=>E(e+1e3*o.chart.view.update_every))),h.on("highlightEnd",(()=>E(null))))}),[h,o]),(0,a.useEffect)((()=>!!l&&h.updateAttributes({toolboxElements:[e=>{let{disabled:t}=e;return a.createElement(Vn,{histograms:l,fn:n,selectedId:o.id,disabled:t})},Mn.default,Ln.default,Nn.default],title:o?.chart?.view?.title})),[l,n]),(0,a.useEffect)((()=>{if(!m||!h||!c)return;const e=u[m],t=Math.floor(e?.[c?.column]/1e6);t&&!isNaN(t)&&h.updateAttribute("hoverX",[1e3*Math.floor(t-t%o.chart.view.update_every),null])}),[u,o,m]),(0,a.useEffect)((()=>{x&&h&&c&&h.updateAttribute("clickX",[x,null])}),[x]),(0,a.useEffect)((()=>()=>h&&h.destroy()),[h]),a.createElement(f.Flex,{flex:!1,width:"100%",height:75},h?a.createElement(Pn.A,{"data-chartid":y,chart:h,overflow:"hidden",hasFilters:!1}):a.createElement(d.A,{iconProps:jn,title:"Loading chart..."}))};var qn=n(12602),Hn=n(6586),Gn=n(67742);const Un=e=>{let{transactionId:t,onCancel:n}=e;const[r,l]=(0,a.useState)(0),[o,,i,s]=(0,K.A)(),[c,d]=(0,a.useState)(null),{loaded:u,value:m,hasError:g,refresh:p}=(0,h.iY)(t);return(0,Gn.A)(p,1e3),(0,a.useEffect)((()=>{u&&(g||(m.progress<100&&m.ms>1e3?(i(),l(m.progress)):s()))}),[u,g]),(0,a.useEffect)((()=>{c!==t&&d(null)}),[t]),t&&o&&c!==t?a.createElement(f.Layer,{backdrop:"3px"},a.createElement(f.Flex,{column:!0,gap:2,background:"modalBackground",padding:[3,4],round:!0},a.createElement(f.Text,null,"Transaction ",t," is taking more than expected."),a.createElement(f.ProgressBar,{background:"borderSecondary",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":"trnasaction-progress","data-transaction-id":t,height:2,width:`${r}%`}),a.createElement(f.Flex,{gap:2,alignItems:"center"},a.createElement(f.Button,{warning:!0,onClick:()=>n()},"Cancel"),a.createElement(f.Text,null,"or"),a.createElement(f.Button,{padding:[0],onClick:()=>{d(t),s()},flavour:"borderless"},"Wait for it to finish")))):null},Zn={extraKey:"fn"},Yn=(0,a.memo)((e=>{let{margin:t,defaultCharts:n,hasCustom:r,...l}=e;const[o,i]=(0,K.A)(!r);return n?.length?a.createElement(f.Flex,{column:!0},a.createElement(f.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:i,cursor:"pointer"},a.createElement(f.TextMicro,{color:"textLite"},o?"Collapse":"Expand"," charts"),a.createElement(f.Icon,{name:"chevron_down",color:"textLite",rotate:o?0:3})),a.createElement(f.Collapsible,{open:o},a.createElement(f.Flex,{gap:4,margin:t},n.map(((e,t)=>{let[n,r]=e;return a.createElement(Cn,(0,m.A)({key:t,initData:n,initFilter:r},l))}))))):null})),Xn=(0,a.memo)((e=>{let{margin:t,hasHistogram:n=!1,...r}=e;const[l,o]=(0,K.A)(!0);return n?a.createElement(f.Flex,{column:!0},a.createElement(f.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:o,cursor:"pointer",alignSelf:"end"},a.createElement(f.TextMicro,{color:"textLite"},l?"Collapse":"Expand"," histogram"),a.createElement(f.Icon,{name:"chevron_down",color:"textLite",rotate:l?0:3})),a.createElement(f.Collapsible,{open:l},a.createElement(f.Flex,{gap:4,margin:t},a.createElement(Wn,r)))):null})),Jn=(0,a.memo)((e=>{let{margin:t,...n}=e;const[r,l]=(0,K.A)(!0);return n.customCharts?a.createElement(f.Flex,{column:!0},a.createElement(f.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:l,cursor:"pointer"},a.createElement(f.TextMicro,{color:"textLite"},r?"Collapse":"Expand"," chart"),a.createElement(f.Icon,{name:"chevron_down",color:"textLite",rotate:r?0:3})),a.createElement(f.Collapsible,{open:r},a.createElement(f.Flex,{gap:4,margin:t},a.createElement($n,n)))):null})),Qn={fn:{Chart:Yn,CustomChart:Jn,loadingMessage:"Loading function...",item:"functions"},logs:{Chart:Xn,CustomChart:Jn,loadingMessage:"Loading logs...",item:"logs",missingMessage:a.createElement(a.Fragment,null,"In this room, no node has logs collection configured."," ",a.createElement("a",{href:"https://learn.netdata.cloud/docs/logs/",target:"_blank",rel:"noopener noreferrer"},"Learn about monitoring logs with Netdata"),".")},feed:{Chart:fn,CustomChart:Jn,loadingMessage:"Loading events...",item:"events"}},ea={table:Kt},ta={ErrNoEligibleNodeRequested:"There are no eligible nodes.",default:"Something went wrong."},na=(0,a.memo)((e=>{let{paramsKey:t=Zn,testIdPrefix:n="functions",availableFns:r,availableFnsLoaded:l,hasError:s,containerWidth:c,...u}=e;const{Chart:g,loadingMessage:p}=Qn[t.extraKey]||Qn.fn,[E,b]=(0,i._H)(t),v=E[0],w=(0,i.rc)(t),k=(0,y.a7)({...t,extraKey:v||t?.extraKey,merge:!1}),{infoLoaded:A,loaded:S,data:K,error:$,type:P,retentionWarning:z,defaultCharts:L,histogram:N,missingRequired:M,requiredParams:O,customCharts:B,transactionId:D}=(0,i.Ol)(t),V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t]=e,n=(0,h.xY)(t,"name");return 0===e.length?"on your nodes":1===e.length&&n?`on ${n}`:"on your selected node"}(k);(0,a.useEffect)((()=>{v||!r?.[0]?.name||s||b([r.reduce(((e,t)=>"undefined"===typeof e.priority||e.priority<t.priority?e:t),r.find((e=>"processes"===e.name))||r[0]).slug])}),[l,v]);const[_,j]=(0,T.useHovered)({},[S]),W=(0,F.A)();(0,a.useEffect)((()=>{W(j)}),[j]);const q=en(k,v,t),[H,G]=((e,t,n)=>{const r=(0,Z.vt)(),l=(0,x.QW)(),s=(0,R.mQ)(),c=(0,o.l6)("pollingInterval",{flavour:"int",...n}),d=(0,o.l6)("slice",{defaultValue:!0,flavour:"bool",...n}),[u,m]=(0,i.WH)(n),[g,p]=(0,i.x9)(),f=(0,a.useRef)();f.current=u;const y=e=>{let{skip:t,data:n={}}=e;!t&&n.data?((Zt[n.type]||Zt.default)(m,n),p((e=>null!==e?null:e))):m((e=>({...e,...n,loading:!1,transactionId:null})))},{fetch:E,isEnabled:b}=Yt[t]||Yt.default,[v,C,w,k]=Xt(g),A=(0,Lt.A)(k),T=(0,a.useRef)();T.current=v;const F=(0,a.useRef)();F.current=u.lastModified;const S=(0,a.useRef)();S.current=u.anchorAfter;const K=(0,x.ID)(),$=(0,i.Be)(n),P=(0,Lt.A)($,!0),[z]=(0,i.UB)({param:"histogram",extraKey:t,flavour:"val"}),L=(0,h.yN)(e),[{loading:N,token:M}]=(0,I.f7)();(0,a.useEffect)((()=>{"feed"!==t&&(F.current=null,S.current=null,m({...Ot.zb[u.type]||Ot.zb.default,type:u.type}))}),[e?.[0],t]);const O=$[Object.keys($).find((e=>u.filtersToRefresh[e]&&!(0,me.Ay)(P?.[e],$[e])))],B=(0,a.useRef)();B.current=!1,(0,a.useEffect)((()=>{"feed"!==t&&(B.current=!0)}),[!!u.requiredParams.length&&O]),(0,a.useEffect)((()=>{P&&!Pt()(P,$)&&u.loaded&&(F.current=null,S.current=null,m((e=>({...e,lastModified:null,anchorAfter:null,anchorBefore:null,offset:0,transactionId:null}))))}),[!!u.aggregations&&$]);const[D]=(0,i.oV)({param:"selectedFacets",extraKey:t||n.extraKey,flavour:"arr",defaultValue:null});(0,a.useEffect)((()=>{u.loaded&&(F.current=null,S.current=null,m((e=>({...e,lastModified:null,anchorAfter:null,anchorBefore:null,offset:0,transactionId:null}))))}),[C,d,D,z]);const V=(0,a.useRef)(),_=(0,a.useRef)();_.current=function(){let{checkPeriod:n,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=T.current(),i=(0,zt.A)();return m((e=>({...e,tail:!!a.tail,loading:!0,requestedPeriod:o,transactionId:i}))),n&&f.current.tail&&f.current.requestedPeriod.after<o.after&&!S.current&&f.current.requestedPeriod.before-f.current.requestedPeriod.after===o.before-o.after?Promise.resolve({skip:!0}):(V.current=E({roomId:K,spaceId:r,nodeIds:e,cloudNodeIds:L,fn:t,roomSlug:l,filters:$,slice:d,...o,...a,histogram:z,facets:D,acceptedParams:u.acceptedParams,last:200,v:u.v,transactionId:i}),V.current)};const j=e=>{const{merge:t,direction:n,dataOnly:a,tail:r}=e||{};!e?.response?.status||400!==e.response.status&&304!==e.response.status?(e?.response?.data&&(e=e.response.data),m((t=>({...t,error:e,loaded:!0,loading:!1,transactionId:null}))),p((e=>null!==e?null:e))):m((l=>({...l,loaded:!0,loading:!1,transactionId:null,...!!e&&{merge:t,direction:n,dataOnly:a,tail:r}})))},W=(0,Nt.A)((()=>({enabled:!u.missingRequired&&u.infoLoaded&&!N&&b({nodeIds:e,fn:t,roomId:K,after:C}),fetch:()=>_.current(!s&&C<0?{if_modified_since:F.current,...F.current&&{direction:"forward",merge:u.hasHistory,tail:!0,delta:!0,data_only:!0,anchor:S.current},reset:B.current}:!s&&((e,t)=>{let{after:n,before:a}=e;return t<a&&t>n})(T.current(),k)?{anchor:1e3*k,data_only:!!F.current,reset:B.current}:{direction:"backward",data_only:!!F.current,checkPeriod:!0,reset:B.current}),onFail:j,onPollingFail:j,onReceive:y,onBlurMode:()=>f.current.loading&&m((e=>({...e,loading:!1,transactionId:null}))),polling:!s&&C<0,pollingOptions:{pollingInterval:1e3*(c||u.updateEvery),shouldPause:!0},force:!0,skip:!!A&&!k})),[s,u.infoLoaded,u.missingRequired,K,e?.length,e?.[0],t,c,(!!u.aggregations||!!u.requiredParams.length)&&!!P&&$,D,C,w,N,k,d,M,z]);return[(0,a.useCallback)((e=>{if(f.current.loadingMore)return;m((e=>({...e,loadingMore:!0})));const t=_.current(e);return t.then(y).catch(j).finally((()=>m((e=>({...e,loadingMore:!1,transactionId:null}))))),t}),[m]),(0,a.useCallback)((()=>{W?.clearRef?.current?.promise?.cancel?.(),clearTimeout(W?.clearRef?.current?.timeoutId),V.current?.cancel?.(),m((e=>({...e,loaded:!0,loading:!1,loadingMore:!1,transactionId:null})))}),[m])]})(k,v,t);if(!l)return a.createElement(d.A,{title:p,"data-testid":`${n}Loading`});const{item:U="items",missingMessage:Y}=Qn[t.extraKey]||{};if(q)return a.createElement(C.A,{title:`${(0,hn.Zr)(U)} couldn't be loaded`,message:"ErrAllNodesFailed"==q.errorMsgKey?`You do not have permissions to load ${U}`:ta[q.errorMsgKey]||ta.default,footer:"ErrNoEligibleNodeRequested"==q.errorMsgKey?a.createElement(a.Fragment,null,a.createElement(qn.A,null,a.createElement(f.Text,{color:"primary"},"Upgrade to Business")),a.createElement(f.Text,null,"or"),a.createElement(Hn.A,null,a.createElement(f.Text,{color:"primary"},"Change your active node selection to unlock it."))):null});if(s||l&&!r.length)return a.createElement(C.A,{title:`${(0,hn.Zr)(U)} couldn't be loaded`,message:Y||`We couldn't find any available ${U}.`});if($&&"canceled"!==$){if("ErrNodeResourceNotFound"===$?.errorMsgKey)return a.createElement(C.A,{message:"Please review your selection and try again.",title:`${"feed"===t.extraKey?"Events are":`Function "${w}" is`} not available ${V}.`});if(!K?.length)return a.createElement(C.A,{title:("feed"===t.extraKey?"Events":`Function "${w}"`)+" couldn't be loaded",message:"ErrForbidden"===$?.errorMsgKey?"Forbidden":$?.errorMessage||""})}if(A&&M)return a.createElement(C.A,{title:"Required filters are needed",message:`Function "${w}" needs: ${O.map((e=>e.name)).join(", ")}.`,footer:"Check them on the right sidebar!"});const X=ea[P]||ea.table;return a.createElement(f.Box,{overflow:{horizontal:"hidden",vertical:"auto"},column:!0,padding:[4,4,0],gap:2},a.createElement(ue,{nodeIds:k,onRefresh:H,onCancel:G,paramsKey:t}),S?a.createElement(a.Fragment,null,a.createElement(Un,{transactionId:D,onCancel:G}),a.createElement(Jn,{paramsKey:t,testIdPrefix:n,customCharts:B,refetch:H,fn:v,nodeIds:k,containerWidth:c}),a.createElement(g,{paramsKey:t,testIdPrefix:n,defaultCharts:L,hasCustom:!!B,hasHistogram:!!N,refetch:H,fn:v,nodeIds:k,containerWidth:c}),a.createElement(X,(0,m.A)({key:v[0],"data-testid":`${n}Component`,paramsKey:t,refetch:H,ref:_,selectedFn:v[0],containerWidth:c},u)),!K?.length&&a.createElement(f.Flex,{column:!0,justifyContent:"center",alignItems:"center",alignSelf:"center",margin:["feed"===t.extraKey?3:30,0,0],gap:3},a.createElement(f.H3,null,"No results to display"),a.createElement(f.Text,{color:"textDescription",textAlign:"center"},"Double-check your search or filters and dates and try again with different conditions"),z&&a.createElement(f.Text,{color:"text",textAlign:"center"},z))):a.createElement(d.A,{title:p,"data-testid":`${n}Loading`}))})),aa=na;var ra=n(15255);const la=e=>{const t=(0,I.OS)();return a.createElement(f.Button,(0,m.A)({label:"Get a fresh agent token",onClick:t},e))},oa="Functions expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Functions directly on a  Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",ia={notLoggedIn:{title:"Sign in to Netdata to use this function",description:oa,footer:a.createElement(k.default,null)},notClaimed:{title:"Connect this agent to Netdata to use this function",description:oa,footer:a.createElement(A.A,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:oa,footer:a.createElement(f.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use functions.")},bearerError:{title:"You are not authorized to use this function",description:oa,footer:a.createElement(la,null)},default:{title:"Internal error",description:"Something went wrong, please reload the page"}},sa={extraKey:"fn"},ca=e=>{let{paramsKey:t=sa,hasError:n,refreshAvailableFns:r,availableFnsLoaded:l,availableFns:o,...s}=e;const c=(0,h.dN)(),d=(0,i.Ak)(t),u=(0,b.A)({...t,extraKey:d||t.extraKey}),[g,f]=(0,y.Oj)({...t,extraKey:d||t?.extraKey}),v=(0,y.w7)({...t,extraKey:d||t?.extraKey,emptyIfAll:!1,merge:!0}),k=(0,i.E)(t);(0,a.useEffect)((()=>k),[d,g?.[0]]),(0,a.useEffect)((()=>{if(u||!d)return;const e=o.find((e=>e.slug===d))?.nodes;if(!e)return;if(p()(g,v).length&&e[g[0]])return;const t=v.find((t=>e[t]));t&&f([t])}),[u,f,v.length,d,o]);const[A]=(0,E.Q8)(),[{bearerProtection:T,error:F,token:S}]=(0,I.f7)(),{error:K}=(0,i.Ol)(t),$=(0,x.GJ)(),[{canBeClaimed:P,cloudStatus:z}]=(0,ra.RJ)();if((0,a.useEffect)((()=>{n&&S&&r()}),[z,S]),(0,a.useEffect)((()=>{S&&K&&k((e=>({...e,error:""})))}),[S]),!c.length)return a.createElement(w,{paramsKey:t});if($&&(K||n||F&&T)){const{title:e,description:t,footer:n}=(e=>{let{userStatus:t,userNodeStatus:n,accessError:a,canBeClaimed:r,cloudStatus:l,error:o}=e;return ia[t]?ia[t]:a?ia.notLoggedIn:r?ia.notClaimed:ia[n]?ia[n]:412===o.status?ia.bearerError:o.status>=400?{title:`Error - ${o.status}`,description:o.errorMessage||"Something went wrong"}:ia.default})({...A,bearerError:F,canBeClaimed:P,cloudStatus:z,error:K});return a.createElement(C.A,{title:e,message:t,footer:n})}return a.createElement(aa,(0,m.A)({testIdPrefix:"fn",paramsKey:t,availableFnsLoaded:l,availableFns:o},s))},da={extraKey:"feed"},ua=e=>{let{paramsKey:t=da,...n}=e;(0,b.A)(t);const r=(0,i.E)(t);return(0,a.useEffect)((()=>r),[]),a.createElement(aa,(0,m.A)({testIdPrefix:"feed",paramsKey:t},n))};var ma=n(20859),ga=n(59846);const pa={fn:!0,logs:!0},fa=(0,a.memo)((e=>{let{roomId:t,flavour:n,availableFns:r}=e;const l=(e=>{const t=pa[e];return(0,a.useMemo)((()=>({Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasFn:t},node:{textColor:"textFocus",showFn:t,requireFn:t}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale"},node:{textColor:"textFocus",disabled:t}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline"},node:{textColor:"textLite",disabled:t}}})),[e])})(n),o=(e=>{const{aggregations:t}=(0,i.Ol)({extraKey:e});return(0,a.useMemo)((()=>t?.node_ids?t.node_ids.buckets.reduce(((e,t)=>({...e,[t.key]:t.hits.doc_count})),{}):null),[t])})(n),s=pa[n],c=(0,i.Ak)({extraKey:n}),d=(0,a.useMemo)((()=>Array.isArray(r)&&r.find((e=>e.slug===c))?.nodes||null),[c,r]),u=(0,a.useCallback)((e=>!!d&&!d[e]),[d]),g=(0,a.useCallback)((e=>p()(d?Object.keys(d):[],e)),[d]);return s&&!d?null:a.createElement(ga.A,{title:"Nodes",testIdPrefix:"nodes",baseKey:t,extraKey:n,param:"selectedNodeIds",multi:"feed"===n},a.createElement(ma.Ay,(0,m.A)({key:n,baseKey:t,extraKey:c||n,statusProps:l,background:"mainBackground",itemProps:{padding:[1,1,1,.5]},searchMargin:[0,0,1],height:{max:"300px"},multi:"feed"===n,nodeCounts:o},s&&{useFilteredIds:g},{checkIsDisabled:u})))})),ha=fa;var ya=n(82700);const xa=e=>e.name,Ea=e=>e.slug,ba=(0,a.memo)((e=>{let{param:t,baseKey:n,extraKey:r,testIdPrefix:l,title:o,items:i=[],multi:s=!1}=e;return i.length?a.createElement(ga.A,{title:o,testIdPrefix:l,baseKey:n,extraKey:r,param:t,multi:s},a.createElement(ya.Ay,{param:t,baseKey:n,extraKey:r,testIdPrefix:l,collection:i,multi:s,getValue:Ea,getLabel:xa})):null}));var va=n(83488);const Ca=e=>e.id,wa={string:(e,t)=>e.localeCompare(t,void 0,{sensitivity:"accent",ignorePunctuation:!0}),integer:(e,t)=>e-t},ka={table:function(e){let{param:t,columns:n,aggregatedView:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e.reduce(((e,r)=>(e[r[t]]={count:(e[r[t]]?.count||0)+(r.hidden?0:1),type:n[t]?.type,...a&&{actualCount:(e[r[t]]?.actualCount||0)+(r.hidden?0:r[a.column]||1),actualCountLabel:a.aggregatedLabel,countLabel:a.resultsLabel}},e)),{})).map((e=>{let[t,n]=e;return{id:t,...n}})).sort(((e,t)=>(wa[e.type]||wa.integer)(e.id,t.id)))},default:n.n(va)()},Aa=e=>{let{param:t,baseKey:n,extraKey:r,filtersKey:l,testIdPrefix:s,title:c,defaultExpanded:d=!1}=e;const u=(e=>{let{extraKey:t,filtersKey:n,param:r}=e;const l=kt({extraKey:t,omit:r,keepAll:!0}),s=(0,o.l6)(r,{extraKey:n,flavour:"arr"}),c=(0,i.Ol)({key:"type",extraKey:t}),d=ka[c]||ka.default,{columns:u,aggregatedView:m}=(0,i.Ol)({extraKey:t});return(0,a.useMemo)((()=>d(l,{param:r,columns:u,aggregatedView:m})),[r,l,s])})({param:t,extraKey:r,filtersKey:l});return u&&u.length?a.createElement(ga.A,{title:c,testIdPrefix:s,baseKey:n,extraKey:l,param:t,defaultIsOpen:d},a.createElement(ya.Ay,{param:t,baseKey:n,extraKey:l,testIdPrefix:s,collection:u,capitalized:!1,getValue:Ca,getLabel:Ca})):null};var Ia=n(73700);const Ta=e=>{let{param:t,baseKey:n,extraKey:r,filtersKey:l,testIdPrefix:s,title:c,defaultExpanded:d=!1}=e;const{columns:u}=(0,i.Ol)({extraKey:r}),[m,g]=(0,o.r$)(t,{extraKey:l,flavour:"arr",defaultValue:[]}),p=(0,a.useCallback)((0,Ia.n)(10,(e=>{let{min:t,max:n}=e;return g([t,n])})),[]);if(!u[t])return null;const h=1*(u[t].min||0),y=1*(u[t].max||0);return a.createElement(ga.A,{title:c,testIdPrefix:s,baseKey:n,extraKey:l,param:t,defaultIsOpen:d,showCounter:!1},a.createElement(f.Box,{padding:[2,0],width:"100%"},a.createElement(f.MultiRangeInput,{min:h,max:y,onChange:p,initMin:m[0]?1*m[0]:h,initMax:m[1]?1*m[1]:y,step:(y-h)/20})))},Fa=(e,t)=>({key:e,type:t[e].filter,defaultExpanded:t[e].defaultExpandedFilter}),Sa={multiselect:Aa,range:Ta},Ka=e=>{let{baseKey:t,extraKey:n}=e;const r=(0,i.Ak)({extraKey:n}),l=(e=>xn(e,Fa))(n);return l.map((e=>{const l=Sa[e.type]||Sa.multiselect;return a.createElement(l,{key:e.key,title:e.key,testIdPrefix:"function",baseKey:t,extraKey:n,filtersKey:`${r||n}Filters`,param:e.key,defaultExpanded:e.defaultExpanded})}))},$a=e=>e.name||e.id,Pa=e=>e.id,za=(0,a.memo)((e=>{let{title:t,options:n,param:r,baseKey:l,filtersKey:o,testIdPrefix:i,multi:s=!0,defaultIsOpen:c=!1,required:d=!1}=e;const[u,m]=(0,K.A)(!1),g=(0,a.useMemo)((()=>n?.length?n.filter((e=>"number"!==typeof e.count||e.count>0)):null),[n]);return n?.length?a.createElement(ga.A,{title:t,testIdPrefix:i,baseKey:l,extraKey:o,param:r,defaultIsOpen:c,required:d,multi:s,configElements:e=>{let{isOpen:t}=e;return t&&g?.length!==n?.length&&a.createElement(f.Button,{padding:[0],flavour:"borderless",onClick:e=>{e.stopPropagation(),m()},"data-testid":`${i}-filter-resetAll`,label:u?"Show zeros":"Hide zeros",tiny:!0,neutral:!0})}},a.createElement(ya.Ay,{param:r,baseKey:l,extraKey:o,testIdPrefix:i,collection:u?g:n,capitalized:!1,getValue:Pa,getLabel:$a,multi:s})):null})),La={nodes:!0},Na=e=>{let{baseKey:t,extraKey:n}=e;const r=(0,i.Ak)({extraKey:n}),l=(0,i.Ph)(n),{columns:o}=(0,i.Ol)({extraKey:n});return l.length?l.map((e=>La[e.id]?null:a.createElement(za,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:`${r||n}Filters`,defaultIsOpen:o[e.id]?.defaultExpandedFilter}))):null},Ma={select:!0},Oa=(0,a.memo)((e=>{let{baseKey:t,extraKey:n}=e;const r=(0,i.Ak)({extraKey:n}),[{requiredParams:l,infoLoaded:o},s]=(0,i.WH)({extraKey:n}),[c,d]=(0,i.ZY)({extraKey:r||n});return(0,a.useEffect)((()=>{if(!o||!l.length)return;const e=l.reduce(((e,t)=>{if(!t.options?.length||c[t.id]?.length)return e;const n=t.options.filter((e=>!!e.defaultSelected));return e[t.id]=n.length?n.map((e=>e.id)):[t.options[0].id],e}),{});d(e)}),[o]),(0,a.useEffect)((()=>{o&&(l.length?c&&s((e=>({...e,missingRequired:!!l.length&&!l.every((e=>!!e.options?.length&&(Array.isArray(c[e.id])?!!c[e.id]?.length:!!c[e.id])))}))):s((e=>({...e,missingRequired:!1}))))}),[o,l,c]),l.map((e=>a.createElement(za,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:`${r||n}Filters`,multi:!Ma[e.type],defaultIsOpen:!0,required:!0})))}));var Ba=n(93155);const Ra=(0,a.memo)((e=>{let{baseKey:t,extraKey:n}=e;const r=(0,i.Ak)({extraKey:n}),{alphabetical:l,columns:o,infoLoaded:s,aggregations:c}=(0,i.Ol)({extraKey:n}),[,d]=(0,i.oV)({param:"selectedFacets",extraKey:r||n,flavour:"arr"});return(0,a.useEffect)((()=>{d(c.map((e=>e.id)))}),[]),Ba.gf&&s?a.createElement(za,{key:"facets",title:"Facets to use",options:l.reduce(((e,t)=>("facet"!==o[t]?.filter||e.push({name:o[t].displayName,id:t}),e)),[]),param:"selectedFacets",testIdPrefix:"function",baseKey:t,filtersKey:r||n,multi:!0}):null})),Da=Ra,Va=(0,a.memo)((e=>{let{flavour:t,availableFns:n}=e;const r=(0,x.ID)(),{loaded:l,aggregations:o,error:s}=(0,i.Ol)({extraKey:t}),c=(0,i.Ak)({extraKey:t})||t,d=(0,y.a7)({extraKey:c,merge:!1}),u="feed"===c?r:d?.[0]||r;return a.createElement(f.Flex,{column:!0,overflow:{vertical:"auto"},padding:[0,3,30]},"feed"!==t&&a.createElement(ba,{title:"Function",testIdPrefix:"function",baseKey:r,extraKey:t,param:"selectedFn",items:n}),a.createElement(ha,{roomId:r,flavour:t,availableFns:n}),a.createElement(Oa,{baseKey:u,extraKey:t}),l&&!o&&!s&&a.createElement(Ka,{baseKey:u,extraKey:t}),l&&o&&!s&&a.createElement(a.Fragment,null,a.createElement(Na,{baseKey:u,extraKey:t}),"logs"===t&&a.createElement(Da,{baseKey:u,extraKey:t})))})),_a=Va;var ja=n(12352),Wa=n(50065),qa=n(18682);const Ha=e=>{let{data:t}=e;return a.createElement(Wa.A,{name:"Files"},a.createElement(f.Flex,{gap:1,padding:[0,1],alignItems:"center"},a.createElement(f.Box,{sx:{fontWeight:"500",letterSpacing:"1px"},as:f.Text,color:"textLite"},"{;}"),a.createElement(f.TextSmall,null,"Copy data as"),a.createElement(f.Flex,{cursor:"pointer",gap:1,onClick:(0,qa.C)(JSON.stringify(t),{text:"JSON copied to clipboard"})},a.createElement(f.TextSmall,{color:"primary"},"json"),a.createElement(f.Icon,{color:"primary",size:"small",name:"copy"}))))},Ga=function(){let{data:e={},columns:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"fn";return Object.entries(e).sort(((e,n)=>{let[a]=e,[r]=n;return(t[a]?.displayName||a).localeCompare(t[r]?.displayName||r,void 0,{sensitivity:"accent",ignorePunctuation:!0})})).reduce(((e,n)=>{let[o,i]=n;const s=a?`${a}.${t[o]?.displayName||o}`:t[o]?.displayName||o;if(t[o]?.dummy)return e;if("feed"!==l&&!t[o])return e;const c=Array.isArray(i);if(c&&"object"===typeof i[0]&&null!==i[0]||c&&i.length>1)e.push([s,JSON.stringify(i)]),r[s]=i;else if(i&&"object"===typeof i)Ga({data:i},e,s,r,l);else{if(null===i)return e;e.push([s,c?i.length>1?`[${i.join(", ")}]`:i[0]:i]),r[s]=c?i.length>1?`[${i.join(", ")}]`:i[0]:i}return e}),n)},Ua=(0,P.default)(f.Flex).withConfig({displayName:"sidebarInfo__Container",componentId:"sc-18vn5bm-0"})(["*{font-family:monospace;letter-spacing:0.09px;line-height:13px;font-size:12px;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word;}"]),Za=e=>{let{selectedRowData:t={},setSelectedRowData:n,flavour:r,...l}=e,o={};const i=(0,a.useMemo)((()=>Ga(t,[],null,o,r).sort(((e,t)=>{let[n]=e,[a]=t;return n.localeCompare(a)}))),[t]);return a.createElement(f.Flex,(0,m.A)({column:!0,gap:2,overflow:{vertical:"auto"},padding:[0,2,30]},l),a.createElement(f.Flex,{justifyContent:"between",padding:[2,0],border:{side:"bottom",color:"borderSecondary"}},a.createElement(f.TextBig,{strong:!0},"Row info"),i.length>0&&a.createElement(f.Box,{onClick:()=>n(),cursor:"pointer"},a.createElement(f.TextSmall,{color:"primary"},"Clear selection"))),Array.isArray(i)&&i.length?a.createElement(a.Fragment,null,a.createElement(Ua,{column:!0,gap:2},i.map((e=>{let[t,n]=e;return a.createElement(ja.A,{key:t,size:"small",name:t,testId:`sidebar-rowInfoContent-${t}`,padding:[1,0,0]},n)}))),a.createElement(Ha,{data:t.json||o})):a.createElement(f.Text,null,"Select a row to see raw data"))};var Ya=n(63314);const Xa={fn:{Component:ca,paramsKey:{extraKey:"fn"},loadingMessage:"Loading functions..."},logs:{Component:ca,paramsKey:{extraKey:"logs"},loadingMessage:"Loading logs..."},feed:{Component:ua,paramsKey:{extraKey:"feed"},loadingMessage:"Loading events..."}},Ja={filters:{iconName:"filterList",...s.kO,width:"19px",Content:_a,dataTestId:"fnFilters",label:"Filters"},info:{iconName:"information",...s.kO,width:"19px",dataTestId:"info",Content:Za,label:"Info"}},Qa=e=>{let{flavour:t}=e;const{Component:n,paramsKey:m,loadingMessage:g}=Xa[t]||Xa.fn,p=(0,l.CK)(),f=(0,l.nj)(),h=(0,o.Fw)("sidebarTab",{flavour:"val",extraKey:t}),y=(0,o.Fw)("sidebarOpen",{flavour:"bool"}),[x,E]=(0,a.useState)(),b=(0,a.useCallback)((function(){y(!0),h("info"),E(...arguments)}),[]),{loaded:v,value:C,hasError:w,refresh:k}=(0,i.vx)(m.extraKey),[A,{width:I}]=(0,u.A)();return f?p.length||"feed"===t?a.createElement(Ya.Ay,{feature:`Functions-${t}`},a.createElement(r.A,{"data-testid":`${t}Page`,margin:[0,0,2],sidebar:a.createElement(s.Ay,{title:"Filters",flavour:t,selectedRowData:x,setSelectedRowData:E,availableFns:C,tabs:Ja,loaded:!0,hasSearch:!1}),ref:A},a.createElement(n,{testIdPrefix:t,paramsKey:m,onShowInfo:b,availableFnsLoaded:v,availableFns:C,refreshAvailableFns:k,hasError:w,containerWidth:I}))):a.createElement(Ya.Ay,{feature:`Functions-${t}`,mode:"NoNodesView"},a.createElement(c.A,null)):a.createElement(d.A,{title:g})}},13630:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(47767),l=n(11128);const o=e=>{const t=(0,l.u7)(e),{state:n}=(0,r.zy)();return(0,a.useEffect)((()=>{n?.nodeId&&t([n.nodeId])}),[t]),n?.nodeId}}}]);