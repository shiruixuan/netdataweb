!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="468d4744-ec55-461f-8862-e1c5b458a2e1",e._sentryDebugIdIdentifier="sentry-dbid-468d4744-ec55-461f-8862-e1c5b458a2e1")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[8784],{92155:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(58168),r=n(96540),o=n(50876);const l=e=>(0,r.forwardRef)(((t,n)=>{let{callback:l,feature:s,isStart:i,isSuccess:c,isFailure:d,eventReason:u,payload:m={},...p}=t;const{sendLog:g,isReady:h}=(0,o.A)(),b=(0,r.useCallback)((()=>{const e=p[l],t={feature:s,isStart:i,isSuccess:c,isFailure:d,eventReason:u,...m,...p["data-ga"]?{dataGa:p["data-ga"]}:{},...p.dataGa?{dataGa:p.dataGa}:{},...p["data-track"]?{dataTrack:p["data-track"]}:{},...p.label?{label:p.label}:{}};"function"==typeof e&&e(),g(t,!0)}),[l,g,h,m,p]),f=(0,r.useMemo)((()=>({...p,[l]:b})),[p,l,b]);return r.createElement(e,(0,a.A)({ref:n},f))}));var s=n(67276);const i=e=>(0,r.forwardRef)(((t,n)=>{let{payload:o={},...i}=t;const c=l(e);return r.createElement(c,(0,a.A)({},i,{ref:n,callback:"onClick",payload:{...o,action:s.o1.buttonClicked}}))}))},81873:(e,t,n)=>{n.d(t,{A:()=>a});const a=async e=>{if("string"!==typeof e)return console.error("Pass a string to copyToClipboard"),!1;const t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";const a=document.getSelection(),r=a.rangeCount>0&&a.getRangeAt(0);document.body.append(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;let o=!1;try{navigator.clipboard?(await navigator.clipboard.writeText(t.value),o=!0):o=document.execCommand("copy")}catch{}return t.remove(),r&&(a.removeAllRanges(),a.addRange(r)),n&&n.focus(),o}},96083:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(58168),r=n(68415),o=n(96540),l=n(20982),s=n(65336);const i=(0,o.forwardRef)(((e,t)=>{let{onClick:n,src:i,title:c="User avatar",width:d=8,height:u=8,...m}=e;return o.createElement(s.Flex,(0,a.A)({cursor:"pointer",round:"50%","data-testid":"userAvatar",title:c,alt:c,onClick:e=>n&&n(e),width:d,height:u},m,{ref:t,alignItems:"center",justifyContent:"center",background:"spaceIdle",color:"textLite",overflow:"hidden"}),i?o.createElement(s.Flex,{as:"img",src:i,alt:c,width:d,height:u}):o.createElement(l.g,{icon:r.yV,size:"lg",alt:c}))}))},18682:(e,t,n)=>{n.d(t,{C:()=>l});var a=n(81873),r=n(78217),o=n(13871);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return()=>{(0,a.A)(e);const n=(0,o.UI)({header:"Copied",text:"Command copied to your clipboard! Please run it on your node's terminal.",icon:"gear",...t,success:!0});r.A.success(n,{context:"copy"})}}},87292:(e,t,n)=>{n.d(t,{Ay:()=>u,R0:()=>d});var a=n(96540),r=n(8711),o=n(65336),l=n(18682);const s=(0,r.default)(o.Box).attrs((e=>({color:"textDescription",background:"modalTabsBackground",border:{side:"all",color:"borderSecondary"},padding:[4,10,4,4],position:"relative",width:"100%",...e}))).withConfig({displayName:"command__StyledTerminalCommand",componentId:"sc-wnwmk3-0"})(["color:",";border-radius:2px;overflow-wrap:anywhere;white-space:pre-wrap;font-family:monospace;letter-spacing:0.09px;line-height:18px;font-size:14px;word-break:break-word;"],(0,o.getColor)("textDescription")),i=(0,r.default)(o.Icon).withConfig({displayName:"command__StyledIcon",componentId:"sc-wnwmk3-1"})(["display:flex;align-self:flex-end;cursor:pointer;"]),c=(0,r.default)(o.Box).attrs({color:"textDescription",border:{side:"all",color:"borderSecondary"},background:"modalTabsBackground",padding:[0,1]}).withConfig({displayName:"command__CodeText",componentId:"sc-wnwmk3-2"})(["display:inline-block;color:",";border-radius:2px;font-family:monospace;letter-spacing:0.09px;line-height:16px;font-size:12px;font-weight:bold;word-break:break-word;"],(0,o.getColor)("textDescription")),d=e=>{let{children:t,...n}=e;return a.createElement(c,n,t)},u=e=>{let{children:t,confirmationText:n="Copied to your clipboard.",commandText:r=t,...c}=e;return a.createElement(s,c,t,a.createElement(o.Box,{position:"absolute",bottom:"8px",right:"8px",onClick:(0,l.C)(r||t,{text:n})},a.createElement(i,{name:"copy",size:"small",color:"primary"})))}},36091:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(58168),r=n(96540),o=n(13083),l=n(65336);const s=()=>r.createElement(l.Text,null,"Something went wrong during document parsing"),i=e=>t=>{let{transformConfiguration:n={},validationConfig:l={},validate:i,errorComponent:c,children:d,...u}=t;const{tree:m,errors:p}=(e=>{let{markdocContent:t,validate:n,validationConfig:a,transformConfiguration:l}=e;return(0,r.useMemo)((()=>{const e=o.Ay.parse("string"===typeof t?t:"");let r=[];return n&&(r=o.Ay.validate(e,a)),{tree:r.length?null:o.Ay.transform(e,l),errors:r}}),[t,n,a,l])})({markdocContent:d,validate:i,validationConfig:l,transformConfiguration:n}),g=c&&"function"==typeof c?c:s;return p.length?r.createElement(g,{errors:p}):r.createElement(e,(0,a.A)({tree:m},u))},c=(0,r.memo)(i((e=>{let{tree:t,renderConfiguration:n}=e;return o.Ay.renderers.react(t,r,n)}))),d=(i((e=>{let{tree:t}=e;return o.Ay.renderers.html(t)})),c)},40267:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(65336);const o=e=>{let{flavour:t,icon:n,children:o}=e;return a.createElement(r.Pill,{icon:n,textProps:{textTransform:"capitalize"},flavour:t},o)}},32089:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(58168),r=n(96540),o=n(65336);const l=e=>{let{vertical:t,color:n="borderSecondary",...l}=e;return r.createElement(o.Box,(0,a.A)({as:"hr",height:t?"100%":"1px"},t?{}:{width:"100%"},{sx:{borderWidth:t?"0px 0px 0px 1px":"1px 0px 0px 0px",borderColor:n,borderStyle:"solid"}},l))}},38784:(e,t,n)=>{n.r(t),n.d(t,{AssistantAlerts:()=>K,AssistantChat:()=>fe});var a=n(96540),r=n(69765),o=n(51913),l=n(58168),s=n(65336),i=n(73700),c=(n(3064),n(14905),n(98992),n(72577),n(8872),n(36091)),d=n(47762);const u=e=>{let{label:t,value:n}=e;return a.createElement(s.Flex,{gap:2},a.createElement(s.Text,{strong:!0},t,":"),a.createElement(s.Text,null,n))},m=e=>{let{name:t,nodeId:n,chartId:l,alertOptions:i}=e;const c=(0,r.ID)(),[,m]=(0,o.bg)(),p=(0,d.xY)(n,"name");return a.createElement(s.Flex,{column:!0},i.length>1&&a.createElement(s.Box,{margin:[0,0,2,0]},a.createElement(s.Select,{"data-testid":`${t}-assistant-modal-alerts-select`,onChange:e=>{let{value:t}=e;return m({roomId:c,alert:{name:t}})},styles:{size:"tiny"},menuPlacement:"auto",options:i,value:{value:t,label:t}})),1==i.length&&a.createElement(u,{label:"Alert",value:t}),p&&a.createElement(u,{label:"Node",value:p}),l&&a.createElement(u,{label:"Chart id",value:l}))};var p=n(32089),g=n(8711),h=n(4659),b=n(87292),f=n(68831);const x=g.default.ol.withConfig({displayName:"markdocSchema__OrderedList",componentId:"sc-1maymd4-0"})(["list-style:roman;padding-left:14px;"]),E=g.default.ul.withConfig({displayName:"markdocSchema__UnorderedList",componentId:"sc-1maymd4-1"})(['list-style-image:url("','/img/list-style-image.svg");padding-left:14px;'],f.A.assetsBaseURL),y={heading:{render:e=>{let{level:t=1,...n}=e,r=s.H1;switch(t){case 2:r=s.H2;break;case 3:r=s.H3;break;case 4:r=s.H4;break;case 5:r=s.H5;break;case 6:r=s.H6}return a.createElement(r,(0,l.A)({margin:[2,0]},n))},attributes:{id:{type:String},level:{type:Number}}},paragraph:{render:e=>{let{children:t,...n}=e;return a.createElement(s.Flex,(0,l.A)({padding:[2,0]},n),a.createElement(s.Text,null,t))}},link:{render:e=>{let{children:t,href:n,...r}=e;return a.createElement(h.A,(0,l.A)({href:n,rel:"noopener noreferrer",target:"_blank"},r),t)},attributes:{href:{type:String}}},code:{render:e=>{let{content:t,...n}=e;return a.createElement(b.R0,n,t)},attributes:{content:{type:String}}},fence:{render:e=>{let{content:t,...n}=e;return a.createElement(b.Ay,n,t)},attributes:{content:{type:String}}},list:{render:e=>{let{ordered:t,children:n,...r}=e;const o=t?x:E;return a.createElement(o,r,n)},attributes:{ordered:{type:Boolean}}}},v=e=>{let{selectedAlert:t}=e;const[n]=(0,o.Ws)(),{name:r,nodeId:l,chartId:i}=t,{loaded:d,value:u,hasError:g}=(0,o.vQ)({alert:r,node:l,chart:i}),h=(e=>e.reduce(((e,t)=>{const n={value:t.name,label:t.name};return e.find((e=>{let{label:t}=e;return t==n.label}))||e.push(n),e}),[]))(n);return d?g?a.createElement(s.Text,null,"Something went wrong"):u?.result?a.createElement(s.Flex,{column:!0,gap:3},a.createElement(m,{name:r,nodeId:l,chartId:i,alertOptions:h}),a.createElement(p.A,null),a.createElement(c.A,{transformConfiguration:{nodes:y}},u.result)):a.createElement(s.Text,null,"No data"):a.createElement(s.Text,null,"Loading...")};var w=n(40267),C=n(29217);const k=(0,g.default)(s.Flex).withConfig({displayName:"styled__ElevatedContent",componentId:"sc-16kc0pw-0"})(["box-shadow:0 18px 28px rgba(0,0,0,0.5);"]),A=(0,g.default)(s.Icon).withConfig({displayName:"styled__IconAbsolute",componentId:"sc-16kc0pw-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),I=e=>{let{alert:t,...n}=e;return a.createElement(C.A,{content:"Show assistant"},a.createElement(k,(0,l.A)({position:"absolute",top:"0",right:"0",cursor:"pointer"},n),a.createElement(w.A,{flavour:t?.status||"neutral"},t?.name)))};var S=n(55794),_=n.n(S),M=n(87659);const B=g.default.ul.withConfig({displayName:"helpTooltipContent__List",componentId:"sc-uh9315-0"})(["width:350px;padding-left:16px;list-style:disc outside none;"]),F=function(){let{disableDrag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.createElement(B,null,e?null:a.createElement("li",null,"You can drag around the assistant window and navigate to other tabs within the same room, and the assistant window won't go away."),a.createElement("li",null,"Use the buttons at the right to expand, or minimize the assistant window."),a.createElement("li",null,"Hold down the ",a.createElement(s.TextSmall,{strong:!0},"Shift")," button in order to select any text inside the assistant window."))};var N=n(63950),T=n.n(N);const z=e=>{let{onModalClose:t=T()}=e;return a.createElement(C.A,{content:"Close assistant"},a.createElement(k,{position:"absolute",bottom:"37px",right:"-10px",background:"mainBackground",sx:{borderRadius:"100%"},border:{side:"all",color:"primary",size:"1px",type:"solid"},width:"28px",height:"28px",onClick:t,cursor:"pointer"},a.createElement(A,{name:"x",color:"text",size:"sm"})))},R=e=>{let{onClick:t=T()}=e;return a.createElement(k,{position:"absolute",top:"0",right:"0",onClick:t,cursor:"pointer"},a.createElement(s.Pill,{flavour:"neutral"},"Show assistant"))},q=e=>{let{MaximizeComponent:t=R,isMinimized:n,maximize:r=T(),onModalClose:o=T()}=e;const[l,i]=(0,a.useState)(!1);return a.createElement(s.Flex,{position:"relative",width:"56px",height:n?"95px":"56px",onMouseEnter:()=>i(n),onMouseLeave:()=>i(!1)},a.createElement(k,{position:"absolute",bottom:"0",background:"primary",sx:{borderRadius:"100%"},width:"56px",height:"56px",cursor:"move"},a.createElement(A,{name:"netdataAssistant",size:"large"})),l&&a.createElement(a.Fragment,null,a.createElement(t,{onClick:()=>{n&&r()}}),a.createElement(z,{onModalClose:o})))};var D=n(47731);const H=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"95vw"}:t?{base:"80vw"}:{base:150,max:150,min:70}},L=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:150,max:150,min:150}},P=(0,g.default)(s.ModalContent).attrs((e=>{let{expanded:t,isMobile:n,getWidth:a,getHeight:r,...o}=e;return{width:a({expanded:t,isMobile:n}),height:r({expanded:t,isMobile:n}),padding:[0,0,4,0],...o}})).withConfig({displayName:"assistantModalBase__ModalContent",componentId:"sc-15vyjlc-0"})([""]),U=(0,g.default)(s.ModalBody).withConfig({displayName:"assistantModalBase__StyledModalBody",componentId:"sc-15vyjlc-1"})(["flex-direction:",";"],(e=>{let{columnReverse:t}=e;return t?"column-reverse":"column"})),W=function(){let{title:e,body:t,modalContentProps:n={},modalBodyProps:r={},onClose:o,MaximizeComponent:i,disableDrag:c,getWidth:d=H,getHeight:u=L}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[m,p]=(0,M.A)(),[g,h]=(0,a.useState)(!1),[b,f,,x]=(0,M.A)(),E=(0,D.J)();return a.createElement(s.Modal,{zIndex:80,backdrop:!1},a.createElement(_(),{disabled:c||g||E},a.createElement(s.Flex,{column:!0,alignItems:"end",gap:3},!b&&a.createElement(P,(0,l.A)({expanded:m,cursor:g?"text":"move",tabIndex:0,onKeyDown:e=>{let{key:t}=e;"Shift"==t&&h(!0)},onKeyUp:()=>h(!1),isMobile:E,getWidth:d,getHeight:u},n),a.createElement(s.ModalHeader,{justifyContent:"between"},a.createElement(s.Flex,{gap:2,alignItems:"center"},a.createElement(s.Icon,{name:"netdataAssistant",color:"text"}),e||a.createElement(s.H4,null,"Netdata Assistant"),a.createElement(C.A,{plain:!0,isBasic:!0,align:"top",content:a.createElement(F,{disableDrag:c})},a.createElement(s.Flex,null,a.createElement(s.Icon,{name:"question",color:"textLite",width:"16px",height:"16px"})))),a.createElement(s.Flex,{alignItems:"baseline"},E?null:a.createElement(a.Fragment,null,a.createElement(s.ModalButton,{iconName:"minimize_s",onClick:f,tooltip:"Minimize window",testId:"assistant-modal-minimize-button"}),a.createElement(s.ModalButton,{iconName:m?"reduceSize":"fullScreen",onClick:p,tooltip:m?"Reduce window size":"Expand window",testId:"assistant-modal-expand-collapse-button"})),a.createElement(s.ModalCloseButton,{onClose:o,position:"unset",tooltip:"Close window",testId:"assistant-modal-close-button"}))),a.createElement(U,(0,l.A)({overflow:{vertical:"auto"},cursor:g?"text":"default"},r),t)),a.createElement(q,{MaximizeComponent:i,isMinimized:b,maximize:x,onModalClose:o}))))},G=e=>{let{alertNameInHeader:t,selectedAlert:n}=e;return t?a.createElement(w.A,{flavour:n?.status||"neutral"},n?.name):a.createElement(s.H4,null,"Netdata Assistant")},j=(Q=W,e=>{const[t,n]=(0,a.useState)(!1),[r,s]=(0,o.bg)(),c=r?.alert||{},d=(0,i.s)(300,(e=>{let{target:t}=e;return n(t.scrollTop>150&&!!c?.name)})),u=(0,a.useCallback)((()=>s(null)),[s]);return a.createElement(Q,(0,l.A)({title:a.createElement(G,{alertNameInHeader:t,selectedAlert:c}),body:a.createElement(v,{selectedAlert:c}),onClose:u,modalBodyProps:{onScroll:d},MaximizeComponent:e=>a.createElement(I,(0,l.A)({alert:c},e))},e))});var Q;const Y=j,K=()=>{const e=(0,r.ID)(),[t,n]=(0,o.bg)(),{roomId:l,alert:s}=t||{};return(0,a.useEffect)((()=>{l!=e&&n(null)}),[l,e]),s&&l==e?a.createElement(Y,null):null};var V=n(22292),O=n(96083);const Z=()=>a.createElement(s.Flex,{width:12},a.createElement(s.Icon,{name:"netdataAssistant",width:"48px",height:"48px",color:"primary"})),J=e=>{let{flavour:t="assistant",children:n,...r}=e;const o="assistant"==t,i=(0,V.uW)("avatarURL"),c={...o?{background:"modalBackground"}:{},border:{side:"top",color:"primary"}};return a.createElement(s.Flex,(0,l.A)({gap:2,padding:[4]},c,r),o?a.createElement(Z,null):a.createElement(O.A,{src:i||"",width:12,height:12}),a.createElement(s.Flex,{flex:{grow:1,shrink:1}},n))};var $=n(50876);const X=e=>{let{text:t}=e;const{sendButtonClickedLog:n}=(0,$.A)(),r=(0,o.ZV)(),l=(0,a.useCallback)((()=>{r(t),n({feature:"NetdataAssistantQuestion",question:t,kickstartQuestion:!0})}),[r,n]);return a.createElement(s.Flex,{alignItems:"center",justifyContent:"between",padding:[2],background:"inputBg",round:!0,cursor:"pointer",onClick:l},a.createElement(s.TextBig,null,t),a.createElement(s.Icon,{name:"chevron_right_s",color:"text",height:"12px",cursor:"pointer"}))},ee=()=>a.createElement(s.Flex,{column:!0,gap:4},a.createElement(s.TextBig,null,"Hello! Welcome to Netdata Assistant! Here are some options to help you kickstart our conversation:"),a.createElement(s.Flex,{column:!0,gap:2},a.createElement(X,{text:"What is a node?"}),a.createElement(X,{text:"What is a Netdata parent?"})),a.createElement(s.TextBig,null,"Just select the option you're interested in, or feel free to ask anything else!")),te=()=>a.createElement(J,{border:"none"},a.createElement(ee,null));n(41393),n(81454);const ne=(0,n(92155).A)(s.Button),ae=e=>{let{question:t,answer:n,feedback:r,setFeedback:o,flavour:l}=e;return a.createElement(ne,{feature:"AssistantAnswerFeedback",payload:{question:t,answer:n,feedback:l},flavour:r===l?"hollow":"borderless",icon:"thumbsUp"==l?"thumb_up":"thumb_down",onClick:()=>o(l),"data-testid":`assistant-chat-${l}`,small:!0})},re=function(){let{id:e,questionId:t,additionalInfo:n,messages:r=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[o,i]=(0,a.useState)(),c=r.find((e=>e.id==t))?.value,d=r.find((t=>t.id==e))?.value,u=(0,a.useMemo)((()=>({feedback:o,setFeedback:i,question:c,answer:d})),[o,i]);return a.createElement(s.Flex,{alignItems:"center",justifyContent:"between"},a.createElement(s.Flex,null,a.createElement(ae,(0,l.A)({},u,{flavour:"thumbsUp"})),a.createElement(ae,(0,l.A)({},u,{flavour:"thumbsDown"}))),n?a.createElement(h.A,{Component:s.Text,href:n,target:"_blank",rel:"noopener noreferrer"},"Read more..."):null)};var oe=n(63314);const le=()=>a.createElement(oe.DL,{feature:"NetdataAssistantAnswer"},a.createElement(s.TextBig,null,"Something went wrong. Please try again.")),se=()=>{const{messages:e}=(0,o.Gp)();return e.map((t=>{let{id:n,questionId:r,type:o,pending:l,value:i,additionalInfo:d,error:u}=t;return a.createElement(J,{key:n,flavour:"answer"==o?"assistant":"user"},"answer"==o?l?"...":u?a.createElement(le,null):a.createElement(s.Flex,{column:!0,gap:1},a.createElement(c.A,{transformConfiguration:{nodes:y}},i),a.createElement(re,{id:n,questionId:r,additionalInfo:d,messages:e})):i)}))},ie=(0,g.default)(s.Icon).withConfig({displayName:"input__StyledIcon",componentId:"sc-m4unkx-0"})(["opacity:",";"],(e=>{let{disabled:t}=e;return t?".5":"1"})),ce=e=>a.createElement(C.A,{plain:!0,content:"Send your message"},a.createElement(s.Box,null,a.createElement(ie,(0,l.A)({name:"chevron_right_s",color:"text",size:"small",cursor:"pointer"},e)))),de=(0,g.default)(s.Box).withConfig({displayName:"input__InputContainer",componentId:"sc-m4unkx-1"})(["box-shadow:0 0 8px rgba(0,0,0,0.5);"]),ue=()=>{const{sendButtonClickedLog:e}=(0,$.A)(),[t,n]=(0,a.useState)(""),{pending:r}=(0,o.Gp)(),l=(0,o.ZV)(),i=(0,a.useCallback)((()=>{!r&&t&&(l(t),n(""),e({feature:"NetdataAssistantQuestion",question:t}))}),[r,t,l,n,e]);return a.createElement(de,{width:"100%",position:"fixed",bottom:"68px",padding:[4],background:"modalBackground"},a.createElement(s.TextInput,{value:t,placeholder:"Message assistant...",iconRight:r?null:a.createElement(ce,{onClick:i,disabled:r||!t}),onChange:e=>{let{target:{value:t}}=e;return n(t)},onKeyDown:e=>{let{key:t}=e;"Enter"==t&&i()},autoFocus:"autofocus",disabled:r}))},me=()=>a.createElement(s.Flex,{column:!0},a.createElement(s.Flex,{column:!0,padding:[0,0,17,0]},a.createElement(te,null),a.createElement(se,null)),a.createElement(ue,null)),pe=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"95vw"}:t?{base:"60vw"}:{base:125,max:150,min:60}},ge=e=>{let{expanded:t,isMobile:n}=e;return n?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:80,max:150,min:80}},he=(e=>t=>a.createElement(oe.Ay,{feature:"NetdataAssistant"},a.createElement(e,(0,l.A)({body:a.createElement(me,null),modalContentProps:{padding:[0]},modalBodyProps:{height:"100%",padding:[0],columnReverse:!0},getWidth:pe,getHeight:ge},t))))(W),be=he,fe=()=>{const[e,,t]=(0,o.MY)(),{clear:n}=(0,o.Gp)(),r=(0,a.useCallback)((()=>{t(),n()}),[t,n]);return e?a.createElement(be,{onClose:r}):null}},51913:(e,t,n)=>{n.d(t,{ZV:()=>y,bg:()=>h,vQ:()=>g,Ws:()=>b,Gp:()=>E,MY:()=>x});n(17333),n(3064),n(41393),n(98992),n(54520),n(72577),n(81454);var a=n(96540),r=n(47444),o=n(31629),l=n(49286);var s=n(3914),i=n(69765);const c=(0,r.eU)({key:"assistantAlert",default:null}),d=(0,r.eU)({key:"assistantAlertsAtom",default:[]}),u=(0,r.eU)({key:"assistantChatAtom",default:{open:!1,messages:[]}});var m=n(33829);const p=(0,r.K0)({key:"assistantAlertSelector",get:e=>{let{space:t,room:n,alert:a,node:r,chart:l}=e;return()=>(e=>{let{space:t,room:n,alert:a,node:r,chart:l}=e;return o.A.post("/api/v1/troubleshoot",{space:t,room:n,alarm:a,node:r,chart:l})})({space:t,room:n,alert:a,node:r||"dummy-node-id",chart:l||"dummy-chart-id"})},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),g=e=>{let{alert:t,node:n,chart:a}=e;const o=(0,s.vt)(),l=(0,i.ID)(),c=(0,r.xf)(p({space:o,room:l,alert:t,node:n,chart:a}));return{loaded:"loading"!==c.state,value:c.contents?.data,hasError:"hasError"===c.state}},h=()=>(0,r.L4)(c),b=()=>(0,r.L4)(d),f=()=>(0,r.L4)(u),x=()=>{const[e,t]=f(),n=(0,a.useCallback)((()=>t((e=>({...e,open:!0})))),[t]),r=(0,a.useCallback)((()=>t((e=>({...e,open:!1})))),[t]);return[e?.open,n,r]},E=()=>{const[e,t]=f(),n=(0,a.useCallback)((e=>t((t=>({...t,messages:[...t.messages,e]})))),[t]),r=(0,a.useCallback)((()=>{t((e=>({...e,messages:[]})))}),[t]),o=(0,a.useMemo)((()=>e.open&&!!e.messages.find((e=>{let{pending:t}=e;return!!t}))),[e]);return{messages:e?.messages,pending:o,addMessage:n,clear:r}},y=()=>{const e=(()=>{const{addMessage:e}=E();return(0,a.useCallback)((t=>{const n=(0,m.A)();return e({id:n,type:"question",value:t}),n}),[e])})(),t=(()=>{const{addMessage:e}=E();return(0,a.useCallback)((t=>{let{questionId:n,pending:a,answer:r}=t;return e({id:(0,m.A)(),questionId:n,type:"answer",value:r,pending:a})}),[e])})(),n=(()=>{const[,e]=f();return(0,a.useCallback)((t=>{let{questionId:n,value:a,additionalInfo:r,error:o}=t;e((e=>({...e,messages:e.messages.map((e=>e.questionId==n?{...e,pending:!1,value:a,additionalInfo:r,error:o}:e))})))}),[])})();return(0,a.useCallback)((a=>{const r=e(a);var s;t({questionId:r,pending:!0}),(s=a,o.A.post("/api/v1/chat",{messages:[{role:"user",content:s}]},{transform:e=>(0,l.bn)(e)})).then((function(){let{data:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{session:{messages:t},additionalInfo:a}=e,o=(t||[]).filter((e=>{let{role:t}=e;return"assistant"==t})),l=o.length?o[o.length-1]:null;n(l?.content?{questionId:r,value:l.content,additionalInfo:a}:{questionId:r,error:"Something went wrong"})})).catch((e=>{n({questionId:r,error:e.message||"Something went wrong"})}))}),[e,n])}}}]);