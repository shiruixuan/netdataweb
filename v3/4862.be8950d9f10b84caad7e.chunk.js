!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1c9bb2ad-3715-48d4-a480-fb9fdd3f7deb",e._sentryDebugIdIdentifier="sentry-dbid-1c9bb2ad-3715-48d4-a480-fb9fdd3f7deb")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[4862],{62232:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(58168),l=(n(17333),n(41393),n(98992),n(54520),n(81454),n(8711)),r=n(68090),o=n.n(r),i=n(96540),s=n(65336),c=n(80158);const d=(0,l.default)(s.Box).withConfig({displayName:"breadcrumbs__StyledItemContainer",componentId:"sc-3u39st-0"})([""]),m=(0,l.css)(["&:hover{color:",";}"],(e=>{let{withHover:t,theme:n}=e;return t&&(0,s.getColor)("success")({theme:n})})),u=(0,l.default)(s.Text).withConfig({displayName:"breadcrumbs__StyledText",componentId:"sc-3u39st-1"})(["",""],m),g=(0,l.default)(s.TextSmall).withConfig({displayName:"breadcrumbs__StyledTextSmall",componentId:"sc-3u39st-2"})(["",""],m),p=e=>{let{items:t,isBig:n,showBackButton:l=!0,testid:r="",...m}=e;const p=(0,i.useMemo)((()=>{if(!t?.length||!l)return null;return o()(t.filter((e=>{let{onClick:t}=e;return!!t}))).onClick}),[t,l]);if(!t?.length)return null;const h=n?u:g;return i.createElement(s.Flex,(0,a.A)({gap:4},m),l&&i.createElement(s.Button,{onClick:p,icon:"chevron_left",label:"Back",neutral:!0,flavour:"hollow",small:!0,padding:[0,2,0,1],textTransform:"uppercase","data-testid":`${r}-breadcrumbs-backButton`}),i.createElement(s.Flex,{gap:2,alignItems:"center"},t.map(((e,t)=>{let{isDisabled:n,name:l,onClick:o}=e;return i.createElement(d,(0,a.A)({key:t,alignItems:"center"},o&&{cursor:"pointer",onClick:o},{"data-testid":`${r}-breadcrumbs-level-${t}`}),i.createElement(h,{color:n&&"textLite","data-testid":`${r}-breadcrumbs-level-${t}`,withHover:!!o},0!==t&&" / ",(0,c.Zr)(l||"")))}))))}},5628:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(58168),l=n(96540),r=n(65336),o=n(87659);const i=(e,t)=>{const n=e&&!isNaN(e)?parseInt(e):0,a=Math.min(n,t);return a<10?"0"+a:a.toString()},s=e=>{let{value:t,min:n,max:a,onChange:r}=e;const[s,,c,d]=(0,o.A)(),[m,u]=(0,l.useState)(i(t,a)),[g,p]=(0,l.useState)();return{inputProps:(0,l.useMemo)((()=>s?{type:"number",min:n,max:a}:{type:"text"}),[s,n,a]),renderedValue:m,error:g,onInput:(0,l.useCallback)((e=>{const t=e?.target?.value,n=parseInt(t,10);n>a?p(`Maximum value is ${a}`):p();const l=Math.min(n,a);r(l),u(t)}),[a,r,u,p]),onFocus:c,onBlur:(0,l.useCallback)((e=>{const t=e?.target?.value;d(),u(i(t,a))}),[a,d,u])}},c={hours:99,minutes:59,seconds:59,default:59},d={hours:0,minutes:0,seconds:0,default:0};var m=n(47130);const u=(0,m.A)(r.Flex),g=e=>{let{value:t,onChange:n,min:o=d.default,max:i=c.default,inputProps:m={},...g}=e;const{inputProps:p,renderedValue:h,error:b,onInput:E,onFocus:f,onBlur:x}=s({value:t,min:o,max:i,onChange:n});return l.createElement(u,{tooltip:b,tooltipProps:{align:"bottom"}},l.createElement(r.TextInput,(0,a.A)({width:{base:20},value:h,onInput:E,onFocus:f,onBlur:x,size:"small",error:b,hideErrorMessage:!0},m,p,g)))},p=e=>{let{value:t,onChange:n,applyOnChange:a}=e;const{hours:r,minutes:o,seconds:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===e||isNaN(e)?{hours:0,minutes:0,seconds:0}:{hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60}}(t),[s,c]=(0,l.useState)(r),[d,m]=(0,l.useState)(o),[u,g]=(0,l.useState)(i),p=(0,l.useCallback)((()=>{const e=function(){let{hours:e=0,minutes:t=0,seconds:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 60*e*60+60*t+n}({hours:s,minutes:d,seconds:u});n(e)}),[s,d,u,n]);return(0,l.useEffect)((()=>{a&&p()}),[a,s,d,u,p]),{hours:s,minutes:d,seconds:u,onHoursChange:c,onMinutesChange:m,onSecondsChange:g,onApply:p}};var h=n(92155);const b=(0,m.A)(r.Flex),E=(0,h.A)(r.Button),f=e=>{let{testId:t,value:n,onChange:r,applyOnChange:o,minValues:i=d,maxValues:s=c,hideSeconds:m,inputProps:u={},...h}=e;const{disabledTooltip:f,disabled:x,...y}=h,{hours:C,minutes:v,seconds:w,onHoursChange:A,onMinutesChange:T,onSecondsChange:S,onApply:I}=p({value:n,onChange:r,applyOnChange:o});return l.createElement(b,{gap:2,alignItems:"end",tooltip:x?f:null,tooltipProps:{align:"bottom"},"data-testid":t},l.createElement(g,(0,a.A)({label:"Hours",value:C,min:i.hours,max:s.hours,onChange:A,disabled:x,inputProps:u},y)),l.createElement(g,(0,a.A)({label:"Minutes",value:v,min:i.minutes,max:s.minutes,onChange:T,disabled:x,inputProps:u},y)),m?null:l.createElement(g,(0,a.A)({label:"Seconds",value:w,min:i.seconds,max:s.seconds,onChange:S,disabled:x,inputProps:u},y)),o?null:l.createElement(E,(0,a.A)({label:"Apply",onClick:I,small:!0,style:{height:"tiny"==h.size?"24px":"28px"},payload:{info:"Apply reachability notifications delay",testId:t}},h)))}},26751:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(58168),l=n(96540),r=n(65336);const o=e=>{let{message:t,title:n,footer:o,...i}=e;const s=i?.["data-testid"]||"functionError";return l.createElement(r.Flex,(0,a.A)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},i),l.createElement(r.H3,{"data-testid":`${s}-title`},n),l.createElement(r.TextBig,{color:"textDescription","data-testid":`${s}-message`},t),o)}},54856:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(58168),l=n(96540),r=n(84976),o=n(65336),i=n(4659),s=n(46741),c=n(27994);const d=function(){let{containerProps:e={},...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,s.JT)("billing:ReadAll"),{url:d}=(0,c.A)();return d?l.createElement(o.Flex,(0,a.A)({background:"sideBarMini",border:{side:"all",color:"border"},padding:[1,2],round:!0},e),l.createElement(i.A,(0,a.A)({align:"bottom",as:r.N_,color:"text",Component:o.TextMicro,content:n?"Upgrade your plan in order to use this feature":"You have no permissions to manage billing",disabled:!n,hoverColor:"textFocus",showToolTip:!0,strong:!0,to:d},t),"Upgrade now!")):null}},83039:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var a=n(96540),l=n(58168),r=n(65336),o=n(15440);const i=e=>{let{"data-testid":t="input",description:n,isRequired:i,onChange:s,title:c,...d}=e;return a.createElement(r.Flex,{column:!0,"data-testid":t,flex:"grow",gap:1},a.createElement(o.A,{"data-testid":t,description:n,isRequired:i,title:c}),a.createElement(r.TextInput,(0,l.A)({"data-testid":`${t}-field`,size:"tiny",onChange:e=>{let{target:t}=e;return s(t.value)}},d)))};n(41393),n(81454);const s=e=>{let{"data-testid":t="select",description:n,getDataGa:i,fields:s,id:c,isRequired:d,onChange:m,secrets:u,setSecrets:g,title:p,...h}=e;return a.createElement(r.Flex,{column:!0,"data-testid":t,flex:"grow",gap:1},a.createElement(o.A,{"data-testid":t,description:n,isRequired:d,title:p}),a.createElement(r.Select,(0,l.A)({"data-testid":`${t}-field`,menuPortalTarget:document.body,onChange:e=>m(e),styles:{size:"tiny"},menuPlacement:"auto"},h)),Object.values(s?.[h.value?.value]||{}).map((e=>{let{getValue:n,id:r,onChange:o,...s}=e;return a.createElement(b,(0,l.A)({"data-ga":i(`${c}-${r}-${s.component}`),"data-testid":`${t}-${r}`,key:r,id:r,onChange:o({id:c,setSecrets:g,subsetId:r}),value:n({id:c,secrets:u,subsetId:r})},s))})))};n(14905),n(98992),n(8872);var c=n(90179),d=n.n(c),m=n(97200),u=n.n(m),g=n(30960),p=n(63450);const h={default:()=>null,pairs:e=>{let{componentPairs:t,"data-testid":n="pairs",description:l,getDataGa:i,id:s,isRequired:c,placeholder:m,setSecrets:h,title:b}=e;const[f,x]=(0,a.useState)({});(0,a.useEffect)((()=>{const e=Object.values(f).reduce(((e,t)=>{let{key:n,value:a}=t;return n?{...e,[n]:a||""}:e}),{});h((t=>Object.keys(e).length?{...t,[s]:e}:d()(t,s)))}),[f]);return a.createElement(r.Flex,{column:!0,"data-testid":n,gap:1},a.createElement(r.Flex,{alignItems:"center",justifyContent:"between"},a.createElement(o.A,{"data-testid":n,description:l,isRequired:c,title:b}),t.map((e=>{const l=(0,g.$Q)(e);return a.createElement(p.ro,{"data-ga":i(`${s}-${l}-add`),"data-testid":`${n}-${l}Add`,key:l,label:1===t.length?"Add":`Add ${l}`,onClick:()=>(e=>x((t=>({...t,[u()("pair_")]:{key:"",components:e,value:""}}))))(e)})}))),Object.entries(f).map((e=>{let[t,{key:l,components:o,value:c}]=e;const[u,p]=o,h=(0,g.$Q)(o);return a.createElement(r.Flex,{alignItems:"end",key:`${h}-${t}`,gap:2},a.createElement(E,{component:u,"data-ga":i(`${s}-${h}-key`),"data-testid":`${n}-${h}Key`,onChange:e=>x((n=>({...n,[t]:{...n[t],key:e}}))),value:l,placeholder:m,title:"Key"}),a.createElement(E,{component:p,"data-ga":i(`${s}-${h}-value`),"data-testid":`${n}-${h}Value`,onChange:e=>x((n=>({...n,[t]:{...n[t],value:e}}))),value:c,placeholder:m,title:"Value"}),a.createElement(r.Button,{flavour:"borderless",icon:"trashcan",margin:[0,0,1,0],neutral:!0,onClick:()=>{x((e=>d()(e,t)))}}))})))},input:i,select:s},b=e=>{let{component:t,...n}=e;const l=h[t]||h.default;return a.createElement(l,n)},E=b},15440:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(96540),l=n(65336),r=n(29217);const o=e=>{let{description:t,isRequired:n,title:o,...i}=e;const s=i["data-testid"]?`${i["data-testid"]}-label`:"fieldLabel";return a.createElement(l.Flex,{"data-testid":`${s}-container`,gap:1},a.createElement(l.TextSmall,{color:"textLite","data-testid":s},o,n&&" *"),t&&a.createElement(r.A,{align:"top",content:t,"data-testid":`${s}-info`,plain:!0},a.createElement(l.Icon,{color:"textLite",name:"information",size:"small"})))}},63450:(e,t,n)=>{"use strict";n.d(t,{$m:()=>c,He:()=>r,Jg:()=>g,MU:()=>o,Oj:()=>d,W6:()=>s,fn:()=>m,id:()=>u,ro:()=>i});var a=n(8711),l=n(65336);const r=(0,a.default)(l.Flex).attrs({alignItems:"center",color:"text",gap:1,hoverColor:"text"}).withConfig({displayName:"styled__AnchorComponent",componentId:"sc-wc4x41-0"})(["&,&:hover{text-decoration:none;}"]),o=(0,a.default)(l.Icon).attrs({height:"130px",width:"130px"}).withConfig({displayName:"styled__BlurredIcon",componentId:"sc-wc4x41-1"})(["filter:blur(70px);position:absolute;left:0;top:0;opacity:0.5;"]),i=(0,a.default)(l.Button).attrs((e=>({height:"22px",icon:"plus",padding:[.5,2,.5,1],small:!0,width:"auto",flavour:"hollow",...e}))).withConfig({displayName:"styled__IntegrationAction",componentId:"sc-wc4x41-2"})(["&& > span{font-weight:bold;margin-left:4px;}"]),s=(0,a.default)(l.TextSmall).withConfig({displayName:"styled__LearnMoreTest",componentId:"sc-wc4x41-3"})(["position:relative;"]),c=(0,a.default)(l.ModalContent).attrs((e=>({height:{base:"80vh",max:"80vh",min:45},width:{base:121,max:140,min:70},...e}))).withConfig({displayName:"styled__ModalContent",componentId:"sc-wc4x41-4"})(["box-shadow:0 18px 28px rgb(9 30 66 / 15%),0 0 1px rgb(9 30 66 / 31%);"]),d=(0,a.default)(l.ModalCloseButton).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"styled__ModalClose",componentId:"sc-wc4x41-5"})(["&:hover{fill:",";}"],(0,l.getColor)("selected")),m=(0,a.default)(l.Flex).attrs((e=>{let{hasBorder:t,...n}=e;return{...t?{border:{side:"bottom",color:"disabled"}}:{},column:!0,padding:[3,4],...n}})).withConfig({displayName:"styled__ModalSection",componentId:"sc-wc4x41-6"})([""]),u=(0,a.default)(l.Icon).attrs({name:"warning_triangle",height:"18px",width:"18px",color:["yellow","amber"]}).withConfig({displayName:"styled__WarningIcon",componentId:"sc-wc4x41-7"})(["position:absolute;top:0;right:0;z-index:1;"]),g=(0,a.default)(l.Icon).attrs({height:"12px",width:"12px",color:"white"}).withConfig({displayName:"styled__SystemIcon",componentId:"sc-wc4x41-8"})(["position:relative;top:2px;"])},99904:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(96540),l=n(3914),r=n(25624);var o=n(87659);const i=e=>{const t=new Date(e||void 0).toDateString();return"Invalid Date"!==t?t:null},s=()=>{const e=(0,l.ap)(),t=(0,a.useMemo)((()=>`dismissedBumpedWarningKey_${e?.id}`),[e?.id]),[n,,,s]=(0,o.A)(!localStorage.getItem(t)),{trialEndsAtRaw:c}=(0,r.A)(),d=c&&"EarlybirdAndCommunitySunset"==e?.metadata?.joinTrialCode,m=n&&c&&d,u=d?"EARLYB25":null,g=(0,a.useCallback)((()=>{localStorage.setItem(t,!0),s()}),[s,t]);return{isModalVisible:m,isEarlybirdAndCommunitySunset:d,coupon:u,trialEndsAt:i(c),onClose:g}}},34641:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var a=n(96540),l=n(63950),r=n.n(l),o=n(65336),i=n(19673),s=n(71835),c=n(92155),d=n(50876),m=n(63314),u=n(87659),g=n(97118);const p=(0,c.A)(o.Button),h=e=>{let{onConfirm:t,onDecline:n=r(),onCancellingEnd:l=r()}=e;const c=(0,i.M4)(),[h,b]=(0,s.A)(),{id:E}=(0,g.A)(),{sendLog:f,isReady:x}=(0,d.A)(),[y,,C,v]=(0,u.A)(),w=(0,a.useCallback)((()=>{C(),c({productId:E}).then((()=>{h({header:"Successfully canceled subscription",text:"You are now on Community plan"}),f({feature:"TrialOptOut",isSuccess:!0})})).catch((()=>{b({header:"Failed to cancel the subscription",text:"Remained on Business plan"}),f({feature:"TrialOptOut",isFailure:!0,error:"Failed to cancel the subscription"})})).finally((()=>{l(),v()}))}),[E,x]),A=(0,a.useCallback)((()=>{t?t():w()}),[t,w]);return a.createElement(o.Modal,{backdropProps:{backdropBlur:!0}},a.createElement(m.Ay,{feature:"TrialOptOut"},a.createElement(o.ModalContent,{width:{base:140}},a.createElement(o.ModalHeader,null,a.createElement(o.Flex,{gap:2,alignItems:"center"},a.createElement(o.H4,null,"Opt out of Free Trial"))),a.createElement(o.ModalBody,null,y?a.createElement(o.Flex,{height:"100px"},a.createElement(o.TextBig,null,"Changing billing plan...")):a.createElement(o.Flex,{gap:2,column:!0},a.createElement(o.H3,null,"Are You Sure?"),a.createElement(o.TextBig,null,"It looks like you have chosen to opt-out of your free 30-day business trial. Are you sure you do not want to experience all the features Netdata has to offer?"),a.createElement(o.TextBig,null,"By opting out, you will be downgraded to the community plan immediately."))),a.createElement(o.ModalFooter,null,a.createElement(o.Flex,{justifyContent:"end",gap:4,padding:[1,2]},a.createElement(p,{feature:"TrialOptOut",label:"Yes, I am sure!",flavour:"hollow",small:!0,onClick:A,disabled:!E||y,textTransform:""}),a.createElement(p,{feature:"TrialOptOut",label:"No, I want the trial!",small:!0,onClick:n,disabled:y,textTransform:""}))))))}},35454:(e,t,n)=>{"use strict";n.d(t,{$B:()=>o,TB:()=>i,W1:()=>l,ml:()=>r,ue:()=>a});const a={default:"successSemi",warning:"warningSemi",critical:"errorSemi"},l={default:{background:"successSemi",border:"success"},warning:{background:"warningSemi",border:"warning"},critical:{background:"errorSemi",border:"error"}},r=[30,15,3,2,1],o="dismissedTrialWelcome",i="dismissedTrialWarningDate"},93476:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(58168),l=n(96540),r=n(65336),o=n(63950),i=n.n(o),s=n(25624),c=n(99904),d=n(24864);const m={banner:{color:"main"},sidebar:{lineHeight:"1.6",color:"main"},freePlanUpgrade:{lineHeight:"1.6",color:"main"},billing:{color:"textLite"}},u=e=>{let{canUpgrade:t,onUpdateClick:n=i(),children:o,...s}=e;return t?l.createElement(r.Box,(0,a.A)({"data-testid":"upgrade-to-business-banner",onClick:n,as:r.Text,cursor:"pointer",textDecoration:"underline",color:"main"},s),o):null},g=e=>{let{flavour:t,couponRemainingDays:n,onUpdateClick:o=i()}=e;const{daysRemaining:g,canUpgrade:p,trialEndsAt:h}=(0,s.A)(),{isEarlybirdAndCommunitySunset:b}=(0,c.A)(),E=(0,l.useMemo)((()=>({isCoupon:n>0,isEarlybirdAndCommunitySunset:b,isBanner:"banner"==t,isSidebar:"sidebar"==t,isBilling:"billing"==t,isFreePlanUpgrade:"freePlanUpgrade"==t})),[t,n]);return l.createElement(r.Flex,{justifyContent:E.isBilling?"start":"center",alignItems:"center",width:"100%",gap:2},E.isCoupon?l.createElement(r.Flex,{column:!0},l.createElement(r.Text,(0,a.A)({},m[t],{fontSize:"10px",strong:!0}),"BLACK FRIDAY OFFER"),l.createElement(d.Te,(0,a.A)({},m[t],{fontSize:"38px",lineHeight:.8,strong:!0}),"20% off")):E.isEarlybirdAndCommunitySunset?l.createElement(r.Flex,{column:!0,gap:1,alignItems:"center"},l.createElement(r.Text,(0,a.A)({},m[t],{textAlign:"center",strong:!0},E.isBanner?{}:{fontSize:"10px"}),"Thank you for your support!"," ",E.isBanner?l.createElement(u,{canUpgrade:p,onUpdateClick:o},"Upgrade"):null),l.createElement(r.Text,(0,a.A)({},m[t],{color:"primary",fontSize:"22px",lineHeight:.8,strong:!0}),"25% Lifetime off")):E.isFreePlanUpgrade?l.createElement(r.Text,m[t],"Upgrade your plan for unlimited access and Business features."):l.createElement(r.Text,m[t],"You have ",l.createElement(r.Text,(0,a.A)({strong:!0},m[t]),`${g} days`)," ","left to explore all the features of Netdata Business."," ",E.isBilling&&l.createElement(l.Fragment,null,"Trial ends at"," ",l.createElement(r.Text,(0,a.A)({strong:!0},m[t]),h),"."," "),E.isBanner?l.createElement(u,{canUpgrade:p,onUpdateClick:o},"Consider upgrading for unlimited access."):l.createElement(l.Fragment,null,"Consider upgrading for unlimited access.")))}},24864:(e,t,n)=>{"use strict";n.d(t,{PL:()=>i,Te:()=>s,bg:()=>o});var a=n(8711),l=n(65336),r=n(35454);const o=(0,a.default)(l.Flex).attrs({position:"relative"}).withConfig({displayName:"styled__TrialWarningSidebar",componentId:"sc-66x250-0"})(["background-color:",";border-width:1px;border-style:dashed;border-color:",";border-radius:2px;"],(e=>{let{type:t}=e;return(0,l.getColor)(r.W1[t]?.background)}),(e=>{let{type:t}=e;return(0,l.getColor)(r.W1[t]?.border)})),i=(0,a.default)(l.Button).withConfig({displayName:"styled__TrialUpgradeButton",componentId:"sc-66x250-1"})(["flex:auto;"]),s=(0,a.default)(l.Text).attrs({strong:!0,lineHeight:.8}).withConfig({displayName:"styled__PromoText",componentId:"sc-66x250-2"})(["background-color:",";background-image:linear-gradient( 43deg,"," 0%,"," 46%,"," 100% );-webkit-background-clip:text;-webkit-text-fill-color:transparent;"],(0,l.getColor)("primary"),(0,l.getColor)(["blue","aquamarine"]),(0,l.getColor)(["purple","mauve"]),(0,l.getColor)("primary"))},66732:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(96540),l=n(63950),r=n.n(l),o=n(65336),i=n(50876);const s={default:"Or you can opt to downgrade immediately",billing:"Or you can opt to downgrade immediately"},c=e=>{let{flavour:t="default",onOptOutClick:n=r(),...l}=e;const{sendLog:c,isReady:d}=(0,i.A)(),m=(0,a.useCallback)((()=>{n(),c({feature:"TrialOptOut",isStart:!0})}),[d]);return a.createElement(o.Text,l,"After the trial, you'll automatically switch to the free Community plan."," ",a.createElement(o.Box,{"data-testid":"upgrade-to-business-banner",onClick:m,as:o.Text,cursor:"pointer",textDecoration:"underline",color:"primary"},s[t]),".")}},33644:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,P:()=>o});var a=n(8711),l=n(65336);const r=a.default.ul.withConfig({displayName:"styled__StyledList",componentId:"sc-z791f1-0"})(["list-style:disc outside none;margin-left:16px;"]),o=(0,a.default)(l.ModalContent).attrs((e=>{let{isMobile:t}=e;return{width:t?{base:"95vw"}:{}}})).withConfig({displayName:"styled__TrialWelcomeModalContent",componentId:"sc-z791f1-1"})([""])},25624:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var a=n(96540),l=n(46741),r=n(5668),o=n(22292),i=(n(8159),n(98992),n(37550),n(16074)),s=n(6593);var c=n(19673),d=n(50503),m=n(35454),u=n(42728),g=n(68164),p=n(93155);const h=e=>{const t=new Date(e||void 0).toLocaleDateString();return"Invalid Date"!==t?t:null},b=()=>{const e=(0,g.I)(),{loaded:t,value:n,refresh:b}=(0,c.JN)(),{isFailure:E}=(0,d.A)(),{slug:f,trialEndsAt:x,paymentProvider:y}=n||{},C=(0,a.useMemo)((()=>(e=>{if(!e)return null;const t=new Date(e)-new Date;return Math.ceil(t/864e5)})(x)),[x]),v=t&&!!x&&!e,w=(0,l.JT)("billing:Manage"),[A]=(0,r.ng)("trialModalDismissed"),T=p.bO&&w&&(v||E)&&!localStorage.getItem(m.$B)&&!A,[S,I]=(0,a.useState)(localStorage.getItem(m.TB)),k=(0,a.useMemo)((()=>p.bO&&v),[v]),[F,P]=(0,a.useState)(),$=(M=C)>15?"default":M>5?"warning":"critical";var M;const L=!(0,o.uW)("isAnonymous")&&w;return(0,a.useEffect)((()=>{const e=((e,t,n,a)=>{if(t<0)return!1;const l=new Date(e||void 0);if(!(0,i.f)(l))return!1;const r=new Date(a||void 0);if(!(0,i.f)(r))return!0;const{days:o}=(0,s.F)({start:r,end:l}),c=o;return n.some((e=>e>=t&&e<c))})(x,C,m.ml,S);P(p.bO&&e)}),[x,C,S]),{trialWelcomeVisible:T,sidebarWarningVisible:k,bannerVisible:F,dismissBanner:()=>{const e=(new Date).toISOString();I(e),localStorage.setItem(m.TB,e)},daysRemaining:C,trialEndsAt:h(x),trialEndsAtRaw:x,type:$,canUpgrade:L,onTrial:v,refreshPlan:b,planIsFreeOrEarlyBird:(0,u.Kj)(f),paymentProvider:y}}},97118:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,s:()=>i});var a=n(19673),l=n(42728),r=n(88116);const o=e=>{const{value:t}=(0,a.lU)();if(!t?.[e])return{};const n=Object.keys(t[e]).sort(l.M7)[0];return{id:t[e][n]?t[e][n][0]?.id:null,version:n}},i=()=>o(r.VH.homelab),s=()=>o(r.VH.free)},47193:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(69765),l=n(67990),r=n(87860),o=n(3914),i=n(47762),s=n(87659);const c=function(){let{polling:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=""}=(0,a.pr)(),n=(0,l.gr)(t,"ids"),c=(0,l.gr)(t,"loaded"),d=(0,i.Gt)(n),m=(0,o.vt)(),[u,,,g]=(0,s.A)();return(0,r.A)({id:t,spaceId:m,polling:e}),{areDefaultRoomNodesLoaded:c,nodes:d,isClaimNodeModalOpen:u,closeClaimNodeModal:g}}},24862:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>er});var a=n(96540),l=n(47767),r=n(3914),o=n(58168),i=n(39225),s=n(45588),c=n(8711),d=n(65336),m=n(57375),u=n(15327),g=n(74618),p=n(79412),h=(n(17333),n(41393),n(98992),n(54520),n(81454),n(46741)),b=n(14994),E=n(87659),f=n(46440),x=n(33195);const y=[{id:"name",accessor:"name",header:"Name",cell:e=>{let{getValue:t,row:{original:{isMember:n}}}=e;const l=t(),r=(0,h.JT)("room:ReadAll");return a.createElement(d.Flex,{alignItems:"center"},r&&n&&a.createElement(f.A,{margin:[0,1,0,0]}),a.createElement(d.Text,{margin:r&&!n&&[0,0,0,4]},l))}},{id:"nodeCount",accessor:"nodeCount",header:"Nodes",cell:e=>{let{getValue:t}=e;return`${t()||0}`}},{id:"memberCount",accessor:"memberCount",header:()=>"Users",cell:e=>{let{getValue:t}=e;return`${t()||0}`}},{id:"silencing",accessorKey:"silencingState",header:"Silencing",cell:e=>{let{getValue:t}=e;return a.createElement(x.A,{flavour:"room",silencing:t()})}}];n(9920),n(3949);var C=n(47444),v=n(24198),w=n(63129),A=n(69765),T=n(54308),S=n(56820);const I=e=>(0,C.Zs)((t=>{let{snapshot:n,set:a,reset:l}=t;return async function(t){let{onSuccess:r,onFail:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=await n.getPromise((0,b.$e)({id:e,key:"ids"})),s=t.map((e=>{let{id:t}=e;return t})),c=i.filter((e=>!s.includes(e)));a((0,b.$e)({id:e,key:"ids"}),c);const d=await Promise.all(c.map((e=>n.getPromise((0,A.LS)({id:e})))));try{if(await(async(e,t)=>Promise.all(t.map((t=>(0,w.HN)(e,t)))))(e,s),a(T.yz,(0,S.Pb)(d)),s.forEach((t=>a((0,b.Oy)(e),t))),t.forEach((t=>{let{id:n,slug:a}=t;l((0,A.LS)({id:n})),l((0,T.x4)([e,a]))})),r&&r(),t.length>1)(0,v.r0)("Rooms were successfully deleted from Space!");else{const[e]=t;(0,v.r0)(`Room ${e.name} was successfully deleted!`)}}catch(m){a((0,b.$e)({id:e,key:"ids"}),i),o&&o(m)}}}),[e]);var k=n(74564);const F=e=>{let{spaceId:t,spaceName:n,startIsCreating:o}=e;const i=I(t),s=(0,h.JT)("space:Delete"),c=(0,h.JT)("room:Read"),d=(0,h.JT)("room:Create"),m=(0,h.JT)("space:CreatePersonalSilencingRule"),u=(e,t)=>{if(!e)return;const n=Array.isArray(e)?e.map((e=>{let{id:t,name:n}=e;return{id:t,name:n}})):[{id:e.id,name:e.name}];i(n,{onSuccess:t.resetRowSelection})},g=(e,t)=>{const n=t.length;if(!n)return"";return 1===n?(0,k.kI)(t[0].name):(0,k.kI)(n)},p=(e,t)=>{const l=t.length;if(!l)return"";const r={...1===l?{name:t[0].name}:{roomsLength:l},spaceName:n};return a.createElement(k.rj,r)},{pathname:b}=(0,l.zy)(),E=(0,r.bq)(),f=(0,l.Zp)(),x=(0,a.useCallback)((e=>f(`${b}/${e}`)),[b,f]),y=(0,a.useMemo)((()=>({goto:{handleAction:e=>{let{slug:t}=e;return x(t)},icon:"chevron_right",tooltipText:"Room settings",isDisabled:()=>!c},addRule:{handleAction:e=>{const t={roomId:e.id};f(`/spaces/${E}/settings/notifications#notificationsActiveTab=1&silencingRulePrefill=${JSON.stringify(t)}`)},icon:"alarm_off",flavour:"hollow",neutral:!1,isDisabled:()=>!m,tooltipText:"Add new silencing rule",confirmation:!1},delete:{confirmLabel:"Yes, delete",confirmationMessage:e=>a.createElement(k.rj,{name:e.name,spaceName:n}),confirmationTitle:e=>(0,k.TU)(e.name),dataGa:e=>{let{slug:t}=e;return`manage-rooms::click-delete::${t}`},declineLabel:"Cancel",handleAction:u,isDisabled:e=>{let{untouchable:t}=e;return t||!s},tooltipText:"Delete room"}})),[s,x,m,c]);return{bulkActions:(0,a.useMemo)((()=>({addEntry:{dataGa:"manage-rooms::click::add-room",handleAction:o,isDisabled:!d,tooltipText:"Create room"},delete:{confirmationMessage:p,confirmationTitle:g,confirmLabel:"Yes, delete",dataGa:"manage-rooms::delete-bulk",declineLabel:"Cancel",handleAction:u,isDisabled:!s,tooltipText:"Delete rooms"}})),[d,s,p,g]),rowActions:y,onClickRow:x}},P=()=>{const e=(0,b.DL)(),t=(0,h.JT)("room:Delete"),n=e.filter((e=>!e.isAgent)).map((e=>({...e,disabled:e.untouchable||!t}))),[l,o]=(0,a.useState)(""),i=(0,r.ap)("name"),s=(0,r.ap)("id"),[c,,d,m]=(0,E.A)(),[,u]=(0,a.useState)([]),{bulkActions:g,rowActions:p}=F({startIsCreating:d,spaceId:s,spaceName:i});return{roomList:n,globalFilter:l,spaceName:i,spaceId:s,isCreating:c,rowActions:p,bulkActions:g,columns:y,startIsCreating:d,stopIsCreating:m,setGlobalFilter:o,onRowSelected:u,dataGa:"manage-rooms"}};var $=n(63314);const M=e=>{const{roomList:t,spaceName:n,isCreating:l,columns:r,setGlobalFilter:i,stopIsCreating:s,onRowSelected:c,rowActions:m,bulkActions:u,dataGa:g}=P();return a.createElement($.Ay,{tab:"Rooms"},a.createElement(d.Flex,(0,o.A)({column:!0,height:"100%",overflow:"hidden",gap:3},e),a.createElement(d.H3,null,"Rooms of ",n),a.createElement(d.Table,{onSearch:i,onRowSelected:c,enableSorting:!0,dataColumns:r,enableSelection:!0,data:t,bulkActions:u,rowActions:m,dataGa:g,testPrefixCallback:e=>e.name})),l&&a.createElement(p.n,{onClose:s}))};var L=n(6983),N=n(87860),R=n(29662),D=n(58055),B=n(86663),_=n(67990),U=n(47762);const V=()=>{const e=(0,_.CK)();return{nodes:(0,U.Gt)(e).map((e=>({...e,disabled:e.hasAccessibleData})))||[],nodeIds:e}};var H=n(71840);const O=(0,i.A)((()=>n.e(7103).then(n.bind(n,97103))),"Rules"),W=(0,a.memo)((e=>{let{roomUntouchable:t,...n}=e;const{nodes:l}=V({roomUntouchable:t});return a.createElement($.Ay,{tab:"Room::Nodes"},a.createElement(d.Flex,(0,o.A)({column:!0,height:"100%",overflow:"hidden",gap:3},n),t?null:a.createElement(a.Suspense,{fallback:""},a.createElement(O,null)),a.createElement(H.A,{showClaimNodeOnEmptySpace:!0,enableSelection:!0,customNodes:l,roomUntouchable:t})))}));var Y=n(45765),q=n(46902),j=n(83488),z=n.n(j),J=n(66245),G=n.n(J),K=n(55463),Z=n(70716),Q=n(96083);const X=[{id:"user",accessorKey:"user",header:"Name",cell:e=>{let{cell:t}=e;const{avatarURL:n,name:l}=t.row.original;return a.createElement(d.Flex,{alignItems:"center",gap:2},a.createElement(Q.A,{src:n,title:l}),a.createElement(d.TextSmall,null,l))}},{id:"email",accessorKey:"email",header:"Email",cell:e=>{let{getValue:t}=e;return a.createElement(d.TextSmall,null,t())}}],ee=[{id:"user",desc:!1}],te=e=>{let{setSelected:t}=e;const n=(0,K.Gi)(),l=(0,q.lb)(),r=(0,a.useMemo)((()=>G()(n,l)),[n,l]),o=(0,a.useCallback)((e=>{t(e.map((e=>e.id)))}),[]),i=(0,Z.Uv)(r);return a.createElement(d.Flex,{alignItems:"start",padding:[1],overflow:{horizontal:"hidden",vertical:"auto"}},a.createElement(d.Table,{dataColumns:X,data:i,autoResetSelectedRows:!0,sortableBy:ee,onSearch:z(),onRowSelected:o,enableSelection:!0,enableSorting:!0}))};var ne=n(92155);const ae=(0,ne.A)(d.Button),le=e=>{let{onAdd:t,onClose:n,selected:l,error:r,name:o}=e;return a.createElement(d.Flex,{alignItems:"center",justifyContent:"between"},r?a.createElement(d.Text,{color:"error"},"Select at least 1 user to add to ",o):a.createElement("div",null),a.createElement(d.Flex,{gap:2},a.createElement(d.Button,{neutral:!0,flavour:"hollow",onClick:n,label:"Cancel"}),a.createElement(ae,{disabled:!l.length,label:`Add ${l.length} members`,onClick:t})))};var re=n(27287),oe=n(84707),ie=n(49032),se=n(77181),ce=n(13871),de=n(78217),me=n(71835),ue=n(66269),ge=n(4659),pe=n(36850);const he=e=>{let{email:t}=e;return(0,ie.B9)(t)},be={header:"Invitations",text:"Invitations successfully sent!"},Ee=e=>{const{id:t,slug:n}=(0,r.ap)(),l=(0,A.ID)(),i=(0,A.wz)(l,"name"),[s,c]=(0,a.useState)([]),[,,m,u]=(0,se.g)(t),[,g]=(0,me.A)(),[p,b]=(0,a.useState)(),[E,f]=(0,a.useState)(),x=e=>{const{header:t,text:n}=e||be,a=(0,ce.UI)({header:t,text:n,success:!0});de.A.success(a,{context:"manageInvitations"}),c([]),b(Math.random())},y=(0,a.useCallback)((()=>{const e=s.filter(he).map((e=>({email:e.email,name:e.name,role:E,roomIDs:[l]}))),t=`${window.location.origin}/spaces/${n}/join-space`;m(e,t,{onSuccess:x,onError:g})}),[s,l,E]),C=(0,h._s)();return a.createElement(d.Flex,(0,o.A)({column:!0},e),a.createElement(d.H4,null,"Send invitations to ",i," room"),a.createElement(re.BZ,null,"TIP: You can send more invitations at once, separate each with a comma."),a.createElement(oe.y,{key:p,invitations:s,setInvitations:c}),a.createElement(d.H5,{margin:[4,0,0]},"Role"),a.createElement(re.BZ,null,"Choose a role for invited user."," ",a.createElement(ge.A,{href:pe.S,target:"_blank",rel:"noopener noreferrer",Component:d.TextSmall},"Learn more")),a.createElement(ue.A,{availableRoles:C,dataGA:"invite-to-room",dataTestId:"invite-selectRole",onChange:e=>{f(e.target.value)},value:E}),a.createElement(d.Box,{alignSelf:"end",margin:[4,0,0]},a.createElement(d.Button,{label:"Send",onClick:y,disabled:0===s.length||!E,flavour:"hollow",isLoading:u})))},fe=e=>{let{onClose:t,room:n}=e;const[l,r]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),s=(0,q.n)(n.spaceId,n.id),c=(0,a.useCallback)((()=>{if(!l.length)return i(!0);i(!1),s(l),t()}),[l,s]);return a.createElement(u.GO,{onClose:t},a.createElement(g.z,{onClose:t,isSubmodal:!0,title:a.createElement(a.Fragment,null,"Manage room",a.createElement(d.TextBig,{color:"textLite"},"\xa0/ Add Users"))}),a.createElement(Y.U,null,"Add users to room\xa0",n.name),a.createElement(u.Yv,null,a.createElement(Ee,{margin:[0,0,4]}),a.createElement(d.Flex,{column:!0,flex:!0,overflow:"hidden",padding:[0,0,2,0]},a.createElement(te,{setSelected:r})),a.createElement(le,{onClose:t,onAdd:c,selected:l,error:o,name:n.name})))};var xe=n(97245),ye=n(22292);const Ce=e=>`Remove ${e}`,ve=e=>{let{name:t,usersLength:n}=e;return n?1===n&&t?Ce(t):`Remove ${a=n} ${1===a?"user":"users"}`:"";var a},we=e=>{let{name:t,roomName:n}=e;return a.createElement(a.Fragment,null,"You are about to remove ",a.createElement("strong",null,t)," from room ",a.createElement("strong",null,n),".",a.createElement("br",null),"Are you sure you want to continue?")},Ae=e=>{let{roomName:t,usersLength:n}=e;const l=1===n?`${n} user`:`${n} users`;return a.createElement(a.Fragment,null,"You are about to remove ",a.createElement("strong",null,l)," from room ",a.createElement("strong",null,t),".",a.createElement("br",null),"Are you sure you want to continue?")},Te=e=>{let{name:t,roomName:n,usersLength:l}=e;return l?1===l&&t?a.createElement(we,{name:t,roomName:n}):a.createElement(Ae,{roomName:n,usersLength:l}):""};var Se=n(50876);const Ie=e=>{let{spaceId:t,roomId:n,startIsInviting:l,canRemoveUser:r,untouchable:o}=e;const i=(0,q.zC)(t,n),s=(0,A.XA)("name"),{sendButtonClickedLog:c,isReady:d}=(0,Se.A)(),m=e=>{if(!e)return;const t=Array.isArray(e)?e.map((e=>{let{user:t}=e;return t.id})):[e?.user.id];i(t)},u=(0,a.useCallback)((()=>{l(),d&&c({label:"Invite users"},!0)}),[d,c]);return{rowActions:(0,a.useMemo)((()=>({remove:{confirmLabel:"Yes, remove",confirmationMessage:e=>a.createElement(we,{name:e.name,roomName:s}),confirmationTitle:e=>Ce(e.name),declineLabel:"Cancel",disabledTooltipText:e=>o?"It's not allowed to remove users from this room. Try removing them from the space.":e.isSelf?"You cannot remove yourself. Click the leave button on the room tab.":r?"Remove is disabled":"You don't have the required permissions to remove users from this room",handleAction:m,isDisabled:e=>e.disabled,tooltipText:"Remove user from room"}})),[Ce,m,we,s]),bulkActions:(0,a.useMemo)((()=>({addEntry:{handleAction:u,tooltipText:"Invite users"},remove:{confirmLabel:"Yes, remove",confirmationMessage:(e,t)=>a.createElement(Te,{name:t[0].name,roomName:s,usersLength:t.length}),confirmationTitle:(e,t)=>ve({name:t[0].name,usersLength:t.length}),declineLabel:"Cancel",disabledTooltipText:e=>o?"It's not allowed to remove users from this room. Try removing them from the space.":e.length?r?"Remove is disabled":"You don't have the required permissions to remove users from this room":"You haven't selected any users",handleAction:m,tooltipText:"Remove users from room"}})),[m,Te,s,l,ve])}},ke=e=>{let{untouchable:t}=e;const n=(0,a.useMemo)((()=>[{id:"name",accessor:"name",header:"Name",cell:e=>{let{getValue:t}=e;return`${t()}`}},{id:"user",accessor:"user",header:"Users",cell:e=>{let{getValue:t}=e;const{name:n,avatarURL:l,email:r}=t();return a.createElement(d.Flex,{alignItems:"center",gap:2},a.createElement(Q.A,{src:l,title:`${n} - ${r||"email not set"}`}),a.createElement(d.TextSmall,null,n))}},{id:"email",accessor:"email",header:"Email",width:300,align:"center",cell:e=>{let{getValue:t}=e;return a.createElement(d.TextSmall,null,t())}}]),[]),l=(0,q.di)(),o=(0,ye.uW)("id"),i=(0,h.JT)("space:RemoveUser"),[s,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(""),[g,,p,b]=(0,E.A)(),f=(0,r.ap)("id"),x=(0,A.ID)(),{rowActions:y,bulkActions:C}=Ie({selectedRows:s,spaceId:f,roomId:x,startIsInviting:p,canRemoveUser:i,untouchable:t});return{columns:n,data:(0,a.useMemo)((()=>(0,xe.L)({data:l,currentUserId:o,canRemoveUser:i,untouchable:t})),[l]),columnVisibility:{name:!1},members:l,rowActions:y,bulkActions:C,isInviting:g,globalFilter:m,stopIsInviting:b,onRowSelected:c,setGlobalFilter:u,canRemoveUser:i}},Fe=e=>{let{room:t,...n}=e;const{untouchable:l}=t,{columns:r,data:i,columnVisibility:s,members:c,rowActions:m,bulkActions:u,isInviting:g,stopIsInviting:p,onRowSelected:h,setGlobalFilter:b,canRemoveUser:E}=ke({untouchable:l});return a.createElement($.Ay,{tab:"Room::User"},a.createElement(d.Flex,(0,o.A)({column:!0,height:"100%",overflow:"hidden",gap:3},n),a.createElement(d.H3,null,"Users in this room (",c.length,")"),a.createElement(d.Table,{enableSelection:!0,enableSorting:!0,columnVisibility:s,data:i,dataColumns:r,rowActions:m,bulkActions:u,onRowSelected:h,onSearch:b,testPrefixCallback:e=>e.name}),g&&a.createElement(fe,{onClose:p,room:t})))},Pe={room:0,nodes:1,users:2},$e=(0,c.default)(d.Box).attrs({height:"100%",padding:[4,0],border:{side:"top",color:"border"},flex:"1",overflow:"hidden"}).withConfig({displayName:"manageRoomModal__TabContent",componentId:"sc-lrxs0y-0"})([""]),Me={1:{polling:!0,pollingInterval:1e4},default:{polling:!1}},Le=()=>{const e=(0,l.Zp)(),t=(0,r.vt)(),{roomSlug:n,spaceSlug:o,settingsTab:i}=(0,l.g)(),c=(0,A.J_)(t,n),[m,u]=(0,a.useState)(Me.default);(0,N.A)({spaceId:t,id:c,...m}),(0,R.A)(t,c);const g=(0,h.JT)("room:ReadUsers"),p=(0,A.wz)(c),[b,E]=(0,a.useState)(p.name),{search:f}=(0,l.zy)(),{tab:x="room"}=B.parse(f),y=Pe[x],[C,v]=(0,a.useState)(y),[w,T,S]=(0,d.useInputValue)({maxChars:255,value:p.description}),I=(0,a.useCallback)((()=>{e((0,s.tW)(D.bq,{spaceSlug:o,settingsTab:i}))}),[o,i]),k=(0,A.a8)(p.id,{shouldPersist:!0,onSuccess:I}),F=(0,a.useCallback)((()=>k({name:b,description:w})),[b,w,k]),P=(0,a.useCallback)((e=>{v(e),u(Me[e]||Me.default)}),[v,u]);return a.createElement(d.Flex,{column:!0,justifyContent:"between",overflow:"hidden","data-testid":"manageRoom",flex:"1",height:"100%"},a.createElement(d.Tabs,{"data-testid":"manageRoom-tabs",selected:C,onChange:P,TabContent:$e,height:"100%",position:"relative",overflow:"hidden",width:"100%"},a.createElement(d.Tab,{"data-testid":"manageRoom-roomTab",label:a.createElement(d.H5,null,"Room")},a.createElement(L.U,{roomName:b,setRoomName:E,roomDescription:w,setRoomDescription:T,charsDescIndicator:S,"data-testid":"manageRoom-roomTabContent",id:p.id,navigateToParent:I,onSaveClick:F})),a.createElement(d.Tab,{"data-testid":"manageRoom-nodesTab",label:a.createElement(d.H5,null,"Nodes")},a.createElement(W,{roomUntouchable:p.untouchable,"data-testid":"manageRoom-nodesTabContent"})),g&&a.createElement(d.Tab,{"data-testid":"manageRoom-usersTab",label:a.createElement(d.H5,null,"Users")},a.createElement(Fe,{"data-testid":"manageRoom-usersTabContent",room:p}))),C===Pe.room&&a.createElement(d.Flex,{justifyContent:"end"}))};var Ne=n(97054);const Re=e=>{let{children:t}=e;return(0,Ne.TP)(),t},De=e=>{let{children:t}=e;return(0,A.XA)().loaded?t:null},Be=()=>a.createElement(l.BV,null,a.createElement(l.qh,{path:"/",element:a.createElement(M,null)}),a.createElement(l.qh,{path:":roomSlug",element:a.createElement(Re,null,a.createElement(De,null,a.createElement(Le,null)))}));var _e=n(38819),Ue=n(37618),Ve=n(6323),He=n(80158),Oe=n(29217);const We=[{id:"name",accessor:"name",header:"Name",cell:e=>{let{getValue:t}=e;return`${t()}`}},{id:"user",accessor:"user",width:300,header:"Users",cell:e=>{let{getValue:t}=e;const{name:n,avatarURL:l,email:r}=t();return a.createElement(d.Flex,{alignItems:"center",gap:2},a.createElement(Q.A,{src:l,title:`${n} - ${r||"email not set"}`}),a.createElement(d.TextSmall,null,n))}},{id:"email",accessor:"email",header:"Email",width:300,align:"center",cell:e=>{let{getValue:t}=e;return a.createElement(d.TextSmall,null,t())}},{id:"type",accessor:"type",header:"Role",width:100,align:"center",cell:e=>{let{getValue:t,row:{original:{user:{deactivated:n}}}}=e;return a.createElement(d.Flex,{alignItems:"center",gap:1},a.createElement(d.TextSmall,{strong:!0},(0,He.Zr)(t())),n&&a.createElement(Oe.A,{content:"This user's role doesn't have permission to access any information on the Space. Please review user's role or space's plan."},a.createElement(d.Icon,{name:"warning_triangle",height:"18px",width:"18px",color:["yellow","amber"]})))}}];n(14905),n(8872);var Ye=n(54702),qe=n(12800),je=n(5169),ze=n(66294);const Je=e=>{const t=(0,je.t)();return(0,C.Zs)((n=>{let{snapshot:a,set:l}=n;return async function(n){let{onSuccess:r,onError:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=await a.getPromise((0,K.kd)({id:e,key:"ids"})),s=i.filter((e=>!e.includes(n)));l((0,K.kd)({id:e,key:"ids"}),s);try{await(0,Ye.XY)(e,n),(async e=>{let{cacheKeyPrefix:t,memberIds:n,spaceId:a}=e;const l=`${t}${(0,ze.$)(a)}`;await(0,qe.y)({key:l,handleResults:e=>e.results.filter((e=>!n.includes(e.id)))})})({cacheKeyPrefix:t,spaceId:e,memberIds:n}),r&&r()}catch(c){l((0,K.kd)({id:e,key:"ids"}),i),o&&o()}}}),[e])},Ge=e=>(0,C.Zs)((t=>{let{snapshot:n,set:a}=t;return async function(t,l){let{onSuccess:r,onError:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await n.getPromise((0,Z.Z6)(t)),s=await Promise.all(t.map((async t=>({mId:t,role:await n.getPromise((0,K.K2)({id:t,spaceId:e}))})))),{role:c,...d}=l;t.forEach((e=>{a((0,Z.m)({id:e}),(e=>({...e,...d})))})),c&&t.forEach((t=>{a((0,K.K2)({id:t,spaceId:e}),c)}));try{await(async(e,t,n)=>Promise.all(t.map((async t=>await(0,Ye.w5)(e,t,n)))))(e,t,l),r&&r()}catch(m){i.forEach((e=>{let{id:t,...n}=e;return a((0,Z.m)({id:t}),{id:t,...n})})),c&&s.forEach((t=>{let{mId:n,role:l}=t;return a((0,K.K2)({id:n,spaceId:e}),l)})),o&&o()}}}),[e]),Ke="change-user-role",Ze="changeUserRole",Qe=e=>{let{handleAction:t,ids:n,onClose:l}=e;const r=(0,K.$D)(n),o=1===r.length?r[0]:null,i=(0,h._s)(),[s,c]=(0,a.useState)(o);return a.createElement(d.ConfirmationDialog,{confirmLabel:"Save","data-ga":Ke,"data-testid":Ze,handleConfirm:()=>{t(s),l()},handleDecline:l,isConfirmDisabled:!s,isConfirmPositive:!0,message:a.createElement(d.Flex,{gap:2,column:!0},a.createElement(d.TextSmall,null,"Learn more about Netdata role-based access model on"," ",a.createElement(ge.A,{href:pe.S,target:"_blank",rel:"noopener noreferrer",Component:d.TextSmall},"our documentation")),a.createElement(ue.A,{availableRoles:i,dataGA:Ke,dataTestId:Ze,onChange:e=>{c(e.target.value)},value:s})),title:"Change roles"})};var Xe=n(29848);const et=e=>{let{spaceId:t,startIsInviting:n}=e;const l=Je(t),r=Ge(t),i=(0,h.JT)("space:InviteUser"),s=(0,Xe.ly)(),c=(0,a.useCallback)((e=>{let{role:t,members:n}=e;r(n,{role:t},{onSuccess:s})}),[]),d=e=>t=>{if(!e)return;const n=Array.isArray(e)?e.map((e=>{let{user:t}=e;return t.id})):[e?.user.id];c({role:t,members:n})},m=(e,t)=>{if(!e)return;const n=Array.isArray(e)?e.map((e=>{let{user:t}=e;return t.id})):[e?.user.id];l(n,{onSuccess:t.resetRowSelection})},u=(0,a.useCallback)((e=>a.createElement(a.Fragment,null,"Are you sure you want remove ",a.createElement("strong",null,e.name)," from this space?")),[]),g=(0,a.useCallback)(((e,t)=>{const n=t.length;return n?1===n?"Delete User":"Delete Users":""}),[]),p=(0,a.useCallback)(((e,t)=>{const n=t.length;return n?a.createElement(a.Fragment,null,"Are you sure you want remove"," ",a.createElement("strong",null,1===n?t[0].name:`${t.length} users`)," ","from this space?"):""}),[]);return{rowActions:(0,a.useMemo)((()=>({userSettings:{CustomUIAction:e=>{let{data:t,...n}=e;return a.createElement(Qe,(0,o.A)({ids:[t.user.id]},n))},handleAction:d,tooltipText:"Change Role",isDisabled:e=>e.disabled,disabledTooltipText:e=>e.isSelf?"You cannot change your role":"You don't have the required permissions to change roles for users"},delete:{handleAction:m,confirmationTitle:"Delete User",confirmationMessage:u,isDisabled:e=>e.disabled,disabledTooltipText:e=>e.isSelf?"You cannot delete yourself. Try the space info tab, to leave space.":"You don't have the required permissions to remove users from space"}})),[]),bulkActions:(0,a.useMemo)((()=>({addEntry:{handleAction:n,tooltipText:"Invite user",isDisabled:()=>!i,disabledTooltipText:"You don't have the required permissions to invite new users"},userSettings:{CustomUIAction:e=>{let{data:t,...n}=e;return a.createElement(Qe,(0,o.A)({ids:t.map((e=>{let{user:t}=e;return t.id}))},n))},handleAction:d,tooltipText:"Change Roles",disabledTooltipText:e=>e?.length?"You don't have the required permissions to change roles for users":"You haven't selected any users"},delete:{handleAction:m,confirmationTitle:g,confirmationMessage:p,disabledTooltipText:e=>e?.length?"You don't have the required permissions to remove users from space":"You haven't selected any users"}})),[i,g,p])}},tt=()=>{const e=(0,r.vt)(),t=(0,r.ns)(e,"name"),n=(0,K.bj)(),l=(0,ye.uW)("id"),[o,,i,s]=(0,E.A)(),[c,d]=(0,a.useState)(""),[m,u]=(0,a.useState)([]),{rowActions:g,bulkActions:p}=et({selectedRows:m,spaceId:e,startIsInviting:i}),b=(0,h.JT)("space:RemoveUser"),f=(0,h.JT)("user:ChangeRoles"),x=(0,h.Ge)(),y=b||f,C=(0,a.useMemo)((()=>(e=>{let{fromRolePermissions:t,userList:n,canModifyUser:a,currentUserId:l}=e;return n.reduce(((e,n)=>{const r=l===n?.id,o=t.includes(n.role);return e.push({name:n.name,email:n.email,user:{avatarURL:n.avatarURL,deactivated:n.deactivated,name:n.name,email:n.email,id:n.id},type:n.role,disabled:!o||!a||r,isSelf:r,canModifyUser:a,canSetRole:o}),e}),[])})({userList:n,currentUserId:l,canModifyUser:y,fromRolePermissions:x})),[n]);return{columns:We,spaceName:t,members:n,currentUserId:l,data:C,isInviting:o,globalFilter:c,rowActions:g,bulkActions:p,columnVisibility:{name:!1},onRowSelected:u,setGlobalFilter:d,startIsInviting:i,stopIsInviting:s,canModifyUser:y}},nt=e=>{const{columns:t,data:n,isInviting:l,rowActions:r,bulkActions:i,columnVisibility:s,stopIsInviting:c,setGlobalFilter:m,onRowSelected:u}=tt();return a.createElement($.Ay,{tab:"Users"},a.createElement(d.Flex,(0,o.A)({column:!0,height:"100%",overflow:"hidden",flex:"grow",padding:[2,4,0,4]},e),a.createElement(d.TextBig,{margin:[1,0,3]},"Learn more about Netdata role-based access model on"," ",a.createElement(ge.A,{href:pe.S,target:"_blank",rel:"noopener noreferrer",Component:d.TextBig},"our documentation")),a.createElement(d.Table,{onSearch:m,data:n,dataColumns:t,enableSorting:!0,enableSelection:!0,onRowSelected:u,bulkActions:i,rowActions:r,columnVisibility:s,testPrefixCallback:e=>e.name})),l&&a.createElement(Ve.d,{onClose:c,isSubmodal:!0}))},at=(0,i.A)((()=>n.e(7649).then(n.bind(n,77649)))),lt={side:"top",type:"solid",size:"1px",color:"border"},rt=e=>{const t=(0,r.ap)("id"),n=(0,Ue.ES)(t),{userManagementActiveTab:l=0}=(0,_e.PP)(),i=(0,a.useCallback)((e=>{const t=(0,_e.PP)();(0,_e.Z8)({...t,userManagementActiveTab:e})}),[]);return a.createElement(a.Fragment,null,a.createElement(d.Flex,(0,o.A)({padding:[0,0,0,4]},e),a.createElement(d.H3,null,"User Management")),a.createElement(d.Tabs,{selected:parseInt(l,10),onChange:i,height:"calc(100% - 110px)",margin:[4,0,0,0]},a.createElement(d.Tab,{"data-testid":"spaceSettings-user-management-users-tab",label:a.createElement(d.Text,null,"Users")},a.createElement(nt,{border:lt})),n?null:a.createElement(d.Tab,{"data-testid":"spaceSettings-user-management-aaa-tab",label:a.createElement(d.Text,null,"Authentication & Authorization")},a.createElement(a.Suspense,{fallback:""},a.createElement(at,{border:lt})))))};var ot=n(74530),it=n(47193),st=n(73865);const ct=(0,a.memo)((e=>{const t=(0,r.vt)(),n=(0,r.ap)("name"),{nodes:l}=(0,it.A)(),{preferredNodes:i}=(0,st.A)(),[s,c]=(0,a.useState)([]),[m,,u,g]=(0,E.A)();return(0,ot.A)(t),(0,a.useEffect)((()=>{c(i)}),[i]),a.createElement($.Ay,{tab:"Nodes"},a.createElement(d.Flex,(0,o.A)({column:!0,"data-testid":"manageClaimedNodes",height:"100%",overflow:"hidden",gap:3},e),a.createElement(d.H3,{"data-testid":"manageClaimedNodes-header"},`Connect Nodes to ${n}`),a.createElement(H.A,{showClaimNodeOnEmptySpace:!0,showClaimModalWithRoomSelection:!0,enableSelection:!0,customNodes:l,isSpace:!0,tempPreferredNodes:s,setTempPreferredNodes:c,loading:m,startLoading:u,stopLoading:g})))})),dt=ct;var mt=n(54961),ut=n(26770),gt=n(71856);const pt=e=>{let{name:t,spaceName:n}=e;return a.createElement(a.Fragment,null,"You are about to delete ",a.createElement("strong",null,t)," channel from ",a.createElement("strong",null,n)," space.",a.createElement("br",null),"This cannot be undone. Are you sure you want to continue?")};var ht=n(30960),bt=(n(8159),n(37550),n(63450));const Et=e=>{let{integration:t={},testId:n,...l}=e;const r=l.checked?"disable":"enable";return a.createElement(d.Toggle,(0,o.A)({colored:!0,"data-testid":`${n}-toggle`,"data-ga":`manage-channels::toggle-${t.slug}-${r}::notifications-tab`},l))},ft=e=>{let{testId:t,tooltipContent:n="plan",...l}=e;return l.disabled?a.createElement(Oe.A,{align:"top",content:gt.r7[n],"data-testid":`${t}-warning`,plain:!0},a.createElement(d.Flex,{padding:[2,2,0,0],position:"relative"},a.createElement(bt.id,{"data-testid":`${t}-warningIcon`}),a.createElement(Et,(0,o.A)({testId:t},l)))):a.createElement(Et,(0,o.A)({testId:t},l))},xt=e=>{let{"data-testid":t="cellName",enabled:n,id:l,integration:r,isAvailable:i,name:s,spaceId:c,tooltipContent:m,...u}=e;const g=(0,ut.t5)(c,"channels"),p=(0,ut.vq)(c,"channels");return a.createElement(d.Flex,(0,o.A)({alignItems:"center","data-testid":t,gap:4},u),a.createElement(ft,{checked:n,disabled:!i,integration:r,onChange:e=>{let{target:t}=e;const n=t.checked;p(g.map((e=>e.id===l?{...e,enabled:n}:e))),(0,mt.Jq)(c,l,n)},testId:t,tooltipContent:m}),a.createElement(d.Text,{"data-testid":`${t}-label`},s))},yt=e=>{let{"data-testid":t="cellService",integration:n={},kindLabel:l,...r}=e;const i=gt.a$[n.slug]||{};return a.createElement(d.Flex,(0,o.A)({alignItems:"center","data-testid":t,gap:2,justifyContent:"between",width:"100%"},r),a.createElement(d.Flex,{alignItems:"center","data-testid":`${t}-integration`,gap:2},a.createElement(d.Icon,(0,o.A)({"data-testid":`${t}-icon`},i)),a.createElement(d.Text,{"data-testid":`${t}-label`},n.title)),a.createElement(Oe.A,{content:l,"data-testid":`${t}-kind`,plain:!0},a.createElement(d.Icon,{color:"textLite",height:"16px",name:gt.HA[n.kind]?.icon,width:"16px"})))},Ct=e=>{let{canManageChannels:t,roomOptions:n,spaceId:l}=e;return[{accessor:"name",cell:e=>{let{getValue:n,row:r}=e;return a.createElement(xt,{enabled:r.original.enabled,id:r.original.id,integration:r.original.integration,isAvailable:t&&r.original.available,name:n(),spaceId:l,tooltipContent:t?"plan":"role"})},header:"Name",id:"name"},{accessor:"integration",cell:e=>{let{getValue:t,row:n}=e;return a.createElement(yt,{integration:t(),kindLabel:n.original.kindLabel})},enableColumnFilter:!0,filterFn:(e,t,n)=>{const a=e.original.integration;return n.length<1||n.some((e=>{let{value:t}=e;return""===t||t===a?.slug}))},header:"Service",id:"integration",meta:{filter:{component:"select",isMulti:!0,options:Object.keys(gt.a$).map((e=>({label:e,value:e}))),tiny:!0,"data-ga":"manage-integrations::select-service::notification-integrations-tab"},tooltip:a.createElement(d.Flex,{column:!0,width:{max:"200px"},gap:2},a.createElement(d.TextMicro,null,"Services are distinguished in two categories."),a.createElement(d.TextMicro,null,a.createElement(bt.Jg,{name:gt.HA.PERSONAL.icon})," ",a.createElement(d.TextMicro,{strong:!0},"Personal:")," ",gt.HA.PERSONAL.tooltip),a.createElement(d.TextMicro,null,a.createElement(bt.Jg,{name:gt.HA.SYSTEM.icon})," ",a.createElement(d.TextMicro,{strong:!0},"System:")," ",gt.HA.SYSTEM.tooltip))}},{accessor:"notificationLabel",cell:e=>{let{getValue:t}=e;return a.createElement(d.Text,{"data-testid":"channelNotificationsCell"},t())},enableColumnFilter:!0,filterFn:(e,t,n)=>{const a=e.original.notificationLabel;return n.length<1||n.some((e=>{let{label:t}=e;return""===t||t===a}))},header:"Notifications",id:"notificationLabel",meta:{filter:{component:"select",isMulti:!0,options:Object.values(gt.w8),tiny:!0,"data-ga":"manage-integrations::select-notification::notification-integrations-tab"}}},{accessor:"rooms",cell:e=>{let{getValue:t,row:l}=e;const r={"data-testid":"channelRoomsCell"};if(l.original.internal)return a.createElement(d.Text,r,gt.Oh.label);if(!l.original.rooms&&!l.original.rooms?.length)return a.createElement(d.Text,r,gt.PT.label);const o=(0,ht.Pl)({roomIds:t(),roomOptions:n});return a.createElement(d.Text,{"data-testid":"channelRoomsCell"},o)},enableColumnFilter:!0,filterFn:(e,t,n)=>n.length<1||n.some((t=>{let{label:n,value:a}=t;if(e.original.internal)return n===gt.Oh.label;const l=e.original.rooms||[];return l.length?l.includes(a):n===gt.PT.label})),header:"Rooms",id:"rooms",meta:{filter:{component:"select",isMulti:!0,options:n,tiny:!0,"data-ga":"manage-integrations::select-room::notification-integrations-tab"}}}]};var vt=n(58159),wt=n(18061),At=n(88982);const Tt=(e,t)=>{const n=(0,ut.ef)(t),a=(0,At.A)({all:!0});(0,wt.A)((()=>({enabled:!!t,fetch:()=>(0,mt.t9)(e,t),onFail:e=>n({...vt.V,error:e.message}),onSettle:()=>n({loading:!1,loaded:!0}),onSuccess:e=>n({...vt.V,...e.rooms?{roomSelections:a.filter((t=>{let{value:n}=t;return e.rooms.includes(n)}))}:{},...e})})),[e,t])};var St=n(79769);const It=["MobileApp","Email"],kt=()=>{const e=(0,l.Zp)(),t=(0,h.JT)("channel:Manage"),n=(0,r.vt)(),o=(0,r.ap)("name"),i=(0,r.bq)(),[c,d]=(0,me.A)(),[m,u]=(0,a.useState)(""),g=(0,ut.bY)();(0,St.A)(n);const p=(0,ut.t5)(n,"channels"),b=(0,ut.t5)(n,"currentChannelId"),E=(0,ut.vq)(n,"channels"),f=(0,ut.vq)(n,"currentChannelId"),x=(0,At.A)({all:!0,internal:!0}),{alerts:y,name:C,rooms:v,secrets:w}=(0,ut.g4)(b);Tt(n,b);const A=(0,a.useCallback)((e=>{f(e)}),[]),T=(0,a.useCallback)((async e=>{let{id:t}=e;try{await(0,mt.Wb)(n,t),E(p.filter((e=>e.id!==t))),c({header:"Configuration deleted successfully!"})}catch(a){d(a)}}),[p,n]),S=(0,a.useCallback)((()=>{e((0,s.tW)(D.uX,{spaceSlug:i,settingsTab:D.A8,settingsSubTab:D.G0}))}),[i]),I=(0,a.useMemo)((()=>({addEntry:{dataGa:"manage-channels::click-add-channel::notifications-tab",flavour:"hollow",handleAction:S,iconColor:"success",label:t?"Add Configuration":"View configurations",small:!0,strong:!0,width:"auto",...t?{}:{icon:""}}})),[t,S]),k=(0,a.useCallback)((e=>{e&&g({id:e})}),[g]),F=(0,a.useMemo)((()=>({testNotification:{handleAction:e=>{let{id:t}=e;k(t)},icon:"notificationTrigger",confirmation:!1,tooltipText:"Test your notification settings",disabledTooltipText:"You cannot test this notification",isDisabled:e=>{let{slug:t}=e;return It.includes(t)}},edit:{dataGa:e=>{let{integration:t={}}=e;return`manage-rooms::click-edit::${t.slug}`},disabledTooltipText:"Edit is disabled",handleAction:e=>{let{id:t}=e;A(t)},isDisabled:e=>{let{available:n,internal:a}=e;return!t||!n||a},TooltipComponent:Oe.A,tooltipText:"Edit setting"},delete:{confirmLabel:"Yes, delete",confirmationMessage:e=>{let{integration:t={}}=e;return a.createElement(pt,{name:t.name,spaceName:o})},confirmationTitle:e=>{let{name:t}=e;return(0,ht.O5)(t)},dataGa:e=>{let{integration:t={}}=e;return`manage-rooms::click-delete::${t.slug}`},declineLabel:"Cancel",handleAction:T,isDisabled:e=>{let{integration:n={}}=e;return!t||n.internal},TooltipComponent:Oe.A,tooltipText:"Delete setting"}})),[t,T,S]);return{bulkActions:I,channelData:p,currentChannelId:b,columns:Ct({canManageChannels:t,roomOptions:x,spaceId:n}),dataGa:"manage-channels",onFilter:(e,t,n)=>{const a=e.original,l=n.toLowerCase();if(a.name.toLowerCase().includes(l))return!0;if(a.integration.slug.toLowerCase().includes(l))return!0;if(a.notificationLabel.toLowerCase().includes(l))return!0;if(a.internal)return gt.Oh.label.toLowerCase().includes(l);const r=a.rooms||[];if(!r.length)return gt.PT.label.toLowerCase().includes(l);return(0,ht.Pl)({roomIds:r,roomOptions:x}).toLowerCase().includes(l)},onModalClose:()=>{E(p.map((e=>e.id===b?{...e,alerts:y,name:C,rooms:v,secrets:w}:e))),f("")},rowActions:F,search:m,setSearch:u}};n(74648),n(23215);var Ft=n(83039),Pt=n(15440),$t=n(5628);const Mt={hours:0,minutes:30},Lt=e=>{let{title:t,value:n,onChange:l}=e;const r=(0,a.useMemo)((()=>null===n||isNaN(n)?0:60*parseInt(n,10)),[n]),o=(0,a.useCallback)((e=>{l(e/60)}),[l]);return a.createElement(d.Flex,{column:!0,gap:1},a.createElement(Pt.A,{title:t,description:"Set the desired redelivery time interval for notification to be repeated (From 30 minutes up to 24 hours)."}),a.createElement($t.A,{testId:"notifications-repeat-interval",value:r,onChange:o,applyOnChange:!0,minValues:Mt,hideSeconds:!0,size:"tiny"}))};var Nt=n(47130);const Rt=(0,ne.A)((0,Nt.A)(d.Button)),Dt="modal",Bt=e=>{let{id:t="new",integrationId:n,onClose:o,isSubmitEnabled:i}=e;const{alarms:c,name:d,repeatNotificationMin:m,rooms:u,slug:g,integration:p,secrets:h}=(0,ut.g4)(t),b=(0,Xe.ly)(),E=(0,l.Zp)(),[f,x]=(0,me.A)(),y=(0,r.vt)(),C=(0,r.bq)(),v=(0,ut.bY)(),w=(0,a.useCallback)((()=>{(g||p)&&v({slug:g||p,secrets:h})}),[g,h,v]),A=(0,s.tW)(D.bq,{spaceSlug:C,settingsTab:D.A8});return a.createElement(bt.fn,{column:!1,gap:2,"data-testid":`${Dt}-footer`,justifyContent:"end"},a.createElement(Rt,{feature:"IntegrationNotification",integrationId:n,label:"Test",flavour:"hollow",onClick:w,disabled:!i,tooltipProps:{content:"Test your notification settings",align:"bottom"}}),a.createElement(Rt,{feature:"IntegrationNotification",integrationId:n,"data-testid":`${Dt}-confirmButton`,disabled:!i,label:"OK",onClick:async()=>{try{const e={alarms:c,integrationID:n,...d?{name:d}:{},...u?.length?{Rooms:u}:{},...null==m||isNaN(m)?{}:{repeat_notification_min:parseInt(m,10)},secrets:h};"new"===t?await(0,mt.Qb)(y,e):await(0,mt.eQ)(y,t,e),f({header:"new"===t?"Configuration created successfully!":"Configuration updated successfully!"}),b(),o(),E(A)}catch(e){x(e)}},textTransform:"uppercase",tooltipProps:{content:"Save your settings",align:"bottom"}}))},_t="modal",Ut=e=>{let{id:t="new",integrationId:n,onClose:l,...r}=e;const{alarms:i,title:s,description:c,docsLink:m,fields:u,integration:g,loaded:p,name:h,required:E,roomSelections:f,repeatNotificationMin:x,secrets:y,error:C}=(0,ut.g4)(t),v=e=>`manage-${g}-channel::${e}::notification-${n?"integrations":"channels"}-tab`,w=(0,At.A)({all:!0}),A=(0,b.DL)(),T=(0,ut.ef)(t,"alarms"),S=(0,ut.ef)(t,"name"),I=(0,ut.ef)(t,"roomSelections"),k=(0,ut.ef)(t,"secrets"),F=(0,ut.ef)(t,"rooms"),P=(0,ut.ef)(t,"repeatNotificationMin"),[$,M]=(0,a.useState)({});if(!p)return null;const L=Object.keys($),N=E.every((e=>(0,ht.ct)(e,y[e],u[e]))),R=!L.length||L.every((e=>{const t=y[e].selection;return $[e].every((n=>(0,ht.ct)(n,y[e][n],u[e].fields[t][n])))})),D=i&&N&&R;return a.createElement(d.Modal,{onEsc:l},a.createElement(bt.$m,(0,o.A)({"data-testid":r["data-testid"]||_t},C?{height:"auto"}:{}),a.createElement(d.ModalHeader,{border:{side:"bottom",color:"disabled"},column:!0,"data-testid":`${_t}-header`,gap:.5,padding:[6,4,3]},C?a.createElement(a.Fragment,null,a.createElement(d.H3,null,"Error"),l&&a.createElement(bt.Oj,{"data-ga":v("close-modal"),"data-testid":`${_t}-close`,onClose:l})):a.createElement(a.Fragment,null,a.createElement(d.Flex,{alignItems:"center","data-testid":`${_t}-headerMain`},a.createElement(d.Flex,{"data-testid":`${_t}-titleContainer`,gap:1},a.createElement(d.Icon,(0,o.A)({"data-testid":`${_t}-titleIcon`},gt.a$[g]||{})),a.createElement(d.H3,{"data-testid":`${_t}-title`},s)),l&&a.createElement(bt.Oj,{"data-ga":v("close-modal"),"data-testid":`${_t}-close`,onClose:l})),a.createElement(d.TextSmall,{as:d.Box,"data-testid":`${_t}-description`},c,"\xa0",a.createElement(ge.A,{Component:d.TextSmall,"data-ga":v("click-docs"),"data-testid":`${_t}-docsLink`,href:m,target:"_blank",whiteSpace:"nowrap"},"Learn how to configure it.")))),C?a.createElement(d.ModalBody,{alignItems:"center",justifyContent:"center",height:"180px"},a.createElement(d.TextBig,null,C)):a.createElement(a.Fragment,null,a.createElement(d.ModalBody,{"data-testid":`${_t}-body`,overflow:{vertical:"auto"},padding:[0]},a.createElement(bt.fn,{gap:2,"data-testid":`${_t}-standardFields`,hasBorder:!0},a.createElement(d.Text,{"data-testid":`${_t}-standardFields-header`},"Notification settings"),a.createElement(d.Flex,{column:!0,"data-testid":`${_t}-standardFields-body`,gap:3},a.createElement(Ft.A,{component:"input","data-ga":v("configuration-name-input"),"data-testid":`${_t}-configurationName`,onChange:S,placeholder:"i.e All alerts from All nodes",title:"Configuration name",value:h}),a.createElement(Ft.A,{component:"select","data-ga":v("rooms-select"),"data-testid":`${_t}-rooms`,isMulti:!0,onChange:e=>{if(1===A.length)return;if(0===e.length)return F([]),void I([]);if(e.length===A.length||!e[e.length-1]?.value)return F([]),void I([gt.PT]);const t=e.map((e=>{let{value:t}=e;return t})).filter(Boolean),n=e.length>1?e.filter((e=>e.value)):e;F(t),I(n)},options:w,placeholder:"Select rooms",title:"Rooms",value:f}),a.createElement(Ft.A,{component:"select","data-ga":v("notification-select"),"data-testid":`${_t}-notifications`,isRequired:!0,onChange:e=>{let{value:t}=e;T(t)},options:Object.values(gt.N4),placeholder:"Select notifications",title:"Notifications",value:gt.N4[i]}),a.createElement(Lt,{title:"Notifications repeat",value:x,onChange:P}))),a.createElement(bt.fn,{gap:2,"data-testid":`${_t}-dynamicFields`,hasBorder:!0},a.createElement(d.Text,{"data-testid":`${_t}-dynamicFields-header`},"Integration configuration"),a.createElement(d.Flex,{column:!0,"data-testid":`${_t}-dynamicFields-body`,gap:3},Object.values(u).map((e=>{let{id:t,getValue:n,onChange:l,...r}=e;return a.createElement(Ft.A,(0,o.A)({"data-ga":v(`${t}-${r.component}`),"data-testid":`${_t}-${t}`,getDataGa:v,key:t,id:t,onChange:l?.({id:t,setRequiredSubsets:M,setSecrets:k}),secrets:y,setSecrets:k,value:n?.({id:t,secrets:y})},r))}))))),a.createElement(Bt,{id:t,integrationId:n,onClose:l,isSubmitEnabled:D}))))},Vt=e=>{let{"data-testid":t="channelList",...n}=e;const{bulkActions:l,channelData:r,currentChannelId:i,columns:s,dataGa:c,onFilter:m,onModalClose:u,rowActions:g,search:p,setSearch:h}=kt();return a.createElement($.Ay,{tab:"Notifications::Channels"},a.createElement(d.Flex,(0,o.A)({column:!0,"data-testid":t,gap:4,height:"100%",width:"100%",margin:[3,0]},n),a.createElement(d.Table,{bulkActions:l,data:r,dataColumns:s,dataGa:c,globalFilter:p,globalFilterFn:m,onSearch:h,rowActions:g,testPrefix:"channelList",testPrefixCallback:e=>e.name}),!!i&&a.createElement(Ut,{"data-testid":"editChannelModal",id:i,onClose:u})))},Ht=0,Ot=(0,i.A)((()=>n.e(5304).then(n.bind(n,25304))),"SilencingRules"),Wt=(0,i.A)((()=>n.e(3730).then(n.bind(n,23730))),"Reachability"),Yt={side:"top",type:"solid",size:"1px",color:"border"},qt=()=>{const{notificationsActiveTab:e=Ht}=(0,_e.PP)(),t=(0,a.useCallback)((e=>{const t=(0,_e.PP)();(0,_e.Z8)({...t,notificationsActiveTab:e})}),[]);return a.createElement(a.Fragment,null,a.createElement(d.Flex,{padding:[0,0,0,4]},a.createElement(d.H3,null,"Alerts & Notifications")),a.createElement(d.Tabs,{selected:parseInt(e,10),onChange:t,height:"calc(100% - 44px)",margin:[4,0,0,0]},a.createElement(d.Tab,{"data-testid":"spaceSettings-notifications-methods-tab","data-ga":"manage-space::click-tab::notifications-methods-tab",label:a.createElement(d.Text,null,"Notification Methods")},a.createElement(d.Flex,{padding:[2,4],border:Yt,flex:"grow"},a.createElement(Vt,null))),a.createElement(d.Tab,{"data-testid":"spaceSettings-notifications-silencing-rules-tab","data-ga":"manage-space::click-tab::notifications-silencing-rules-tab",label:a.createElement(d.Text,null,"Silencing Rules")},a.createElement(d.Flex,{border:Yt,flex:"grow"},a.createElement(a.Suspense,null,a.createElement(Ot,null)))),a.createElement(d.Tab,{"data-testid":"spaceSettings-reachability-notifications-tab","data-ga":"manage-space::click-tab::reachability-notifications-tab",label:a.createElement(d.Text,null,"Reachability")},a.createElement(d.Flex,{border:Yt,flex:"grow"},a.createElement(a.Suspense,null,a.createElement(Wt,null))))))};var jt=n(84976),zt=n(28738),Jt=n(26751),Gt=n(54856);const Kt=e=>{let{available:t,"data-testid":n="card",description:l,docsLink:r,fields:i,id:s,internal:c,kind:m,kindLabel:u,slug:g,required:p,title:b,...f}=e;const x=gt.a$[g]||{},y=(0,ut.Mw)("new"),C=(0,ut.ef)("new"),v=(0,h.JT)("channel:Manage"),[w,,A,T]=(0,E.A)(!1),S=(0,a.useCallback)((()=>{C({...vt.V,title:b,description:l,docsLink:r,fields:i,integration:g,loading:!1,loaded:!0,required:p,secrets:(0,ht.s7)(i,p)}),A()}),[l,r,i,g,p]);return a.createElement(a.Fragment,null,a.createElement(d.Flex,(0,o.A)({background:"elementBackground",column:!0,"data-testid":n,justifyContent:"between",flex:!1,height:37,padding:[3,2,2,3],margin:[0,0,4,0],position:"relative",overflow:"hidden",round:.5,width:75},f),a.createElement(bt.MU,(0,o.A)({"data-testid":`${n}-blurredIcon`},x)),a.createElement(d.Flex,{column:!0,"data-testid":`${n}-details`,gap:3,margin:[0,0,3,0]},a.createElement(d.Flex,{"data-testid":`${n}-header`,justifyContent:"between"},a.createElement(d.Flex,{alignItems:"center","data-testid":`${n}-titleContainer`,gap:1},a.createElement(d.Icon,(0,o.A)({"data-testid":`${n}-icon`},x)),a.createElement(d.Text,{"data-testid":`${n}-title`},b)),!c&&t&&a.createElement(Oe.A,{align:"bottom",content:v?"":gt.WB,plain:!0},a.createElement(d.Box,null,a.createElement(bt.ro,{"data-ga":`manage-integration-${g}::click-add::notification-integrations-tab`,"data-testid":`${n}-button`,disabled:!v,label:"Add",onClick:S}))),!c&&!t&&a.createElement(Gt.A,{"data-ga":`manage-integration-${g}::click-plan-badge::notification-integrations-tab`})),a.createElement(d.TextSmall,{color:"textDescription","data-testid":`${n}-description`},l," ",r&&a.createElement(ge.A,{Component:bt.W6,"data-ga":`manage-integration-${g}::click-docs::notification-integrations-tab`,"data-testid":`${n}-docsLink`,href:r,target:"_blank",whiteSpace:"nowrap"},"Learn more."))),a.createElement(Oe.A,{align:"top",content:gt.HA[m].tooltip,"data-testid":`${n}-kindContainer`,plain:!0},a.createElement(d.Flex,{alignItems:"end",alignSelf:"end","data-testid":`${n}-kindContainer`,gap:1},a.createElement(d.Icon,{color:"textLite","data-testid":`${n}-kindIcon`,height:"16px",name:gt.HA[m].icon,width:"16px"}),a.createElement(d.TextSmall,{color:"textLite","data-testid":`${n}-kind`},u)))),w&&a.createElement(Ut,{"data-testid":"createChannelModal",integrationId:s,onClose:()=>{T(),y()}}))},Zt=e=>{let{"data-testid":t="group",integrations:n,title:l,...r}=e;return n.length?a.createElement(d.Flex,(0,o.A)({column:!0,"data-testid":t,gap:2,position:"relative"},r),a.createElement(d.TextBig,{color:"textDescription","data-testid":`${t}-title`},l),a.createElement(d.Flex,{flexWrap:!0,"data-testid":`${t}-integrations`,gap:4},n.map((e=>a.createElement(Kt,(0,o.A)({"data-testid":`${e.slug}Card`,key:e.slug},e)))))):null};var Qt=n(73743);const Xt=e=>{const t=(0,ut.EE)(e);(0,wt.A)((()=>({enabled:!!e,fetch:()=>(0,mt.b8)(e),onFail:e=>t({...Qt.u,error:e.message}),onSettle:()=>t({loading:!1,loaded:!0}),onSuccess:e=>{t({...Qt.u,...e})}})),[e])},en=e=>{let{"data-testid":t="integrations",...n}=e;const l=(0,r.vt)(),i=(0,r.bq)();Xt(l);const{available:c,error:m,loaded:u,unavailable:g}=(0,ut.m$)(l),[p,h]=(0,a.useState)([]),[b,E]=(0,a.useState)([]),[f,x]=(0,a.useState)("");if(!u)return a.createElement(zt.A,{"data-testid":`${t}-loader`,title:"Loading services..."});if(m)return a.createElement(Jt.A,{"data-testid":`${t}-error`,message:m,title:`Services of ${i} are currently unavailable`});const y=(0,s.tW)(D.bq,{spaceSlug:i,settingsTab:D.A8});return a.createElement($.Ay,{tab:"Notifications::Integrations"},a.createElement(d.Flex,(0,o.A)({column:!0,"data-testid":t},n,{padding:[0,3,3],gap:3,overflow:"hidden"}),a.createElement(d.Flex,{border:{side:"bottom",color:"placeholder"},"data-testid":`${t}-header`,width:"100%"},a.createElement(ge.A,{as:jt.N_,Component:bt.He,"data-ga":"manage-integrations::click-back::notification-integrations-tab","data-testid":`${t}-backLink`,to:y},a.createElement(d.Icon,{"data-testid":`${t}-backIcon`,name:"arrow_left"}),a.createElement(d.H3,{"data-testid":`${t}-title`},D.ys[D.G0]))),a.createElement(d.Flex,{column:!0,"data-testid":`${t}-content`,gap:2,height:"100%",overflow:"hidden"},a.createElement(d.Box,{as:d.SearchInput,"data-ga":"manage-integrations::search::notification-integrations-tab","data-testid":`${t}-search`,iconLeft:a.createElement(d.Icon,{name:"magnify",color:"textLite"}),onChange:e=>{x(e),h((0,ht.Zv)(c,e)),E((0,ht.Zv)(g,e))},placeholder:"Search service",size:"small",width:{max:49.5}}),a.createElement(d.Flex,{column:!0,"data-testid":`${t}-groups`,overflow:"auto",height:"100%"},a.createElement(Zt,{"data-testid":"integrationGroupAvailable",integrations:f?p:c,title:"Available"}),a.createElement(Zt,{"data-testid":"integrationGroupUnavailable",integrations:f?b:g,title:"Unavailable"})))))},tn=()=>a.createElement(l.BV,null,a.createElement(l.qh,{path:"/",element:a.createElement(qt,null)}),a.createElement(l.qh,{path:`/${D.G0}`,element:a.createElement(en,null)}));var nn=n(55189);const an=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[(0,d.useInputValue)({maxChars:20,value:e.name||""})||{},(0,d.useInputValue)({maxChars:30,value:e.slug||""})||{},(0,d.useInputValue)({maxChars:50,value:e.description||""})||{}]};var ln=n(7357),rn=n(47364),on=n(53285),sn=n(7484),cn=n(61360);const dn={loading:!1,isAvailable:!1,isValid:!0,error:null},mn=e=>{const t=(0,r.ap)(),[n,l]=(0,a.useState)(dn);return(0,a.useEffect)((()=>{if(t.slug==e)l(dn);else{const t=(0,rn.ni)(e);l({...dn,isValid:!1,error:t})}}),[t.slug,e]),(0,cn.A)((()=>{(0,rn.ni)(e)||t.slug==e||(l((e=>({...e,loading:!0}))),(0,sn.Q9)(e).then((e=>{let{data:t}=e;l((e=>({...e,loading:!1,error:t.isAvailable?e.error:"slugNotAvailable"})))})).catch((e=>{l((t=>({...t,loading:!1,error:e.response?.data?.errorMessage||"Error while validating slug"})))})))}),500,[e]),n},un=e=>{let{nameInput:t,slugInput:n,descriptionInput:l,onStartSlugValidation:r,onStopSlugValidation:i,onSlugValidationError:s,...c}=e;const[m,u,g,p]=t,[h,b,E,f]=n,[x,y,C,v]=l,{loading:w,error:A}=mn(h);(0,a.useEffect)((()=>{(w?r:i)()}),[w]),(0,a.useEffect)((()=>{s(A)}),[A]);const T=(0,a.useMemo)((()=>(0,rn.fc)(m)),[m]),S=(0,a.useMemo)((()=>(0,rn.e_)(x)),[x]);return a.createElement(d.Flex,(0,o.A)({column:!0,gap:4},c),a.createElement(on.A,{Component:d.TextInput,permission:"space:UpdateMeta",label:"Name",value:m,onChange:u,error:rn.xc[T],isDirty:p,instantFeedback:"all",fieldIndicator:g,"data-testid":"textInputs-spaceName",containerStyles:{width:{base:150}}}),a.createElement(on.A,{Component:d.TextInput,permission:"space:UpdateMeta",label:"Slug",value:h,onChange:b,error:rn.xc[A]||A,isDirty:f,instantFeedback:"all",fieldIndicator:E,"data-testid":"textInputs-spaceSlug",containerStyles:{width:{base:150}}}),a.createElement(on.A,{Component:d.TextInput,permission:"space:UpdateMeta",label:"Description",value:x,onChange:y,error:rn.xc[S],isDirty:v,instantFeedback:"all",fieldIndicator:C,"data-testid":"textInputs-spaceDescription",containerStyles:{width:{base:150}}}))};var gn=n(87292);const pn=e=>{let{id:t,...n}=e;return a.createElement(d.Flex,(0,o.A)({column:!0,gap:1},n),a.createElement(d.Text,{strong:!0},"Space Id"),a.createElement(gn.Ay,{confirmationText:"Space ID copied to your clipboard."},t))};var hn=n(90481);const bn=()=>a.createElement(d.Text,{lineHeight:1.5},"With the change of the Space Slug, previous ",a.createElement(d.Text,{strong:!0},"links will be broken"),". In case you have some bookmarks or previous references using the previous Space Slug you should update them where possible. Please confirm you want to proceed with the change."),En=e=>{let{handleConfirm:t,handleDecline:n}=e;return a.createElement(d.ConfirmationDialog,{confirmLabel:"Continue","data-testid":"changeSpaceSlugDialog",handleConfirm:t,handleDecline:n,message:a.createElement(bn,null),title:"Space slug change"})};var fn=n(98046);const xn=(0,ne.A)(d.Button),yn=e=>{let{nameInput:t,slugInput:n,descriptionInput:l,onClose:i,isValidatingSlug:s,slugError:c,...d}=e;const m=(0,r.ap)(),u=(0,fn.A)(m.id),[g,p]=(0,a.useState)(!1),[h]=t,[b]=n,[f]=l,x=(0,a.useMemo)((()=>m.slug!==b),[m.slug,b]),[y,,C,v]=(0,E.A)(),w=()=>{i(x?b:null),p(!1)},A=()=>p(!1),T=(0,a.useCallback)((e=>{!e&&x?C():(p(!0),u({name:h,description:f,...x?{slug:b}:{}},{onSuccess:w,onFail:A}))}),[h,b,f,m.slug]),S=(0,a.useCallback)((()=>T(!0)),[T]),I=(0,a.useMemo)((()=>{const e=(0,rn.fc)(h),t=(0,rn.e_)(f);return!!(g||s||e||c||t)||m.name===h&&m.slug===b&&(m.description===f||!m.description&&!f)}),[m,h,b,f,g,s]);return a.createElement(a.Fragment,null,a.createElement(xn,(0,o.A)({label:"SAVE",onClick:T,isLoading:g||s,disabled:I,"data-testid":"saveSpace-button",feature:"SpaceSettings"},d)),y?a.createElement(En,{handleConfirm:S,handleDecline:v}):null)},Cn=(0,a.memo)((e=>{let{onClose:t,...n}=e;const l=(0,r.ap)(),i=(0,r.UV)("ids"),[s,,c,m]=(0,E.A)(),[u,,g,p]=(0,E.A)(),[h,b]=(0,a.useState)(),[f,x,y]=an({name:l.name,slug:l.slug,description:l.description});if(!l.id)return null;const C=1===i.filter((e=>!(0,Ue.ES)(e))).length;return a.createElement($.Ay,{tab:"Info"},a.createElement(d.Flex,(0,o.A)({column:!0,gap:6,"data-testid":"manageSpace",padding:[0,0,6,0],width:{max:150}},n),a.createElement(d.Flex,{column:!0,"data-testid":"manageSpace-settings"},a.createElement(d.H3,{margin:[0,0,4,0]},"Info"),a.createElement(d.Flex,{column:!0,gap:4},a.createElement(un,{"data-testid":"manageSpace-nameInputs",nameInput:f,slugInput:x,descriptionInput:y,onStartSlugValidation:g,onStopSlugValidation:p,onSlugValidationError:b}),a.createElement(pn,{"data-testid":"manageSpace-spaceIdInput",id:l.id,width:{base:150}}),a.createElement(d.TextInput,{label:"Your role in space",value:(0,He.Zr)(l.roleInSpace),disabled:!0,containerStyles:{width:{base:150}}}),a.createElement(d.TextInput,{label:"Plan",value:(0,He.Vn)(l?.planName||""),disabled:!0,containerStyles:{width:{base:150}}}))),a.createElement(d.Flex,{"data-testid":"manageSpace-actions",justifyContent:"between",alignItems:"center"},a.createElement(d.Flex,{"data-testid":"manageSpace-deleteLeaveActions",gap:4},a.createElement(Oe.A,{align:"top",content:C&&nn.sh.leave,isBasic:!0,stretch:"align"},a.createElement(d.Flex,{alignItems:"center"},a.createElement(d.Button,{"data-ga":"manage-space-tab::click-leave-space::manage-space-modal","data-testid":"manageSpace-leave",disabled:C,icon:"switch_off",flavour:"borderless",label:"Leave space",neutral:!0,padding:[0],width:"fit-content",onClick:c}))),a.createElement(hn.A,{"data-testid":"manageSpace-delete",id:l.id,isLastSpace:C,name:l.name,onClose:t})),a.createElement(yn,{"data-testid":"manageSpace-save",nameInput:f,slugInput:x,descriptionInput:y,onClose:t,isValidatingSlug:u,slugError:h}))),s&&a.createElement(ln.A,{id:l.id,name:l.name,onClose:m}))}),(()=>!0));var vn=n(62232);const wn=()=>{const e=(0,l.Zp)(),t=(0,r.vt)(),n=(0,l.RQ)(D.uX),o=(0,l.RQ)(D.bq),{params:i}=n||o||{},{spaceSlug:c="",settingsTab:d="",settingsSubTab:m=""}=i,u=(0,r.ap)("name"),g=(0,A.J_)(t,m),p=(0,A.wz)(g,"name"),h=D.ys[d],b=(0,a.useCallback)((()=>{e((0,s.tW)(D.bq,{spaceSlug:c,settingsTab:d}))}),[c,d]),E=(0,a.useMemo)((()=>{const e=[{name:"Manage Space",isDisabled:!0},{name:u,isDisabled:!0},{name:h,...!!m&&{onClick:b}}];return m&&e.push({name:h===D.ys[D.aj]?p:D.ys[m]||m}),e}),[b,p,u,h,m]);return a.createElement(vn.A,{isBig:!0,items:E,showBackButton:!1,testid:"manageSpace"})};var An=n(47731),Tn=n(19673),Sn=n(67742);const In=e=>a.createElement(d.Box,(0,o.A)({as:"hr",height:"100%",sx:{borderWidth:"0px 0px 0px 1px",borderColor:"borderSecondary",borderStyle:"solid"}},e)),kn=()=>a.createElement(In,{height:"1px",width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}});var Fn=n(42728);const Pn=e=>{let{currentPlan:t,billingEmail:n,paymentMethod:l,businessName:r,vatNo:o,billingAddress:i}=e;const[s,c]=(0,Tn.Qh)(),m=!!t.billingEmail&&!c,u=n||"",g=u?"":"Email is required",p=l?.id?`**** ${l?.id}`:"",h=p?"":"Payment method is required",b=i?"":"Billing address is required";return a.createElement(d.Flex,{column:!0,gap:3},a.createElement(d.Flex,{gap:4},a.createElement(d.TextInput,{value:u,label:"Billing email",placeholder:"Not specified",instantFeedback:"all",isDirty:!!g,error:g,disabled:!0}),a.createElement(d.TextInput,{value:p,label:"Default payment method",placeholder:"Not specified",instantFeedback:"all",isDirty:!!h,error:h,disabled:!0})),o&&a.createElement(d.Flex,{gap:4},a.createElement(d.TextInput,{value:r||"",label:"Business name",placeholder:"Not specified",disabled:!0}),a.createElement(d.TextInput,{value:o,label:"VAT number",placeholder:"Not specified",disabled:!0})),a.createElement(d.Flex,null,a.createElement(d.TextInput,{value:(0,Fn.qN)(i)||"",label:"Billing address",placeholder:"Not specified",isDirty:!!b,error:b,disabled:!0})),a.createElement(ge.A,{Component:d.Flex,cursor:m?"pointer":"default",disabled:!m,onClick:s,alignItems:"center",gap:1,"data-ga":"billing-options::click::billing"},a.createElement("span",null,"Change billing information and payment method"),a.createElement(d.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"})))},$n=e=>{let{onReset:t}=e;return a.createElement(d.Box,{as:d.Icon,name:"close_circle",onClick:t,cursor:"pointer",width:3,height:3,color:"border",position:"absolute",left:"2px"})},Mn=e=>{let{promotionCode:t,onReset:n}=e;return a.createElement(d.Flex,{width:"100%"},a.createElement(d.Pill,{padding:[0],flavour:"neutral",hollow:!0},a.createElement(d.Flex,{position:"relative",gap:2,alignItems:"center",padding:[1,2,1,5]},a.createElement($n,{onReset:n}),a.createElement(d.Text,null,t))))},Ln=e=>{let{promotionCode:t,onApply:n,error:l}=e;const[r,o]=(0,a.useState)(t||""),i=()=>{o(""),n("")};return a.createElement(d.Flex,{column:!0,gap:1},a.createElement(d.Text,{strong:!0},"Promotion code"),t&&!l?a.createElement(Mn,{promotionCode:t,onReset:i}):a.createElement(d.Flex,{column:!0,gap:1},a.createElement(d.Flex,{gap:2,alignItems:"baseline"},a.createElement(d.TextInput,{value:r,onChange:e=>o(e.target.value),placeholder:"Promotion code"}),!l&&a.createElement(d.Button,{label:"Apply",onClick:()=>n(r),padding:[3,4],disabled:!r}),!!r&&a.createElement(d.Button,{label:"Clear",flavour:"hollow",onClick:i,padding:[3,4],disabled:!r})),l&&a.createElement(d.Text,{color:"error"},l)))},Nn=e=>{let{needsCommitment:t,commitment:n,handleCommitmentChange:l}=e;return t&&a.createElement(d.Flex,{column:!0,gap:2},a.createElement(d.Flex,{gap:4,alignItems:"baseline"},a.createElement(d.Text,{strong:!0,style:{whiteSpace:"nowrap"}},"Committed Nodes"),a.createElement(d.TextInput,{onChange:l,value:n,placeholder:"i.e. 14",type:"number",min:1})),a.createElement(d.TextSmall,null,"25% discount applied to the per-node cost of each committed node."))};var Rn=n(63950),Dn=n.n(Rn),Bn=n(27994);const _n={earlyBird:()=>a.createElement(d.Text,null,"You are moving from ",a.createElement(d.Text,{strong:!0},"Early Bird")," plan to another plan, you won't be able to come back to this. The ",a.createElement(d.Text,{strong:!0},"Community")," free plan will be there if you wish to cancel but this doesn't allow you to invite or change users using the Member role."),communityV1:e=>{let{onCtaClick:t=Dn()}=e;const{url:n}=(0,Bn.A)();return a.createElement(d.Text,null,"You are moving from ",a.createElement(d.Text,{strong:!0},"Community (2023.02)")," plan to another plan, you won't be able to come back to this. The new ",a.createElement(d.Text,{strong:!0},"Community (2023.11)")," free plan will be there if you wish to cancel but this will have new limitation: max of 5 nodes active and max of 1 custom dashboard. See full details on the"," ",a.createElement(ge.A,{as:jt.N_,onClick:t,to:n,disabled:!n},a.createElement(d.Text,{color:"primary"},"View plans page")),".")},pro:()=>a.createElement(d.Text,null,"You are moving from ",a.createElement(d.Text,{strong:!0},"Pro")," plan to another plan by yourself, if you proceed we won't be able to migrate you to the Business plan with your current pricing conditions as communicated.")},Un=e=>{let{currentPlan:t,...n}=e;const l=_n[(e=>"earlyBird"==e.slug?"earlyBird":"free"==e.slug&&"2023.02"==e.version?"communityV1":"pro"==e.slug?"pro":null)(t)]||null;return l&&a.createElement(a.Fragment,null,a.createElement(In,{height:"1px",width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),a.createElement(d.Flex,{gap:3},a.createElement(d.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(l,n)))};var Vn=n(45115),Hn=n(15951);const On=["STRIPE_INVOICE_UNPAID"],Wn=()=>{const{warnings:e}=(0,Vn.A)(),t=(0,a.useMemo)((()=>e.filter((e=>{let{warningKey:t}=e;return On.includes(t)}),[e])));return t.length?a.createElement(a.Fragment,null,a.createElement(In,{height:"1px",width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),a.createElement(d.Flex,{gap:3},a.createElement(d.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(d.Flex,{column:!0,gap:1},t.map((e=>{let{warningKey:t,text:n}=e;return a.createElement(Hn.A,{key:t},n)}))))):null},Yn=e=>"earlyBird"===e?.slug?"earlyBird":e&&e.slug&&"free"!==e.slug?`${e.slug}-${e.interval}`:"free",qn=c.default.div.withConfig({displayName:"withTableWrapper__TableWrapper",componentId:"sc-drcfxi-0"})(["margin-top:30px;"]),jn=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),zn={size:50,minSize:50,maxSize:100},Jn=e=>()=>a.createElement(d.Flex,{width:"100%",justifyContent:"end"},e),Gn=e=>{let{getValue:t}=e;return a.createElement(d.Flex,{width:"100%",justifyContent:"end"},t())},Kn=[{id:"name",accessor:"name",header:"",...zn,fullWidth:!0},{id:"price",accessor:"price",header:Jn("Price"),cell:Gn,...zn},{id:"qty",accessor:"qty",header:Jn("Qty"),cell:Gn,...zn},{id:"month",accessor:"month",header:Jn("Month"),cell:Gn,...zn},{id:"total",accessor:"total",header:Jn("Total"),cell:Gn,...zn}],Zn=e=>a.createElement(d.Flex,(0,o.A)({gap:3},e),a.createElement(d.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(d.Text,null,"No immediate charges are applicable to this plan subscription. On-demand usage charges will be applied based on your node period count.")),Qn=(Xn=d.Table,e=>a.createElement(qn,null,a.createElement(Xn,e)));var Xn;const ea=e=>{let{lineItems:t}=e;return a.createElement(a.Fragment,null,t.map((e=>{const t=(n=e).description?n.description.startsWith("Discount")?{color:"primary"}:n.description.startsWith("VAT")?{color:"textLite"}:{}:{};var n;const l=e.isInfo?d.TextSmall:d.Text;return a.createElement(d.Flex,{key:e.description,justifyContent:"between"},a.createElement(l,t,e.description),a.createElement(l,t,jn.format(e.total?.amount)))})))},ta=(e=>t=>t.lineItems.totalPayable?t.lineItems.info?.length?a.createElement(d.Flex,{column:!0,gap:1},a.createElement(e,t),a.createElement(ea,{lineItems:t.lineItems.info})):a.createElement(e,t):null)((e=>{let{lineItems:t}=e;return a.createElement(d.Flex,{justifyContent:"between",margin:[4,0,0,0]},a.createElement(d.H0,{strong:!0},"Total payable"),a.createElement(d.H0,{strong:!0,"data-testid":"totalPayableAmountPreview"},jn.format(t.totalPayable.total.amount)))})),na=e=>{let{previewData:t,lineItems:n,agree:l,toggleAgree:r,zeroPreviewSubscriptionTotal:o,isUpdate:i}=e;const s=!i||!!t?.paymentMethod&&!!t?.billingAddress;return a.createElement(a.Fragment,null,a.createElement(kn,null),o&&a.createElement(Zn,{padding:[0,0,2,0]}),a.createElement(d.Flex,{gap:3},a.createElement(d.Checkbox,{checked:l,onChange:r,disabled:!s}),a.createElement(d.Text,null,"I agree to Netdata Inc's"," ",a.createElement(ge.A,{href:"https://www.netdata.cloud/service-terms/",rel:"noopener noreferrer",target:"_blank"},"Terms of Service")," ","and"," ",a.createElement(ge.A,{href:"https://netdata.cloud/privacy",rel:"noopener noreferer",target:"_blank"},"Privacy Policy"))),a.createElement(ta,{lineItems:n}))},aa=e=>{let{lineItems:t}=e;return a.createElement(a.Fragment,null,a.createElement(Qn,{dataColumns:Kn,data:t.table}),a.createElement(kn,null),a.createElement(ea,{lineItems:t.footer}))};var la=n(33644),ra=n(34641),oa=n(25624);const ia="initial",sa=[{label:"Cost concerns"},{label:"Not using advanced features"},{label:"Switching to a different solution"},{label:"Temporary project ending"},{label:"Lack of specific feature (please specify)",specify:!0},{label:"Other (please specify}",specify:!0}],ca=e=>{let{reason:t,setReason:n,text:l,setText:r}=e;const o=sa.map((e=>({...e,value:e.label}))),i=!!t.specify,s=(0,a.useCallback)((e=>{r(e?.target?.value)}),[r]);return a.createElement(d.Flex,{column:!0,gap:4},a.createElement(d.Text,null,"We're sorry to see you go, your unused credit will be credited to your Netdata account. To help us improve, please tell us your main reason for downgrading:"),a.createElement(d.Select,{options:o,value:t,onChange:n,placeholder:"Please select a reason"}),i?a.createElement(d.TextInput,{value:l,onChange:s,placeholder:"Please specify"}):null)},da=()=>a.createElement(d.Flex,{column:!0,gap:2},a.createElement(d.Text,null,"Are you sure you want to downgrade to the Community plan?"),a.createElement(d.Text,null,"Downgrading will:"),a.createElement(la.K,null,a.createElement("li",null,a.createElement(d.Text,null,"Affect all users on this Space")),a.createElement("li",null,a.createElement(d.Text,null,"Remove your access to premium features")),a.createElement("li",null,a.createElement(d.Text,null,"Restrict non-admin users' access to your Space")),a.createElement("li",null,a.createElement(d.Text,null,"Limit any business notification options after 24 hours"))),a.createElement(d.Text,null,"We'd love to keep you on the Business plan."," ",a.createElement(ge.A,{href:"mailto:support@netdata.com",as:"a",cursor:"pointer",textDecoration:"underline"},"Can we help address any concerns"),"?")),ma=e=>{let{onConfirm:t,onClose:n}=e;const{sendButtonClickedLog:l}=(0,Se.A)(),{onTrial:r}=(0,oa.A)(),[o,i]=(0,a.useState)(),[s,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),g=o==ia,p=g&&(!s||s.specify&&!m),h=(0,a.useCallback)((()=>{i(ia)}),[i]),b=(0,a.useCallback)((()=>{p||(t(),n(),l({feature:"DowngradeToCommunity",reason:s?.label,details:m},!0))}),[p,l,s,m]),E=g?b:h,f=g?"Submit and Continue Downgrade":"Proceed with Downgrade",x=(0,a.useCallback)((()=>{n(),l({description:"close-billing-plan-change-confirmation-dialog"},!0)}),[l]);return r?a.createElement(ra.A,{onDecline:x}):a.createElement(d.ConfirmationDialog,{confirmLabel:f,declineLabel:"Stay on Business Plan","data-ga":"downgrade-dialog","data-testid":"downgradeDialog",handleConfirm:E,handleDecline:x,isConfirmDisabled:p,message:g?a.createElement(ca,{reason:s,setReason:c,text:m,setText:u}):a.createElement(da,null),title:"Downgrade to Community?"})};var ua=n(88116);const ga=e=>{let{isUpdate:t,currentPlan:n={},billingEmail:l,paymentMethod:r,...i}=e;const[s,c]=(0,Tn.Qh)(),m=!!n.billingEmail&&!c;return t&&l&&r?null:a.createElement(d.Flex,(0,o.A)({gap:3,alignItems:"center"},i),a.createElement(d.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(d.Flex,{column:!0,gap:1},a.createElement(d.Text,null,"You can't proceed to checkout without having provided a"," ",a.createElement(d.Text,{strong:!0},"payment method")," and a ",a.createElement(d.Text,{strong:!0},"billing address"),"."),a.createElement(ge.A,{cursor:m?"pointer":"default",disabled:!m,onClick:s,gap:1,"data-ga":"billing-options::click::billing"},"Please go to the billing portal and fill a payment method")))},pa=()=>a.createElement(d.Flex,{gap:2,alignItems:"center",justifyContent:"center"},a.createElement(d.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(d.Text,null,"Your space cannot be upgraded, please contact billing@netdata.cloud to resolve the issue."));var ha=n(79731),ba=n(65923);const Ea=e=>e?`::commited-${e}`:"",fa=(0,c.default)(d.Flex).withConfig({displayName:"checkoutTotals__CheckoutButtonWrapper",componentId:"sc-1q0h6ca-0"})(["background:",";padding:16px 0;position:sticky;bottom:0;z-index:20;"],(0,d.getColor)("mainBackground")),xa=(0,ne.A)(d.Button),ya=(e=>t=>{let{title:n,isDowngrade:l,isUpdate:r,checkoutOrUpdate:i,...s}=t;const[c,,d,m]=(0,E.A)();return r&&l?a.createElement(a.Fragment,null,c&&a.createElement(ma,{title:n,onConfirm:i,onClose:m}),a.createElement(e,(0,o.A)({onClick:d},s))):a.createElement(e,(0,o.A)({onClick:i},s))})((0,c.default)(xa).withConfig({displayName:"checkoutTotals__CheckoutButton",componentId:"sc-1q0h6ca-1"})(["flex:auto;"])),Ca=e=>{let{title:t,slug:n,onClose:l,currentPlan:r,price:o,commitment:i,currentCommitment:s=0,email:c,needsCommitment:m,previewData:u,loadingPreview:g,isUpdate:p,promotionCode:h}=e;const{isBanned:b}=o||{},f=(x=r.slug,y=n,(ua.FJ[y]?.level||0)<(ua.FJ[x]?.level||0));var x,y;const[C,v]=(0,E.A)(!1),w=b||p&&!C||!p&&!c||m&&(s===i||!i||i<1),[A,T]=(0,E.A)(),S=(0,Tn.L_)(),I=(0,Tn.M4)(),k=p||r.billingEmail,F=k?I:S,{sendLog:P,isReady:$}=(0,Se.A)(),[M,L]=(0,me.A)(),{activate:N}=(0,ba.H)(),R=(0,a.useCallback)((()=>{T(),F({productId:o.id,email:u?.billingEmail||c,...m&&{commitment:i},...h&&{promotionCode:h}}).then((()=>{l(),P({isSuccess:!0,details:F==k?"update-billing-plan":"checkout-billing-plan"},!0),M({header:"Success",text:"You have successfully updated your plan"})})).catch((e=>{P({isFailure:!0,details:F==k?"update-billing-plan":"checkout-billing-plan"},!0);const t=e?.response?.data||e;L({header:"Error",text:(0,ha.o)(t?.errorMsgKey)||t?.errorMessage||"Something went wrong"})})).finally((()=>{T(),f||N()}))}),[P,$]),D=(B=u?.invoiceLineItems,(0,a.useMemo)((()=>{if(!B?.length)return null;let e=!1;return B.reduce(((t,n)=>"Total payable"==n.description?(t.totalPayable=n,e=!0,t):(n.unitPrice?t.table=[...t.table,{id:n.description,name:n.description,price:jn.format(n.unitPrice.amount),qty:n.quantity,month:n.month,total:jn.format(n.total?.amount)}]:e?t.info=[...t.info,{...n,isInfo:!0}]:t.footer=[...t.footer,n],t)),{table:[],footer:[],info:[]})}),[B]));var B;const _=(D?.footer||[]).some((e=>{let{description:t,total:n}=e;return"Subscription Total"==t&&0==n?.amount}));return a.createElement(d.Flex,{column:!0,gap:3},g||!D||_?null:a.createElement(aa,{lineItems:D}),a.createElement(fa,{column:!0,gap:2},p&&!g&&D&&a.createElement(na,{isUpdate:p,previewData:u,lineItems:D,agree:C,toggleAgree:v,zeroPreviewSubscriptionTotal:_}),p&&!g&&a.createElement(ga,{currentPlan:r,billingEmail:u?.billingEmail,paymentMethod:u?.paymentMethod,padding:[0,0,4,0],isUpdate:p}),b?a.createElement(pa,null):null,a.createElement(ya,{title:t,isDowngrade:f,label:p?"Checkout":"Proceed to checkout",disabled:!!w||A,checkoutOrUpdate:R,isLoading:A,"data-ga":`proceedTocheckoutButton::click-${Yn(o)}${Ea(i)}::billing`,"data-testid":"billingCheckoutTotals-proceedToCheckoutButton",isUpdate:p})))},va=e=>{let{prices:t,currentPlan:n}=e;const[l,r]=(0,a.useState)(0),o=t[l],i=o?.commitment,s=(0,At.n)("id"),c=(0,_.gr)(s,"ids"),d=(0,U.BU)(c),m=Math.max(5,d.length),[u,g]=(0,a.useState)(n.committedNodes||m);return{recurringIndex:l,setRecurringIndex:r,price:o,needsCommitment:i,commitment:u,handleCommitmentChange:e=>g(e.target.value?parseInt(e.target.value,10):"")}},wa=e=>t=>{let{modalHeader:n="Checkout",...l}=t;return a.createElement(d.Modal,{backdropProps:{backdropBlur:!0}},a.createElement(d.ModalContent,{width:{min:100,base:160},height:"90vh"},a.createElement(d.ModalHeader,null,a.createElement(d.H4,null,n),a.createElement(d.ModalCloseButton,{onClose:l.onClose,testId:"close-button"})),a.createElement(d.ModalBody,{height:"100%",justifyContent:"between",overflow:{vertical:"auto"}},a.createElement(e,l))))},Aa=3e5,Ta=wa((e=>{let{title:t,onClose:n,prices:r,currentPlan:i={},children:s}=e;const{recurringIndex:c,setRecurringIndex:m,price:u,needsCommitment:g,commitment:p,handleCommitmentChange:b}=va({prices:r,currentPlan:i}),{state:E}=(0,l.zy)(),[f,x]=(0,a.useState)(E?.coupon||""),[y,C]=(0,a.useState)(0),[v,w]=(0,a.useState)(Aa),A=(0,h.JT)("billing:Manage"),T=(0,Fn.di)({price:u,promotionCode:f,commitment:p}),S=(0,Tn.qW)(T,y),{loading:I,value:k,promoCodeError:F}=S;return(0,Sn.A)((()=>{I||C((e=>e+1))}),v),(0,a.useEffect)((()=>{w(I?null:Aa)}),[I]),a.createElement($.Ay,{feature:"Billing::UpdateModal"},A?a.createElement(a.Fragment,null,a.createElement(d.Flex,{column:!0,gap:4},a.Children.map(s,(e=>(0,a.cloneElement)(e,{recurringIndex:c,setRecurringIndex:m,priceLoadable:S}))),a.createElement(Nn,{needsCommitment:g,commitment:p,handleCommitmentChange:b}),a.createElement(kn,null),I?a.createElement(zt.A,{title:"Loading billing info...",height:"auto"}):k?a.createElement(a.Fragment,null,a.createElement(Pn,(0,o.A)({currentPlan:i},k)),a.createElement(kn,null),a.createElement(Ln,{promotionCode:f,onApply:x,error:F})):a.createElement("div",null,"No data available"),a.createElement(Un,{currentPlan:i,onCtaClick:n}),a.createElement(Wn,null)),a.createElement(Ca,{title:t,slug:u.slug,currentPlan:i,onClose:n,price:u,balance:i.balance,commitment:p,needsCommitment:g,previewData:k,loadingPreview:I,isUpdate:!0,promotionCode:f})):a.createElement(d.Flex,null,a.createElement(d.TextBigger,null,"You don't have permissions to change the plan.")))}));var Sa=n(45467);const Ia=wa((e=>{let{onClose:t,prices:n,currentPlan:r={},children:o}=e;const{recurringIndex:i,setRecurringIndex:s,price:c,needsCommitment:m,commitment:u,handleCommitmentChange:g}=va({prices:n,currentPlan:r}),p=(0,ye.uW)("email"),[b,E]=(0,a.useState)(r.billingEmail||p||""),f=(0,h.JT)("billing:Manage"),{state:x}=(0,l.zy)(),[y,C]=(0,a.useState)(x?.coupon||""),{discount:v,promoCodeError:w}=(0,Tn.D)({productId:c.id,promotionCode:y,...m&&u&&{commitment:u}}),[A,T]=(0,a.useState)(0),S=(0,Fn.Lf)({price:c,promotionCode:y,commitment:u}),I=(0,Tn.Tr)(S,A),{loading:k,value:F}=I;return(0,Sa.A)((()=>()=>T((e=>e+1))),[v,!y]),a.createElement($.Ay,{feature:"Billing::CheckoutModal"},f?a.createElement(a.Fragment,null,a.createElement(d.Flex,{column:!0,gap:4},a.Children.map(o,(e=>(0,a.cloneElement)(e,{recurringIndex:i,setRecurringIndex:s,priceLoadable:I}))),a.createElement(Nn,{needsCommitment:m,commitment:u,handleCommitmentChange:g}),a.createElement(kn,null),a.createElement(d.TextInput,{onChange:e=>E(e.target.value),value:b,label:"Billing email",placeholder:"jsmith@example.com"}),a.createElement(kn,null),a.createElement(Ln,{promotionCode:y,onApply:C,error:w}),a.createElement(Un,{currentPlan:r,onCtaClick:t})),a.createElement(Ca,{currentPlan:r,onClose:t,price:c,balance:r.balance,commitment:u,email:b,needsCommitment:m,previewData:F,loadingPreview:k,promotionCode:y})):a.createElement(d.Flex,null,a.createElement(d.TextBigger,null,"You don't have permissions to change the plan.")))}));n(3064),n(72577);var ka=n(21290);const Fa=e=>{let{text:t,iconProps:n={},iconRight:l}=e;return l?a.createElement(d.Flex,{width:"100%",gap:2,justifyContent:"between"},a.createElement(d.TextBig,null,t),a.createElement(d.Box,{width:5},a.createElement(d.Icon,(0,o.A)({width:"20px",height:"20px",name:"check",color:"primary"},n)))):a.createElement(d.Flex,{gap:2},a.createElement(d.Box,{width:5},a.createElement(d.Icon,(0,o.A)({width:"20px",height:"20px",name:"check",color:"primary"},n))),a.createElement(d.TextSmall,null,t))},Pa=e=>{let{features:t,showViewDetails:n,iconRight:l}=e;return a.createElement(d.Flex,{column:!0,gap:1,margin:[l?6:0,0,0,0]},t.map((e=>{let{text:t,icon:n,iconColor:r}=e;return a.createElement(Fa,{key:t,text:t,iconProps:{...n?{name:n}:{},...r?{color:r}:{}},iconRight:l})})),n&&a.createElement(d.Flex,{gap:2},a.createElement(d.Box,{width:5}),a.createElement(ge.A,{Component:d.Flex,as:jt.N_,cursor:"pointer",alignItems:"center",gap:1,color:"text",hoverColor:"textFocus",to:"all-plans"},a.createElement(d.Text,{strong:!0},"View full details"),a.createElement(d.Icon,{name:"chevron_right",width:"16px",height:"16px"}))))};var $a=n(12602),Ma=n(49389);const La=e=>{let{priceLoadable:t}=e;const{loading:n,amount:l,error:r}=t||{};return n?a.createElement(d.Text,null,"Getting price..."):r?null:l?a.createElement(d.H3,null,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l),a.createElement(d.TextSmall,{color:"textLite"},"/Node/month (billed yearly)")):null},Na=e=>{let{recurringIndex:t,slug:n,version:l,priceLoadable:r}=e;const{loading:o,value:i,hasError:s}=r||{};let c=0;const m=i?.invoiceLineItems;m?.length&&(c=m.find((e=>{let{description:t}=e;return"Nodes"==t}))?.unitPrice?.amount);const u=(0,a.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{loading:t,amount:n}=e||{},l=!t&&!n;return[{free:a.createElement(d.H3,null,"Free forever"),homelab:a.createElement(d.H3,null,"$90.00",a.createElement(d.TextSmall,{color:"textLite"},"/year")),"business_2023.02":l?a.createElement(d.H3,null,"$3.00",a.createElement(d.TextSmall,{color:"textLite"},"/Node/month (billed yearly)")):a.createElement(La,{priceLoadable:e}),"business_2024.03":l?a.createElement(d.H3,null,a.createElement(d.TextSmall,{color:"textLite"},"Up to")," $4.50",a.createElement(d.TextSmall,{color:"textLite"},"/Node/month (billed yearly)")):a.createElement(La,{priceLoadable:e}),business:a.createElement(La,{priceLoadable:e})},{free:a.createElement(d.H3,null,"Free forever"),homelab:a.createElement(d.H3,null,"$10.00",a.createElement(d.TextSmall,{color:"textLite"},"/month")),"business_2023.02":a.createElement(a.Fragment,null,a.createElement(d.H3,null,"$4.00",a.createElement(d.TextSmall,{color:"textLite"},"/Node/month"))),"business_2024.03":a.createElement(a.Fragment,null,a.createElement(d.H3,null,"$6.00",a.createElement(d.TextSmall,{color:"textLite"},"/Node/month"))),business:a.createElement(a.Fragment,null,a.createElement(d.H3,null,"$6.00",a.createElement(d.TextSmall,{color:"textLite"},"/Node/month")))}]}({loading:o,amount:c,error:s})),[o,c,s]);return a.createElement(d.Flex,{column:!0,gap:2},u[t][`${n}_${l}`]||u[t][n])},Ra=c.default.div.withConfig({displayName:"pricingDetails__OneLine",componentId:"sc-hbslp4-0"})(["white-space:nowrap white-space:nowrap;"]),Da=e=>{let{nodesLastPeriod:t,committedNodes:n}=e;const l=t-n,r=l>0;return 0==l?a.createElement(d.TextSmall,null,"You are using all your committed nodes."):r?a.createElement(d.TextSmall,null,"You are using"," ",a.createElement(d.TextSmall,{strong:!0,color:"error"},l," ",(0,Ma.su)(l).toLowerCase()," more")," ","than your committed nodes."):a.createElement(d.TextSmall,null,"You are using"," ",a.createElement(d.TextSmall,{strong:!0,color:"success"},t," out of ",n)," ","committed ",(0,Ma.su)(n).toLowerCase(),".")},Ba=e=>{let{interval:t,currentPeriodTo:n,committedNodes:l,nodesLastPeriod:r,showAllPlans:o,showPromotion:i,cancelling:s,onCancelPlan:c,commitment:m}=e;const{localeDateString:u}=(0,ka.$j)(),g=(0,a.useMemo)((()=>({column:!0,gap:1,...o?{alignItems:"center"}:{}})),[o]);return a.createElement(d.Flex,g,!!n&&a.createElement(d.TextSmall,null,a.createElement(d.TextSmall,{strong:!0,"data-testid":"billingPricingDetails-interval"},`Billing ${ua.rY[t]}`)," ","(renews ",u(new Date(n),{long:!1}),")"),i&&"month"===t&&a.createElement(ge.A,{onClick:c,disabled:s},a.createElement(Ra,null,"Save 25% by changing your billing frequency to yearly")),m?a.createElement(a.Fragment,null,a.createElement(d.TextSmall,null,"Committed Nodes:"," ",a.createElement(d.Text,{strong:!0,"data-testid":"billingPricingDetails-committedNodesNumber"},l)),"number"===typeof r?a.createElement(Da,{nodesLastPeriod:r,committedNodes:l}):null):null)},_a=(e=>t=>{let{inModal:n,recurringIndex:l,setRecurringIndex:r,...o}=t;return n?a.createElement(d.Flex,{width:"100%",justifyContent:"between",alignItems:"center"},a.createElement(e,o),a.createElement(d.Flex,{gap:3,padding:[0,10]},ua.HR.map(((e,t)=>a.createElement(d.RadioButton,{key:e,checked:l===t,onChange:()=>r(t),"data-testid":`billingPaidPlans-${e}-radioButton`},a.createElement(d.Text,{color:"textDescription"},(0,He.Zr)(ua.rY[e]))))))):a.createElement(e,o)})((e=>{let{children:t}=e;return a.createElement(d.H3,{"data-testid":"billingPricingDetails-activePlanName"},t)})),Ua=e=>{let{slug:t,version:n,prices:l,recurringIndex:r=0,setRecurringIndex:i,currentPlan:s={},isActive:c,showAllPlans:m,showTeaserDetails:u,cancelling:g,onCancelPlan:p,title:h,features:b,nodesLastPeriod:E,inModal:f,priceLoadable:x}=e;const{onTrial:y}=(0,oa.A)(),C=c?s.pricing:l[r]?.pricing||{},v=(0,Fn.Kj)(t),w=(0,a.useMemo)((()=>({column:!0,gap:2,...m?{height:"140px",alignItems:"center"}:{}})),[m]),A=(0,a.useMemo)((()=>({column:!0,...m?{alignItems:"center"}:{}})),[m]);return a.createElement(d.Flex,w,a.createElement(d.Flex,A,a.createElement(d.Flex,{alignItems:"center",gap:2},a.createElement(_a,{inModal:f,recurringIndex:r,setRecurringIndex:i},h),c&&!m&&a.createElement(a.Fragment,null,a.createElement(d.Pill,{flavour:"success","data-testid":"active-plan",icon:"checkmark_s"},y?"Trial":"Active"),y&&a.createElement($a.A,null,a.createElement(d.TextBig,{color:"primary"},"Upgrade Now!")))),n&&a.createElement(d.TextBig,null,"(",n,")")),m||!c||"free"===t?a.createElement(Na,(0,o.A)({inModal:f,isActive:c,currentPlan:s,recurringIndex:r,slug:t,version:n,priceLoadable:x},C)):null,!m&&u&&b?.[n]?a.createElement(Pa,{features:b[n],showViewDetails:!v}):null,c&&!(0,Fn.Kj)(t)&&!y&&a.createElement(Ba,(0,o.A)({},s,{showAllPlans:m,showPromotion:!0,cancelling:g,onCancelPlan:p,nodesLastPeriod:E})))},Va=e=>{let{onConfirm:t,onDecline:n}=e;const{sendButtonClickedLog:l}=(0,Se.A)(),[r,o]=(0,E.A)(),i=(0,a.useCallback)((()=>{l({feature:"HomelabAcceptTerms"}),t()}),[l]);return a.createElement(d.ConfirmationDialog,{title:"Terms of usage",confirmLabel:"I agree",declineLabel:"Close",handleConfirm:i,handleDecline:n,isConfirmPositive:!0,isConfirmDisabled:!r,message:a.createElement(d.Flex,{column:!0,gap:2},a.createElement(d.Text,null,"By continuing, you acknowledge that you will use Netdata ONLY for homelab purposes. If professional use is detected you will be downgraded, and will waive any rights to refunds."),a.createElement(d.Text,null,"For more details on conditions please check our"," ",a.createElement(ge.A,{href:"https://www.netdata.cloud/fair-usage-policy",rel:"noopener noreferrer",strong:!0,target:"_blank"},"Fair Usage Policy"),"."),a.createElement(d.Flex,null,a.createElement(d.Checkbox,{checked:r,onChange:o,label:"I will NOT use the Homelab plan for professional purposes (this includes testing and staging environments).",labelPosition:"right",labelProps:{strong:!0,padding:[0,0,0,1]}})))})};var Ha=n(67276),Oa=n(47431);const Wa=()=>{const{reseller:e}=(0,r.ap)();return{isReseller:!!e?.ID}},Ya=()=>{const{isReseller:e}=Wa();return e?a.createElement(d.Flex,{column:!0,gap:1},a.createElement(d.Text,null,"This subscription is managed through a ",a.createElement(d.Text,{strong:!0},"Partner / Reseller"),"."),a.createElement(d.Text,null,"To make any changes to your subscription, please contact your Partner / Reseller or reach out to"," ",a.createElement(ge.A,{href:"mailto:sales@netdata.cloud",as:"a",cursor:"pointer"},"sales@netdata.cloud"),".")):null};var qa=n(93476),ja=n(66732),za=n(97118);const Ja=(0,c.default)(d.Flex).attrs((e=>({background:"mainBackground",width:{min:"280px"},...e}))).withConfig({displayName:"styled__StyledWrapper",componentId:"sc-1gqbztm-0"})(["width:","};justify-content:",";place-self:",";"],(e=>{let{showAllPlans:t}=e;return t?"400px":"auto"}),(e=>{let{showAllPlans:t}=e;return t?"start":"space-between"}),(e=>{let{showAllPlans:t}=e;return t?"center":"auto"})),Ga=e=>{let{slug:t,version:n,prices:l=[],isSmall:i,isActive:s,currentPlan:c,showAllPlans:m,showTeaserDetails:u,allPlansView:g=!1,nodesLastPeriod:p,asAnchor:b,anchorText:f,...x}=e;const y=(0,ye.NJ)(),C=(0,r.vt)(),{isReseller:v}=Wa(),{title:w,features:A}=ua.FJ[t]||ua.FJ.free,T=(0,h.JT)("billing:Manage"),{sendLog:S,sendButtonClickedLog:I,isReady:k}=(0,Se.A)(),{onTrial:F}=(0,oa.A)(),{cancelling:P,startCancelling:$,stopCancelling:M}=(0,Tn.og)(),L="AWS"==c.paymentProvider,N=(0,a.useCallback)((function(){let{label:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I({label:e},!0)}),[I,k]),R=(0,Fn.z_)({currentPlan:c,slug:t,version:n,onTrial:F}),D=P||s&&(0,Fn.Kj)(t)||c.slug==ua.VH.earlyBird&&t==ua.VH.free||c.slug==ua.VH.free&&"2023.02"==c.version&&t==ua.VH.free&&"2023.11"==n,[B,_]=(0,a.useState)({}),[U,,V,H]=(0,E.A)(),[O,W]=(0,me.A)(),Y=(0,Tn.M4)(),q="cancel"===B.type&&!(0,Fn.Kj)(c.slug)&&!U,j="cancel"===B.type&&t==ua.VH.free&&"2023.11"==n,{id:z}=(0,za.A)(),J=(0,Xe.ly)(),G=(0,a.useCallback)((()=>{V(),$(),Y({productId:z}).then((()=>{O({header:"Successfully canceled subscription",text:"You are now on Community plan"}),S({isSuccess:!0,description:"cancel-subscription"})})).catch((()=>{W({header:"Failed to cancel the subscription",text:`Remained on ${w} plan`}),S({isFailure:!0,description:"cancel-subscription",error:"Failed to cancel the subscription"})})).finally((()=>{M(),J()}))}),[S,k]),K=(0,a.useMemo)((()=>`user-${y}-space-${C}-accept-homelab-terms`),[y,C]),Z=(0,a.useCallback)((()=>{localStorage.setItem(K,!0)}),[K]),Q=(0,a.useCallback)((()=>"true"==localStorage.getItem(K)),[K]),X=(0,a.useCallback)((e=>{if(!P&&!D)if(t!=ua.VH.homelab||c.slug==ua.VH.homelab||Q()){if((0,Fn.Kj)(t))return _({type:"cancel"}),void S(e,!0);if((0,Fn.Kj)(c.slug))return oe("checkout"),void S(e,!0);oe("update"),S(e,!0)}else _({type:"homelab"})}),[S,k,B,_]),ee=(0,a.useCallback)((()=>{_({}),Z(),setTimeout((()=>{X({action:Ha.o1.buttonClicked},!0)}),200)}),[_,Z,X]),te=!!c.billingEmail,ne=te?Ta:Ia,{billingModalType:ae,billingModalSlug:le}=(0,_e.PP)(),re=["checkout","update"].includes(ae)&&t==le,oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n=(0,_e.PP)();(0,_e.Z8)({...n,billingModalType:e,billingModalSlug:""==e?e:t})},[ie,,se,ce]=(0,E.A)(),de=(0,a.useMemo)((()=>({column:!0,height:"100%",flex:i,gap:m?4:2,showAllPlans:m,isSmall:i,padding:m?[6]:[0,2,4,2],...m?{border:{side:"all",color:"border"}}:{},...x})),[m,i,x]);return a.createElement(a.Fragment,null,b?a.createElement(ge.A,{onClick:()=>{X({action:Ha.o1.buttonClicked,label:R,dataGa:`upgrade-button::click-${Yn({slug:t})}::current-${Yn(c)}::billing`})}},f):a.createElement(Ja,de,a.createElement(Ua,{slug:t,prices:l,isActive:s,currentPlan:c,cancelling:P,showAllPlans:m,showTeaserDetails:u,title:w,version:n,features:A,nodesLastPeriod:p,onCancelPlan:()=>X({action:Ha.o1.buttonClicked,label:w})}),a.createElement(Ya,null),!g&&a.createElement(on.A,{Component:d.Button,permission:"billing:Manage","data-ga":`upgrade-button::click-${Yn({slug:t})}::current-${Yn(c)}::billing`,"data-testid":`billingPlan-${t}-${s?"currentPlan":"upgradeButton"}`,label:R,flavour:(0,Fn.Dy)(c?.slug,t),disabled:D,width:"100%",onClick:()=>X({action:Ha.o1.buttonClicked,label:R,dataGa:`upgrade-button::click-${Yn({slug:t})}::current-${Yn(c)}::billing`}),isLoading:P&&s,loadingLabel:"Cancelling"}),m&&!!A[n]?.length&&a.createElement(Pa,{features:A[n],iconRight:!0}),!m&&!v&&a.createElement(a.Fragment,null,F&&a.createElement(qa.A,{flavour:"billing"}),(F||!(0,Fn.Kj)(c.slug))&&a.createElement(d.Flex,{column:!0,gap:4},a.createElement(d.Flex,{gap:6,alignItems:"baseline"},F&&a.createElement(Oa.A,null),!(0,Fn.Kj)(c.slug)&&!L&&a.createElement(ge.A,{Component:d.Flex,as:jt.N_,cursor:"pointer",alignItems:"center",gap:1,color:"text",hoverColor:"textFocus",to:"all-plans",padding:[4,0,0],disabled:P,onClick:()=>N({label:T?"Change plan":"View plans"}),"data-testid":"billingPlan-viewMorePlansLink","data-ga":"change-plan::click::billing"},a.createElement("span",null,T?"Change plan":"View plans"),a.createElement(d.Icon,{name:"chevron_right",width:"16px",height:"16px"}))),F&&a.createElement(a.Fragment,null,a.createElement(ja.A,{flavour:"billing",color:"textLite",onOptOutClick:se}),ie&&a.createElement(ra.A,{onDecline:ce,onCancellingEnd:()=>{}}))))),(q||j)&&a.createElement(ma,{title:w,onConfirm:G,onClose:()=>{H(),_({})}}),"homelab"==B.type?a.createElement(Va,{onConfirm:ee,onDecline:()=>_({})}):null,re&&a.createElement(ne,(0,o.A)({title:w,onClose:()=>{H(),oe()},prices:l,currentPlan:c,showProrations:te},te?{modalHeader:"Update plan"}:{}),a.createElement(Ua,{slug:t,prices:l,currentPlan:c,title:w,version:n,inModal:!0})))},Ka=e=>{let{plans:t,isSmall:n,currentPlan:l,showAllPlans:r,showTeaserDetails:i,...s}=e;return a.createElement(a.Fragment,null,ua.tD.map((e=>(Object.entries(t[e]||{})||[]).map((t=>{let[c,d]=t;return a.createElement(Ga,(0,o.A)({key:`${e}-${c}`,slug:e,version:c,prices:d,isActive:l.slug==e&&l.version==c,isSmall:n,currentPlan:l,showAllPlans:r,showTeaserDetails:i},s))})))))},Za=e=>{let{isSmall:t,plans:n,currentPlan:l,showAllPlans:r=!1,showTeaserDetails:i=!1}=e;const{version:s}=(0,za.A)(),c=(n.free?.[l?.version]||n.free?.[s])?.[0];return a.createElement(d.Flex,{gap:6},a.createElement(Ga,(0,o.A)({slug:"free",version:c?.version,prices:c?.prices,isSmall:t,isActive:"free"===l.slug&&l.version==c?.version,currentPlan:l,showAllPlans:r,showTeaserDetails:i},r?{background:"panelBg"}:{})),a.createElement(Ka,(0,o.A)({plans:n,isSmall:t,currentPlan:l,showAllPlans:r,showTeaserDetails:i},r?{background:"panelBg"}:{})))},Qa=e=>{let{children:t,...n}=e;return a.createElement(d.Flex,(0,o.A)({alignItems:"center",gap:2},n),t)},Xa=()=>a.createElement(d.Flex,{column:!0,gap:2,width:65},a.createElement(d.TextMicro,null,a.createElement(d.TextMicro,{strong:!0},"Available credit")," for you to use on any plan subscriptions with us."),a.createElement(d.TextMicro,null,"It is ok to change your mind, we will give you full flexibility! You can change the plan level, billing frequency or committed nodes, we won't hold you to any choice. When applicable, we'll credit you back on any unused amount.")),el=(0,Nt.A)(ge.A),tl=e=>{let{currentPlan:t}=e;const[n,l]=(0,Tn.Qh)(),r=!!t.billingEmail&&!l,o=(0,h.JT)("billing:ReadAll"),i=t?.marketplaceUrl,s="AWS"==t?.paymentProvider,c=(0,a.useCallback)((()=>{i&&(location.href=i)}),[i]);return a.createElement(d.Flex,{column:!0,gap:2},a.createElement(d.H3,null,"Plan & Billing"),o&&a.createElement(a.Fragment,null,a.createElement(Qa,null,s?null:a.createElement(a.Fragment,null,a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Credit:"),a.createElement(d.Text,{"data-testid":"billingHeader-credits",strong:!0},jn.format(t.balance.amount||0)),a.createElement(Oe.A,{content:Xa,align:"bottom",isBasic:!0},a.createElement(d.Icon,{name:"information",width:"16px",height:"16px",color:"textLite"}))),a.createElement(In,null)),a.createElement(d.Text,null,"Billing email:"," ",a.createElement(d.Text,{strong:!0,"data-testid":"billingHeader-email"},t.billingEmail||"-")),a.createElement(In,null),i?a.createElement(el,{Component:d.Flex,cursor:"pointer",onClick:c,alignItems:"center",gap:1,tooltip:"Manage your subscription on the AWS Marketplace","data-ga":"billing-options::click::billing","data-testid":"billingHeader-goToMarketplace"},a.createElement("span",null,"Manage your Subscription"),a.createElement(d.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"})):a.createElement(ge.A,{Component:d.Flex,cursor:r?"pointer":"default",disabled:!r,onClick:n,alignItems:"center",gap:1,"data-ga":"billing-options::click::billing","data-testid":"billingHeader-goToPortal"},a.createElement("span",null,"Billing options and Invoices"),a.createElement(d.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"}))),a.createElement(In,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}})))};n(78898);function nl(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),l=new Date(0);return l.setFullYear(t,n,a-1),l.setHours(23,59,59,999),l}var al=n(51730),ll=n(13999);function rl(e,t){return(0,ll.f)(e,-t)}var ol=n(4883);function il(e,t){return(0,ol.P)(e,-t)}var sl=n(35840);function cl(e,t){const{years:n=0,months:a=0,weeks:l=0,days:r=0,hours:o=0,minutes:i=0,seconds:s=0}=t,c=rl(il(e,a+12*n),r+7*l),d=1e3*(s+60*(i+60*o));return(0,sl.w)(e,c.getTime()-d)}var dl=n(71600),ml=n(66118),ul=n(5638),gl=n(44731),pl=n(99851),hl=n(24266),bl=n(27467),El=n(36712);const fl={nodes:1,p90:2,committed_nodes:3},xl={"Daily count":"The weighted 90th percentile of the live node count during the day, taking time as the weight. If you have 30 live nodes throughout the day, except for a two hour peak of 44 live nodes, the daily value is 31.","Committed nodes":"The number of nodes committed to in the yearly plan. In case the period count is higher than the number of committed nodes, the difference is billed as overage.","Period count":"The 90th percentile of the daily counts for this period up to the date. The last value for the period is used as the number of nodes for the bill for that period."};ml.t1.register(ml.kc,ml.PP,ml.E8,ml.FN,ml.No,ml.s$,ml.m_,ml.ZT,ml.A6,ul.A),ml.m_.positioners.follow=function(e,t){return!e?.length||t.y>360?(this._resolveAnimations().update(this,{opacity:0}),!1):(0===this.opacity&&this._resolveAnimations().update(this,{opacity:1}),{x:t.x,y:t.y})};const yl=e=>({nodes:{label:"Daily count",type:"bar",color:(0,d.getColor)("text")({theme:e}),backgroundColor:(0,d.getColor)("primary")({theme:e}),borderColor:(0,d.getColor)("primary")({theme:e}),borderWidth:2,pointStyle:"rectangle",usePointStyle:!0},p90:{label:"Period count",type:"line",color:(0,d.getColor)("text")({theme:e}),borderColor:(0,d.getColor)(["purple","lilac"])({theme:e}),borderWidth:2,fill:!1,stepped:!0},committed_nodes:{label:"Committed nodes",type:"line",color:(0,d.getColor)("text")({theme:e}),borderColor:(0,d.getColor)(["blue","aquamarine"])({theme:e}),borderWidth:2,fill:!1,borderDash:[1,2],borderDashOffset:1,pointStyle:!1}}),Cl={border:{side:"all",color:"inputBorder",padding:[3]},round:!0},vl=nl(),wl=(0,al.o)(cl(vl,{months:1})),Al=e=>{let{onNodesLastPeriodFetch:t}=e;const n=(0,bl.rW)("offset"),l=(0,r.vt)(),[o,i]=(0,a.useState)((()=>({start:wl,end:vl}))),[s,m,u]=(0,wt.A)((()=>({enabled:!!l&&!!o.start&&!!o.end,fetch:()=>(0,El.U2)(l,{after:Math.floor((0,dl.W)((0,ka.ii)(o.start,n))/1e3),before:Math.floor((0,dl.W)((0,ka.ii)(o.end,n))/1e3)}),initialValue:{labels:[],data:[]},onSuccess:e=>{let{data:n,labels:a}=e;if(!n.length)return;const l=n.at(-1),r=l[a.indexOf("nodes")],o=l[a.indexOf("timestamp")];t((e=>e.timestamp>o?e:{timestamp:o,value:r}))}})),[l,o,t]),g=(0,a.useContext)(c.ThemeContext),p=(0,a.useMemo)((()=>{const e=s.data.map((e=>{let[t]=e;return t})),t=s.labels.reduce(((t,n,a)=>a?[{...yl(g)[n],data:e.map(((e,t)=>s.data[t][a])),order:fl[n]},...t]:t),[]);return{labels:e,datasets:t}}),[s]),[h,b]=function(e){let{data:t,annotations:n=[]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{localeDateString:l}=(0,ka.$j)(),r=(0,a.useRef)(!1),o=(0,a.useRef)(),i=(0,a.useMemo)((()=>({interaction:{axis:"x"},plugins:{legend:{position:"bottom",align:"start",onClick:(e,t,n)=>{const a=n.legendItems.findIndex((e=>e.text===t.text));n.chart.isDatasetVisible(a)?n.chart.hide(a):n.chart.show(a)},labels:{generateLabels:e=>e.data.datasets.map(((t,n)=>({fontColor:t.color,text:t.label,fillStyle:t.backgroundColor,strokeStyle:t.borderColor,pointStyle:"Daily count"===t.label?"rect":"line",hidden:!e.isDatasetVisible(n),order:t.order}))).sort(((e,t)=>e.order-t.order)),usePointStyle:!0},onHover:function(e,t){!r.current&&o.current&&(r.current=!0,o.current.innerHTML=xl[t.text],o.current.style.left=e.x+"px",o.current.style.top=e.y+"px",o.current.style.visibility="visible",o.current.style.transform="translateY(-100%)")},onLeave:function(){o.current&&(r.current=!1,o.current.innerHTML="",o.current.style.visibility="hidden")}},tooltip:{enabled:!0,mode:"nearest",intersect:!1,yAlign:"bottom",usePointStyle:!0,position:"follow",backgroundColor:(0,d.getColor)("tooltip")({theme:e}),color:(0,d.getColor)("tooltipText")({theme:e}),callbacks:{title:e=>{const[t]=e;return t?l(1e3*t.label,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}):""},labelPointStyle:e=>({pointStyle:"Total Nodes"===e.dataset.label?"rect":"line"}),label:e=>`  ${e.formattedValue} ${e.dataset.label||""}`}},annotation:{annotations:n.reduce(((n,a,l)=>({...n,[`annotation${l}`]:{type:"line",value:t.findIndex((e=>e[0]===a.timestamp)),borderColor:(0,d.getRgbColor)("attention",.3)({theme:e}),borderDashOffset:0,borderWidth:10,drawTime:"afterDatasetsDraw",label:{drawTime:"afterDatasetsDraw",display:!1,backgroundColor:(0,d.getRgbColor)("attention",.8)({theme:e}),borderWidth:0,color:"white",content:a.name,textAlign:"center"},scaleID:"x",enter(e,t){const n=e.chart,a=n.options.plugins.annotation.annotations[`annotation${l}`];a.label.display=!0,a.label.position=t.y/e.chart.chartArea.height>.5?"start":"end",n.update()},leave(e){const t=e.chart;t.options.plugins.annotation.annotations[`annotation${l}`].label.display=!1,t.update()}}})),{})}},responsive:!0,maintainAspectRatio:!1,scales:{x:{ticks:{callback:function(e){return l(1e3*this.getLabelForValue(e),{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0})},color:(0,d.getColor)("textLite")({theme:e})}},y:{beginAtZero:!0,ticks:{color:(0,d.getColor)("textLite")({theme:e})}}}})),[e,t]);return[i,o]}(g,s);return a.createElement(d.Flex,{column:!0,gap:4},a.createElement(d.Flex,{alignItems:"center",justifyContent:"between"},a.createElement(d.H3,null,"Usage"),a.createElement(pl.A,{values:o,utc:n,onChange:i,tagging:"billing-usage",isPlaying:!1,onlyDates:!0,accessorProps:Cl,padding:[4,0],width:"auto",maxDate:vl})),a.createElement(d.Flex,{position:"relative",height:90},m?a.createElement(zt.A,{height:"calculate(100vh-375px)",title:"Loading billing data..."}):u?a.createElement(hl.H4,{title:"Chart couldn't be loaded"}):a.createElement(gl.t1,{type:"bar",data:p,options:h}),a.createElement(d.Flex,{ref:b,background:"main",color:"generic",position:"absolute",round:!0,padding:[3],width:{max:75},sx:{visibility:"hidden"},onMouseOver:()=>b.current.style.visibility="hidden"})))},Tl=e=>{let{isSmall:t,currentPlan:n,loaded:l,currentLoaded:r,plans:o}=e;const[i,s]=(0,a.useState)({timestamp:null,value:null}),c=o[n.slug]?o[n.slug][n.version]:[];return a.createElement(a.Fragment,null,a.createElement(tl,{currentPlan:n}),l&&r?a.createElement(a.Fragment,null,(0,Fn.Kj)(n.slug)?a.createElement(Za,{isSmall:t,plans:o,currentPlan:n,showTeaserDetails:!0}):a.createElement(Ga,{slug:n.slug,version:n.version,prices:c,width:t?"auto":120,padding:[0],height:"auto",isSmall:t,isActive:!0,currentPlan:n,allPlansView:!0,nodesLastPeriod:i.value}),a.createElement(In,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),a.createElement(Al,{onNodesLastPeriodFetch:s})):a.createElement(zt.A,{title:l?"Loading billing info...":"Loading Netdata plans..."}))};var Sl=n(71847);const Il={year:"Yearly",month:"Monthly"},kl=e=>{let{currentPlan:t}=e;const n=(0,r.bq)(),[l,o]=(0,Tn.Qh)(),{cancelling:i,startCancelling:s,stopCancelling:c}=(0,Tn.og)(),m=!!t.billingEmail&&!o,[u,g]=(0,E.A)(),[p,b]=(0,me.A)(),f=(0,Tn.M4)(),{title:x}=ua.FJ[t.slug]||ua.FJ.free,{id:y}=(0,za.A)(),C=(0,h.JT)("billing:Manage"),v=(0,h.JT)("billing:ReadAll"),{title:w}=ua.FJ[t?.slug]||ua.FJ.free,A=Il[t?.interval];return a.createElement(d.Flex,{column:!0,gap:2},a.createElement(d.Flex,{gap:2,alignItems:"center"},a.createElement(ge.A,{as:jt.N_,to:`/spaces/${n}/settings/billing`,disabled:i,color:"text",hoverColor:"textLite",showToolTip:!0,content:"Back to Plan & Billing",align:"bottom",isBasic:!0},a.createElement(d.Icon,{name:"arrow_left",width:"20px",height:"20px",margin:[1.5,0,0]})),a.createElement(d.H3,null,"All Plans")),a.createElement(Qa,null,a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Active plan:"),a.createElement(d.Text,{strong:!0},w)),a.createElement(In,null),A&&a.createElement(a.Fragment,null,a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Billing frequency:"),a.createElement(d.Text,{strong:!0},A)),a.createElement(In,null)),t.commitment?a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Committed Nodes:"),a.createElement(d.Text,{strong:!0},t?.committedNodes||0)):null,a.createElement(In,null),v&&a.createElement(a.Fragment,null,a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Credit:"),a.createElement(d.Text,{strong:!0},jn.format(t?.balance?.amount||0)),a.createElement(Oe.A,{content:Xa,align:"bottom",isBasic:!0},a.createElement(d.Icon,{name:"information",width:"16px",height:"16px",color:"textLite"}))),a.createElement(In,null),a.createElement(d.Flex,{gap:1,alignItems:"center"},a.createElement(d.Text,null,"Billing email:"),a.createElement(d.Text,{strong:!0},t?.billingEmail||"-")),a.createElement(In,null)),a.createElement(ge.A,{Component:d.Flex,cursor:m?"pointer":"default",disabled:!m,onClick:l,alignItems:"center",gap:1},a.createElement("span",null,"Billing options and Invoices"),a.createElement(d.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"})),!(0,Fn.Kj)(t?.slug)&&a.createElement(a.Fragment,null,a.createElement(In,null),a.createElement(ge.A,{Component:d.Flex,cursor:"pointer",onClick:g,alignItems:"center",gap:1,disabled:i||!C,"data-ga":"cancel-plan::click::billing"},a.createElement(d.Text,{textDecoration:"underline"},i?"Canceling plan...":"Cancel plan")))),a.createElement(In,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),u&&a.createElement(ma,{title:"Community",onConfirm:()=>{s(),f({productId:y}).then((()=>((0,Sl.H)("billing","cancel-plan","global-view",{slug:t?.slug,interval:t?.interval,success:!0}),p({header:"Successfully canceled subscription",text:"You are now on Community plan"})))).catch((()=>((0,Sl.H)("billing","cancel-plan","global-view",{slug:t?.slug,interval:t?.interval,success:!1}),b({header:"Failed to cancel the subscription",text:`Remained on ${x} plan`})))).finally((()=>{c()}))},onClose:g}))},Fl=e=>{let{plans:t,currentPlan:n}=e;const{sendButtonClickedLog:l}=(0,Se.A)(),{version:r}=(0,za.s)(),o=t[ua.VH.homelab]?.[r],i=(0,a.useCallback)((()=>{window.open("https://www.netdata.cloud/request-enterprise/","_blank","noopener,noreferrer"),l({feature:"OnPremContact"})}),[l]),s=(0,a.useCallback)((()=>{window.open("https://www.netdata.cloud/pricing/","_blank","noopener,noreferrer"),l({feature:"OnPlanComparison"})}),[l]);return a.createElement(d.Flex,{column:!0,gap:2,alignItems:"center"},a.createElement(d.Text,null,"Check our"," ",a.createElement(Ga,{asAnchor:!0,anchorText:"Homelab Plan",slug:ua.VH.homelab,plans:t,version:r,prices:o,currentPlan:n})," ","for home-based projects and our ",a.createElement(ge.A,{onClick:i},"On-prem Plan")," for full onsite deployment!"),a.createElement(ge.A,{onClick:s},"Check the full plan comparison on our website."))};var Pl=n(98496);const $l=()=>a.createElement(Pl.A,{title:"No access"},a.createElement(d.Text,null,"You don't have permissions to view this page.")),Ml=e=>{let{plans:t,plansLoaded:n,currentPlan:l}=e;const{isReseller:r}=Wa();return r?a.createElement($l,null):n?a.createElement(d.Flex,{column:!0,gap:8,height:"100%",overflow:{vertical:"auto"}},a.createElement(kl,{currentPlan:l}),a.createElement(d.Flex,{column:!0,gap:8,alignItems:"center"},a.createElement(Za,{plans:t,currentPlan:l,showAllPlans:!0,showTeaserDetails:!0}),a.createElement(Fl,{plans:t,currentPlan:l}))):a.createElement(zt.A,{title:"Loading plans..."})},Ll={month:"Monthly",year:"Yearly"},Nl=()=>{const[e,t]=(0,jt.ok)(),[n,l]=(0,me.A)(),{activate:r}=(0,ba.H)();(0,a.useEffect)((()=>{const a=e.get("from"),o=e.get("from_committed_nodes"),i=e.get("interval"),s=e.get("result"),c=e.get("to"),d=e.get("to_committed_nodes"),m=e.get("from_trial"),u=(0,Fn.JR)(a,c);if(s){const g="success"==s,p={from:a,fromNodes:o,interval:i,to:c,toNodes:d,fromTrial:m,success:g};(g?n:l)((e=>{let{from:t,to:n,fromNodes:a,toNodes:l,interval:r,fromTrial:o,success:i=!0}=e;if(o)return{header:i?"Successful upgrade":"Failed to upgrade",text:i?"You have successfully upgraded your plan":"Something went wrong"};const s=Ll[r]||r;if(t===n&&a===l)return{header:i?"Successful billing cycle change":"Failed to update billing cycle",text:i?`Subscription billing cycle changed to ${s}`:`Subscription is still on ${s} billing cycle`};if(t===n)return{header:i?"Successful change of commitment":"Failed to change the commitment",text:i?`Commitment ${a<l?"increased":"decreased"} from ${a} to ${l} nodes`:`Commitment remained the same, ${a} nodes`};const c=!(0,Fn.JR)(t,n);return{header:i?`Successfully ${c?"downgraded":"upgraded"} plan`:`Failed to ${c?"downgrade":"upgrade"} plan`,text:i?`Subsrciprion ${c?"downgraded":"upgraded"} from ${t} to ${n} plan (${s})`:`Remained on ${t} plan`}})(p)),(0,Sl.H)("billing","callback","global-view",p),u&&r(),e&&(e.delete("from"),e.delete("from_committed_nodes"),e.delete("interval"),e.delete("result"),e.delete("to"),e.delete("to_committed_nodes"),e.delete("from_trial"),t(e))}}),[e,n,l,r])},Rl=()=>{const[e]=(0,Ne.Ay)();return a.createElement(l.C5,{replace:!0,to:`/spaces/${e}`})},Dl=()=>{Nl();const{loaded:e,value:t}=(0,Tn.lU)(),{loaded:n,value:r}=(0,Tn.JN)(),o="AWS"==r?.paymentProvider,i=(0,An.J)();return a.createElement($.Ay,{feature:"Billing"},a.createElement(d.Flex,{column:!0,height:"calc(100% - 30px)",gap:3},a.createElement(l.BV,null,a.createElement(l.qh,{path:"/all-plans",element:o?a.createElement(Rl,null):a.createElement(Ml,{plans:t,plansLoaded:e,currentPlan:r})}),a.createElement(l.qh,{path:"/",element:a.createElement(Tl,{isSmall:i,currentPlan:r,loaded:e,currentLoaded:n,plans:t})}))))};var Bl=n(58205),_l=n(1239);const Ul=(0,i.A)((()=>Promise.all([n.e(7208),n.e(7304)]).then(n.bind(n,7304)))),Vl=(0,i.A)((()=>Promise.all([n.e(2039),n.e(6267),n.e(185)]).then(n.bind(n,70185)))),Hl=(0,c.default)(m.t).withConfig({displayName:"manageWorkspace__ColumnHeader",componentId:"sc-1q2o0yg-0"})(["width:180px;padding:16px;"]),Ol=e=>t=>a.createElement(a.Suspense,{fallback:a.createElement(zt.A,{title:"Loading settings tab..."})},a.createElement(e,t)),Wl=e=>t=>a.createElement(u.Yv,{flex:"1",overflow:"hidden"},a.createElement(e,t)),Yl=e=>t=>{let{containerProps:n={},...l}=t;return a.createElement(u.Yv,(0,o.A)({flex:"1",overflow:"hidden",height:"100%",padding:[4,0,0]},n),a.createElement(e,l))},ql=Wl(Cn),jl=Wl(Be),zl=Wl(dt),Jl=Yl(rt),Gl=Yl(tn),Kl=Wl(Dl),Zl=Yl(Ol(Ul)),Ql=Wl(Ol(Vl)),Xl=(0,a.memo)((()=>{const e=(0,l.Zp)(),{state:t={},pathname:n}=(0,l.zy)(),{settingsTab:o,...i}=(0,l.g)(),[c]=(0,a.useState)(t?.previousUrlPath||null),m=(0,r.ap)("name"),p=(0,r.ap)("id"),b=(e=>{const t=D.IV.indexOf(e);return-1!==t?t:D.Wk})(o),E=(0,a.useCallback)((t=>{const a=((e,t)=>{const n=e.split("/"),a=n.indexOf("settings")+1-n.length;return`${n.slice(0,a).join("/")}/${D.IV[t]||D.Wk}`})(n,t);e(a)}),[o]);(0,a.useEffect)((()=>{D.ys[o]||e((0,s.tW)(n,{...i,settingsTab:D.Wk}))}),[]);const f=(0,h.JT)("billing:ReadBasic"),x=(0,h.JT)("room:ReadAll"),y=(0,h.JT)("user:ReadAll"),C=(0,h.JT)("channel:ReadAll"),v=(0,A.At)(),w=(0,Ue.ES)(p);(0,a.useEffect)((()=>{f||o===D.bO&&e((0,s.tW)(n,{...i,settingsTab:D.Wk}))}),[f,o]);const T=(0,r.bq)(),S=(0,a.useCallback)((t=>{e(t?`/spaces/${t}`:c||`/spaces/${T}`)}),[c,T]);return m?a.createElement($.Ay,{feature:"SpaceSettings"},a.createElement(u.GO,{full:!0,"data-testid":"manageWorkspaceModal",closeOnClickOutside:!1,closeOnEsc:!1,onClose:S,width:"100%"},a.createElement(g.z,{"data-testid":"manageWorkspaceModal-header",onClose:S,title:a.createElement(wn,null)}),a.createElement(d.Tabs,{row:!0,column:!1,"data-testid":"manageWorkspaceModal-tabs",selected:b,onChange:E,TabsHeader:Hl,tabsProps:{column:!0},height:"100%",noDefaultBorder:!0,position:"relative",overflow:"hidden",width:"100%"},w?null:a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-spaceTab",label:D.ys[D.mm],"data-ga":"manage-space::click-tab::space-tab",isMenuItem:!0},a.createElement(ql,{"data-testid":"manageWorkspaceModal-spaceTabContent",onClose:S,small:!0})),!w&&x?a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-warRoomsTab","data-ga":"manage-space::click-tab::rooms-tab",label:"Rooms",isMenuItem:!0},a.createElement(jl,{"data-testid":"manageWorkspaceModal-warRoomsTabContent"})):null,x||v?a.createElement(d.Tab,{basis:0,label:"Nodes","data-testid":"manageWorkspaceModal-nodesTab","data-ga":"manage-space::click-tab::nodes-tab",isMenuItem:!0},a.createElement(zl,{"data-testid":"manageWorkspaceModal-nodesTabContent"})):null,!w&&y?a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-usersTab","data-ga":"manage-space::click-tab::users-tab",label:"User Management",isMenuItem:!0},a.createElement(Jl,{"data-testid":"manageWorkspaceModal-usersTabContent"})):null,!w&&C?a.createElement(d.Tab,{basis:0,label:"Alerts & Notifications","data-testid":"manageWorkspaceModal-notificationsTab","data-ga":"manage-space::click-tab::notifications-tab",isMenuItem:!0},a.createElement(Gl,null)):null,w||!f||_l.ei?null:a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-billingTab","data-ga":"manage-space::click-tab::billing-tab",label:"Plan & Billing",isMenuItem:!0},a.createElement(Kl,{"data-testid":"manageWorkspaceModal-billingTabContent"})),!w&&x?a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-integrationsTab","data-ga":"manage-space::click-tab::integrations-tab",label:"Integrations",isMenuItem:!0},a.createElement(Zl,{flavour:Bl.D_.settingsPage,containerProps:{padding:[0]},"data-testid":"manageWorkspaceModal-integrationsTabContent"})):null,a.createElement(d.Tab,{basis:0,"data-testid":"manageWorkspaceModal-configurationsTab","data-ga":"manage-space::click-tab::configurations-tab",label:D.ys[D.$d],isMenuItem:!0},a.createElement(Ql,null))))):null})),er=()=>{const e=(0,r.ap)("id"),t=(0,Ue.ES)(e)?"virtual":"default",n=D.DT[t],{pathname:o,state:i}=(0,l.zy)();return a.createElement(l.BV,null,a.createElement(l.qh,{path:"/",element:a.createElement(l.C5,{state:i,to:{pathname:`${o}/${n}`}})}),a.createElement(l.qh,{path:":settingsTab/*",element:a.createElement(Xl,null)}))}},7357:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var a=n(58168),l=n(96540),r=n(65336),o=n(47767),i=n(22292),s=n(55463),c=(n(17333),n(98992),n(54520),n(47444)),d=n(71835),m=n(54702),u=n(55189),g=n(3914),p=n(48849),h=n(56639),b=n(14994);var E=n(57992);const f="leave-space-dialog",x="leaveSpaceDialog",y=e=>{let{id:t,name:n,onClose:y}=e;const C=(0,o.Zp)(),v=(0,i.uW)("id"),w=(0,s.Gi)(),A=(0,s.i3)(),T=(0,s.pB)(),S=(e=>{const[,t]=(0,d.A)();return(0,c.Zs)((n=>{let{snapshot:a,set:l,reset:r}=n;return async n=>{let{currentUserId:o,onSuccess:i,onError:c}=n;const d=await a.getPromise((0,g.nC)("ids")),E=d.filter((t=>e!==t)),[f]=E;if(!f)return void t({header:"Spaces",text:u.sh.leave});const{slug:x}=f&&await a.getPromise((0,h.Ay)(f));l((0,g.nC)("ids"),E),l(p.A,(t=>t.filter((t=>t!==e))));try{await(0,m.XY)(e,[o]),i&&i(x),(0,s.Z8)(r,e),(0,b.Is)(r,e),r((0,h.Ay)(e))}catch(y){l((0,g.nC)("ids"),d),c&&c()}}}),[e])})(t),I=(0,E.A)(t),k=(0,l.useCallback)((e=>C(`/spaces/${e}`)),[]),F=1===w.length,P=1===A.length&&T,$=F?{confirmLabel:"Yes, leave","data-ga":`${f}-last-member`,"data-testid":`${x}LastMember`,handleConfirm:()=>I({onSuccess:k}),message:l.createElement(l.Fragment,null,"If you leave, space ",l.createElement("strong",null,n)," will be deleted immediately.",l.createElement("br",null),"Are you sure you want to continue?"),title:`Leave and delete ${n} space`}:P?{confirmLabel:"Give rights","data-ga":`${f}-last-admin`,"data-testid":`${x}LastAdmin`,handleConfirm:()=>C("users"),isConfirmPositive:!0,message:l.createElement(l.Fragment,null,"You are the last admin of ",l.createElement("strong",null,n)," space. Please give admin rights to another member so you can leave this space."),title:`Leave ${n} space`}:{confirmLabel:"Yes, leave","data-ga":f,"data-testid":x,handleConfirm:()=>S({currentUserId:v,onSuccess:k}),message:l.createElement(l.Fragment,null,"You are about to leave ",l.createElement("strong",null,n)," space.",l.createElement("br",null),"Are you sure you want to continue?"),title:`Leave ${n} space`};return l.createElement(r.ConfirmationDialog,(0,a.A)({handleDecline:y},$))}},15951:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var a=n(96540),l=n(40826),r=n(58168),o=n(8711),i=n(65336),s=n(4659);const c=o.default.article.withConfig({displayName:"markdocSchema__StyledArticle",componentId:"sc-c3znqb-0"})(["padding:0;"]),d=(0,o.default)(i.Text).attrs((e=>({color:"main",fontSize:"14px",...e}))).withConfig({displayName:"markdocSchema__StyledText",componentId:"sc-c3znqb-1"})([""]),m=(0,o.default)(s.A).attrs((e=>({color:"main",fontSize:"14px",...e}))).withConfig({displayName:"markdocSchema__StyledAnchor",componentId:"sc-c3znqb-2"})(["&:hover{color:"," !important;}"],(0,i.getColor)("main")),u={document:{render:c},paragraph:{render:e=>{let{children:t,...n}=e;return a.createElement(i.Flex,(0,r.A)({padding:[1,0]},n),a.createElement(d,null,t))}},link:{render:e=>{let{children:t,href:n,...l}=e;return a.createElement(m,(0,r.A)({href:n,rel:"noopener noreferrer",target:"_blank"},l),t)},attributes:{href:{type:String}}},strong:{render:e=>{let{children:t,...n}=e;return a.createElement(d,(0,r.A)({strong:!0,fontSize:"14px"},n),t)}}},g=e=>{let{children:t}=e;return a.createElement(l.A,{config:{nodes:u}},t)}},45115:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(41393),n(81454);var a=n(3914);const l=()=>{const e=(0,a.ap)(),{warnings:t}=e||{};return{warnings:(t||[]).map((e=>{let{kind:t,text:n,urgency:a}=e;return{warningKey:t,warningLevel:a||"info",text:n}}))}}},97200:(e,t,n)=>{var a=n(13222),l=0;e.exports=function(e){var t=++l;return a(e)+t}}}]);