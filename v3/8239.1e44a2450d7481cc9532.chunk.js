!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a36e791d-a73c-4fe3-818e-714c623ae4dc",e._sentryDebugIdIdentifier="sentry-dbid-a36e791d-a73c-4fe3-818e-714c623ae4dc")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"c87aa722cb3cb6eb3ac10b8f2032443089be80ba"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[8239],{16607:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(58168),o=n(96540),a=n(65336),d=n(29217);const l=e=>t=>{let{tooltip:n,onClick:l,...i}=t;const s=(0,o.useRef)(),c=(0,o.useCallback)((e=>{l?.(e),s.current?.blur?.()}),[l,s.current]),u=(0,o.useMemo)((()=>({...i,...l?{onClick:c}:{}})),[c,i]);return o.createElement(d.A,{align:"bottom",content:n},o.createElement(a.Box,null,o.createElement(e,(0,r.A)({ref:s},u))))}},76243:(e,t,n)=>{n.d(t,{A:()=>h,j:()=>p});var r=n(58168),o=(n(3064),n(98992),n(72577),n(96540)),a=n(65336),d=n(3914),l=n(20378),i=n(46741),s=n(85630);const c=(0,n(16607).A)(a.Button),u=["Business","Pro","Homelab"],p=e=>{let{view:t,edit:n,forceAccess:r,ifForbidden:a="disabled",tooltip:c,disabled:p}=e;const h=(0,d.dg)(),f=(0,i.JT)("agent:ReadDynCfg"),g=(0,i.JT)("agent:EditDynCfg"),m=(0,i.JT)("billing:Manage"),b=(0,d.UV)("ids"),y=(0,d.jw)(b),[v]=(0,l.Q8)(),{userStatus:k,spaceId:C}=v||{},_=h&&"loggedIn"==k,A=!!C&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return!1;const{plan:n}=t.find((t=>{let{id:n}=t;return n==e}))||{};for(let r=0;r<=u.length;r++)if(n.startsWith(u[r]))return!0;return!1}(C,y),P=r||(_?A:n?g:!t||f),{loaded:w,isPaid:S}=(0,s.A)();return{hidden:"hide"===a&&!P,isDisabled:"disabled"===a&&!P||p,tooltipText:(0,o.useMemo)((()=>P?c:w?S||h?"User does not have sufficient permissions to perform this action. Please contact your admin to grant access.":"Upgrade your plan to use this feature.":null),[w,S,P,c]),showUpgradeButton:m&&!P&&!S,hasPermission:P}},h=(0,o.forwardRef)(((e,t)=>{let{view:n,edit:a,forceAccess:d,ifForbidden:l,tooltip:i,disabled:s,...u}=e;const{hidden:h,isDisabled:f,tooltipText:g}=p({view:n,edit:a,forceAccess:d,ifForbidden:l,tooltip:i,disabled:s});return h?null:o.createElement(c,(0,r.A)({ref:t,disabled:f,tooltip:g},u))}))},94390:(e,t,n)=>{n.d(t,{$7:()=>o,CP:()=>b,D9:()=>p,DR:()=>d,FL:()=>r,Fn:()=>h,Sd:()=>a,T_:()=>f,V6:()=>c,V8:()=>g,bM:()=>s,g7:()=>i,gh:()=>u,q4:()=>l,zy:()=>m});const r=51,o="/health/alerts/prototypes",a="health:alert:prototype",d=`${a}:`,l="dyncfg",i={template:{color:"success"},default:{color:"text"}},s={accepted:{label:"Accepted",color:"success",icon:"checkmark_s"},disabled:{label:"Disabled",color:["neutral","grey100"],icon:"none_selected"},failed:{label:"Failed",color:["red","red100"],icon:"warning_triangle"},orphan:{label:"Orphan",color:["neutral","grey90"],icon:"checkmark_partial_s"},incomplete:{label:"Incomplete",color:["yellow","yellow100"],icon:"incindent_manager"},running:{label:"Running",color:"success",icon:"checkmark_s"}},c={internal:{icon:"internalConfig"},stock:{icon:"stockConfig"},user:{icon:"userConfig"},discovered:{icon:"discoveredConfig"},dyncfg:{icon:"dynamicConfig"}},u={loaded:!0,value:{},hasError:!1},p="__unsaved__",h="Something went wrong",f={accepted:{label:"Accepted",color:"border",searchCondition:{status:"accepted"}},disabled:{label:"Disabled",color:"border",searchCondition:{status:"disabled"}},failed:{label:"Failed",color:"border",searchCondition:{status:"failed"}},orphan:{label:"Orphan",color:"border",searchCondition:{status:"orphan"}},incomplete:{label:"Incomplete",color:"border",searchCondition:{status:"incomplete"}},running:{label:"Running",color:"border",searchCondition:{status:"running"}}},g={internal:{label:"Internal",color:"border",searchCondition:{source_type:"internal"}},stock:{label:"Stock",color:"border",searchCondition:{source_type:"stock"}},user:{label:"User",color:"border",searchCondition:{source_type:"user"}},discovered:{label:"Discovered",color:"border",searchCondition:{source_type:"discovered"}},dyncfg:{label:"Dynamic configuration",color:"border",searchCondition:{source_type:"dyncfg"}}},m=["restartRequired","pluginRejected","failed","incomplete"],b="__dyncfg_tree_path__"},8239:(e,t,n)=>{n.d(t,{KD:()=>pe,Nj:()=>ne,hp:()=>te,Ht:()=>Y,yW:()=>G,nM:()=>X,qK:()=>le,SW:()=>M,Hj:()=>ae,K_:()=>J,t8:()=>H,wd:()=>x,L5:()=>ce,Jb:()=>he,PJ:()=>V,_O:()=>se,QH:()=>Z,sh:()=>z,OU:()=>Q,ZN:()=>q,H2:()=>fe,SD:()=>de,EZ:()=>re,DP:()=>W,O_:()=>ie,xS:()=>ee,y8:()=>oe,MQ:()=>ue,_F:()=>K});n(17333),n(9920),n(41393),n(98992),n(54520),n(3949),n(81454);var r=n(96540),o=n(47444),a=n(31629),d=n(37618),l=n(49286);const i=e=>({...e,attention:(0,l.bn)(e.attention)}),s={tree:a.A.get,schema:a.A.get,get:a.A.get,enable:a.A.get,disable:a.A.get,restart:a.A.get,remove:a.A.get,add:a.A.post,update:a.A.post,test:a.A.post,userconfig:a.A.post,default:a.A.get},c=function(){let{node:e={},searchParams:t={},payload:n={},...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.entries(e);if(!t.length)return"";const n=new URLSearchParams;return t.forEach((e=>{let[t,r]=e;r&&n.append(t,r)})),`?${n.toString()}`}(t),{action:l}=t,c=s[l]||s.default,u={..."tree"==l?{transform:i,...r}:{...r},...d.Ay?{baseURL:window.envSettings.agentApiUrl,...r}:{...r}},p=c==a.A.get?[u]:[n,u];if(d.Ay){const{value:t,isParent:n}=e;return c(`${n?"":`/host/${t}`}/api/v1/config${o}`,...p)}return c(`/api/v2/nodes/${e?.value}/config${o}`,...p)},u=e=>{let{node:t,path:n,id:r}=e;return t?c({node:t,searchParams:{action:"tree",path:n,id:r},allow401:!0}):Promise.resolve({data:{}})},p=e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"get",id:t}})},h=e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"enable",id:t}})},f=e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"disable",id:t}})},g=e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"restart",id:t}})},m=e=>{let{id:t,name:n,node:r,payload:o}=e;return c({node:r,searchParams:{action:"add",name:n,id:t},payload:o})},b=e=>{let{id:t,node:n,payload:r}=e;return c({node:n,searchParams:{action:"update",id:t},payload:r})},y=e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"remove",id:t}})},v=(0,o.eU)({key:"newConfigurationItemAtom",default:null}),k=(0,o.eU)({key:"dyncfgModalAtom",default:null}),C=(0,o.eU)({key:"dyncfgKeyAtom",default:0}),_=(0,o.Iz)({key:"dyncfgVirtualListScrollPosition",default:0}),A=(0,o.eU)({key:"dyncfgClosedContainers",default:[]}),P=(0,o.Iz)({key:"dyncfgItemTree",default:null}),w=(0,o.Iz)({key:"dyncfgItemSchema",default:{loaded:!1,data:null,error:null}}),S=(0,o.eU)({key:"dyncfgAlertNavigationAtom",default:{}}),E={value:"",error:null},I=(0,o.eU)({key:"dyncfgUserConfig",default:E}),j=(0,o.Iz)({key:"dyncfgDataRefresh",default:!1}),U=(0,o.Iz)({key:"dyncfgSelectedItems",default:[]});var D=n(3914),L=n(76243),R=n(81198),O=n(94390);const T=(0,o.K0)({key:"configurationsTree",get:e=>{let{node:t,path:n}=e;return e=>{let{get:r}=e;return r(C),u({node:t,path:n})}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),$=(0,o.K0)({key:"configurationsSchema",get:e=>{let{id:t,node:n,key:r}=e;return e=>{let{get:o}=e;o(C);const a=o(w({id:t,node:n}));return r?a[r]:a}},set:e=>{let{id:t,node:n,key:r}=e;return(e,o)=>{let{set:a}=e;if(!r)return a(w({id:t,node:n}),o);a(w({id:t,node:n}),(e=>({...e,[r]:o})))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),N=(0,o.K0)({key:"configurationsData",get:e=>{let{id:t,node:n}=e;return e=>{let{get:r}=e;return r(C),p({id:t,node:n})}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),B=(0,o.K0)({key:"virtualListScrollPositionSelector",get:e=>{let{node:t,path:n}=e;return e=>{let{get:r}=e;return r(_({node:t,path:n}))}},set:e=>{let{node:t,path:n}=e;return(e,r)=>{let{set:o}=e;o(_({node:t,path:n}),r)}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),F=(0,o.K0)({key:"configurationsSelectedItemsState",get:e=>{let{node:t,path:n}=e;return e=>{let{get:r}=e;return r(U({node:t,path:n}))}},set:e=>{let{node:t,path:n}=e;return(e,r)=>{let{set:o}=e;o(U({node:t,path:n}),r)}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),K=e=>{let{node:t,path:n}=e;return(0,o.L4)(B({node:t,path:n}))},x=function(){let{node:e,path:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.xf)(T({node:e,path:t})),r="hasError"===n.state;return{loaded:"loading"!==n.state,value:n.contents?.data,hasError:r,error:n.contents?.response?.data||(r?O.Fn:null)}},H=function(){let{id:e,node:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{loaded:n,data:r,hasError:a,error:d}=(0,o.vc)($({id:e,node:t}));return{loaded:n,value:r,hasError:a,error:d,refresh:(0,o.RH)($({id:e,node:t}))}},J=e=>{let{id:t,node:n}=e;return(0,o.Zs)((e=>{let{set:r}=e;return()=>{(e=>{let{id:t,node:n}=e;return c({node:n,searchParams:{action:"schema",id:t}})})({id:t,node:n}).then((e=>{let{data:o}=e;r($({id:t,node:n,key:"loaded"}),!0),r($({id:t,node:n,key:"data"}),o)})).catch((e=>{const o=e?.response?.data?.error_message||e.message||"Something went wrong";r($({id:t,node:n,key:"loaded"}),!0),r($({id:t,node:n,key:"error"}),o)}))}}),[t,n])},M=function(){let{id:e,node:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.xf)(N({id:e,node:t})),r=(0,o.RH)(N({id:e,node:t})),a="hasError"===n.state;return{loaded:"loading"!==n.state,value:n.contents?.data,hasError:a,error:n.contents?.response?.data||(a?O.Fn:null),refresh:r}},z=()=>(0,o.vc)(v),Z=()=>(0,o.L4)(v),V=()=>(0,o.L4)(k),W=e=>{let{id:t,node:n}=e;return e=>(e?h:f)({id:t,node:n})},q=e=>{let{id:t,node:n}=e;return()=>g({id:t,node:n})},Q=e=>{let{id:t,node:n}=e;return()=>y({id:t,node:n})},G=e=>{let{node:t}=e;return(0,r.useCallback)((e=>{let{ids:n}=e;if(!t)return;const r=n.map((e=>y({id:e,node:t})));return Promise.allSettled(r)}),[t])},X=e=>{let{node:t}=e;return(0,r.useCallback)((e=>{let{ids:n}=e;if(!t)return;const r=n.map((e=>g({id:e,node:t})));return Promise.allSettled(r)}),[t])},Y=e=>{let{disable:t,node:n}=e;return(0,r.useCallback)((e=>{let{ids:r}=e;if(!n)return;const o=t?f:h,a=r.map((e=>o({id:e,node:n})));return Promise.allSettled(a)}),[n])},ee=e=>{let{id:t,node:n}=e;return e=>b({id:t,node:n,payload:e})},te=e=>{let{id:t,isNewItem:n}=e;return(0,r.useCallback)((function(){let{nodes:e=[],payload:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=n?r.name:(0,R.J3)(t),a=n?`${t}:${o}`:t,d=e.map((e=>p({id:a,node:e}).then((()=>n?Promise.reject({status:"rejected",message:`A job with name "${o}" already exists in this node.`}):b({id:a,node:e,payload:r}))).catch((()=>{const a=n?t:(0,R.UE)(t);return m({id:a,node:e,name:o,payload:r})}))));return Promise.allSettled(d)}),[t,n,m,b])},ne=e=>{let{id:t,node:n}=e;return e=>{let{name:r,...o}=e;return m({id:t,name:r,node:n,payload:o})}},re=e=>{let{id:t,node:n}=e;return e=>{let{name:r,payload:o}=e;return(e=>{let{id:t,name:n,node:r,payload:o}=e;return c({node:r,searchParams:{action:"test",name:n,id:t},payload:o})})({id:t,name:r,node:n,payload:o})}},oe=e=>{let{id:t,node:n}=e;const o=(0,r.useRef)(),{hasPermission:a}=(0,L.j)({edit:!0});return function(){let{name:e="test",payload:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a?(o.current&&o.current.cancel(),o.current=(e=>{let{id:t,name:n,node:r,payload:o}=e;return c({node:r,searchParams:{action:"userconfig",name:n,id:t},payload:o,noResponseParsing:!0})})({id:t,name:e,node:n,payload:r}),o.current):Promise.resolve({data:""})}},ae=()=>{const e=(0,o.lZ)(C),[,t]=Z();return()=>{e((e=>e+1)),t(null)}},de=e=>{let{node:t,path:n,isNewItem:o}=e;const{loaded:a,value:d,hasError:l}=x({node:t,path:n});return(0,r.useCallback)((e=>{if(!a||l)return null;const{tree:t}=d||{},n=(0,R.dG)(t);return o?n[e]:n[n[e]?.template]}),[a,l,d,o])},le=()=>{const[e,t]=(0,o.L4)(A),n=(0,r.useCallback)((e=>{t((t=>t.filter((t=>t!=e))))}),[t]),a=(0,r.useCallback)((e=>{t((t=>t.includes(e)?t:[...t,e]))}),[t]),d=(0,r.useCallback)((t=>{e.includes(t)?n(t):a(t)}),[e,n,a]);return{items:e,toggle:d,open:n,close:a,reset:(0,o.E0)(A)}},ie=e=>{let{node:t,id:n}=e;return(0,o.Zs)((e=>{let{set:r}=e;return async()=>{u({node:t,id:n}).then((e=>{let{data:n}=e;const{tree:o}=n||{};if(o){const e=Object.values(o)[0];e&&Object.entries(e).forEach((e=>{let[n,o]=e;r(P({node:t,id:n}),(0,l.bn)(o))}))}})).catch((()=>{}))}}),[t,n])},se=e=>{let{node:t,id:n}=e;return(0,o.vc)(P({node:t,id:n}))},ce=()=>{const[e,t]=(0,o.L4)(S),n=(0,r.useCallback)((()=>t({})),[t]);return{state:e,setState:t,refresh:n}},ue=()=>{const[{value:e,error:t},n]=(0,o.L4)(I),a=(0,r.useCallback)((e=>t=>{n({...E,[e]:t})}),[n]);return{value:e,error:t,setValue:a("value"),setError:a("error"),refresh:(0,r.useCallback)((()=>n(E)),[n])}},pe=(0,o.K0)({key:"dyncfgDataRefreshState",get:e=>{let{spaceId:t,id:n,node:r}=e;return e=>{let{get:o}=e;return o(j({spaceId:t,id:n,node:r}))}},set:e=>{let{spaceId:t,id:n,node:r}=e;return(e,o)=>{let{set:a}=e;a(j({spaceId:t,id:n,node:r}),o)}}}),he=e=>{let{id:t,node:n}=e;const r=(0,D.vt)();return(0,o.L4)(pe({spaceId:r,id:t,node:n}))},fe=e=>{let{node:t,path:n}=e;const[a,d]=(0,o.L4)(F({node:t,path:n})),l=(0,r.useCallback)((e=>{d((t=>t.includes(e)?[...t]:[...t,e]))}),[d]),i=(0,r.useCallback)((e=>{d((t=>[...t.filter((t=>t!=e))]))}),[d]),s=(0,r.useCallback)((e=>{a.includes(e)?i(e):l(e)}),[a,l,i]),c=(0,r.useCallback)((e=>a.includes(e)),[a]),u=(0,r.useCallback)((()=>d([])),[d]);return{items:a,setItems:d,toggle:s,add:l,remove:i,isSelected:c,reset:u}}},81198:(e,t,n)=>{n.d(t,{J3:()=>d,UE:()=>l,Xt:()=>u,dG:()=>i,m8:()=>s,sr:()=>c});n(17333),n(14905),n(98992),n(54520),n(8872);var r=n(94390),o=n(80158);const a=new RegExp(/^\/[^/]+/),d=e=>{const t=e?.split(":");return t?t[t.length-1]:""},l=e=>e?.split(":").slice(0,-1).join(":"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return n.match(/\/[^/]+/g)?{...e,...r}:r}),{})},s=function(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return{...e,[n.replace(a,"")]:r}}),{})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:Object.entries(r).reduce(((e,t)=>{let[n,o]=t;if(["template","single"].includes(o.type)&&(e[n]={...o}),"template"==o.type){const t=Object.entries(r).filter((e=>{let[,{template:t}]=e;return t==n})).reduce(((e,t)=>{let[n,r]=t;return{...e,[n]:r}}),{});Object.keys(t).length&&(e[n].templateChildren=t)}return e}),{})}}),{})},c=e=>{const t=[],n=Object.entries(e).reduce(((e,n)=>{let[d,l]=n;const i=d.match(a)?.[0],s=(0,o.Zr)(i?.replace(/^\//,"")||"");s&&t.push(s);const c=d.replace(a,"")||`/${r.CP}${d.replace(/^\//,"")}`;return{...e,[s]:{...e[s],[c]:l}}}),{});return{tabs:t,tree:n}},u=e=>{let{tree:t={},level:n=1,parents:o=[]}=e;return Object.entries(t).reduce(((e,t)=>{let[a,d]=t;const l=a.match(/\/[^/]+/g)||[];return l.length>1?[...e,{id:l[0],type:"path",level:n,parents:o},...u({tree:{[l.slice(1).join("")]:d},level:n+1,parents:[...o,l[0]]})]:1===l.length?[...e,...l[0].startsWith(`/${r.CP}`)?[]:[{id:l[0],type:"path",level:n,parents:o}],...Object.entries(d).reduce(((e,t)=>[...e,{id:t[0],level:n+1,...t[1],parents:[...o,l[0]]},...t[1].templateChildren?u({tree:t[1].templateChildren,level:n+1,parents:[...o,l[0],t[0]]}):[]]),[])]:[...e,{id:a,level:n+1,...d,parents:o}]}),[])}},85630:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(19673);const o={Business:!0,Pro:!0,Homelab:!0,Community:!1},a=()=>{const{loaded:e,value:t}=(0,r.JN)();return{loaded:e,isPaid:e&&o[t?.class]}}}}]);